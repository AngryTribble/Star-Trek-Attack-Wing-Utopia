<div class="card-outer card-upgrade font-staw" ng-class="{ 'card-unique': upgrade.unique, 'card-OnePerShip': upgrade.OnePerShip, 'card-factionFederation': upgrade.factionFederation, 'card-FrontArc': upgrade.FrontArc, 'card-RearArc': upgrade.RearArc, 'card-Hull': upgrade.Hull, 'card-mirror': upgrade.mirror, 'dragging': upgrade == dragStore.item }" draggable drag-item="upgrade" drag-store="dragStore" drag-source="dragSource">

	<div class="card-image">
		<img ng-if="upgrade.image" ng-src="{{upgrade.image}}" style="width: 100%; height: 95%; object-fit: cover; border-radius: 10px; background: repeating-conic-gradient(#808080 0% 25%, #d3d3d3 0% 50%) 50% / 20px 20px;" />
	</div>

	<div class="card-corner-top-left pull-left">
		<i ng-if="upgrade.unique" class="card-unique-icon fs fs-unique pull-left"></i>
		<i ng-if="upgrade.OnePerShip" class="card-OnePerShip-icon fs fs-OnePerShip pull-left"></i>
		<i ng-if="upgrade.specialization" class="card-specialization-icon fs fs-specialization pull-left"></i>
		<div class="card-corner-inner pull-right"></div>
	</div>

	<div class="card-title-container text-left">
		<span ng-if="upgrade.showType" class="card-captain pull-right">{{upgrade.type|uppercase|removeDashes}}</span>
		<span ng-if="upgrade|valueOf:'attack':ship:fleet" class="card-weapon-attack pull-right" tooltip-show="ship" tooltip="upgrade|valueOf:'attack':ship:fleet:false:{modifiers:true}">{{upgrade|valueOf:'attack':ship:fleet}}</span>
		<span class="card-title"
			ng-class="{ 'card-title-long': upgrade.name.length >= 24 || (upgrade.showType && upgrade.name.length + upgrade.type.length >= 24) || (upgrade.attack && upgrade.name.length >= 20),
						'card-title-super-long': upgrade.name.length >= 31 || upgrade.showType && upgrade.name.length + upgrade.type.length >= 31,
			}">{{upgrade.name | uppercase}}</span>
	</div>

	<div class="card-border-left pull-left">
		<i ng-if="upgrade.captainFederation" class="card-captainFederation-icon fs fs-captainFederation" title="Federation Captain Required"></i>
		<i ng-if="upgrade.captainBajoren" class="card-captainBajoren-icon fs fs-captainBajoren" title="Bajoran Captain Required"></i>
		<i ng-if="upgrade.captainVulcan" class="card-captainVulcan-icon fs fs-captainVulcan" title="Vulcan Captain Required"></i>
		<i ng-if="upgrade.captainKlingon"  class="card-captainKlingon-icon fs fs-captainKlingon" title="Klingon Captain Required"></i>
		<i ng-if="upgrade.captainRomulan" class="card-captainRomulan-icon fs fs-captainRomulan" title="Romulan Captain Required"></i>
		<i ng-if="upgrade.captainDominion" class="card-captainDominion-icon fs fs-captainDominion" title="Dominion Captain Required"></i>
		<i ng-if="upgrade.captainIndependent" class="card-captainIndependent-icon fs fs-captainIndependent" title="Indpendent Captain Required"></i>
		<i ng-if="upgrade.captainFerengi" class="card-captainFerengi-icon fs fs-captainFerengi" title="Ferengi Captain Required"></i>
		<i ng-if="upgrade.captainKazon" class="card-captainKazon-icon fs fs-captainKazon" title="Kazon Captain Required"></i>
		<i ng-if="upgrade.captainXindi" class="card-captainXindi-icon fs fs-captainXindi" title="'Xindi Captain Required"></i>
		<i ng-if="upgrade.captainBorg" class="card-captainBorg-icon fs fs-captainBorg" title="Borg Captain Required"></i>
		<i ng-if="upgrade.captain8472" class="card-captain8472-icon fs fs-captain8472" title="Species 8472 Captain Required"></i>
		<i ng-if="upgrade.captainMU" class="card-captainMU-icon fs fs-captainMU" title="Mirror Universe Captain Required"></i>

		<i ng-if="upgrade.shipFederation" class="card-shipFederation-icon fs fs-card-shipFederation" title="Federation Ship Required"></i>
		<i ng-if="upgrade.shipBajoren" class="card-shipBajoren-icon fs fs-card-shipBajoren" title="Bajoran Ship Required"></i>
		<i ng-if="upgrade.shipVulcan" class="card-shipVulcan-icon fs fs-card-shipVulcan" title="Vulcan Ship Required"></i>
		<i ng-if="upgrade.shipKlingon" class="card-shipKlingon-icon fs fs-shipKlingon" title="Klingon Ship Required"></i>
		<i ng-if="upgrade.shipRomulan" class="card-shipRomulan-icon fs fs-shipRomulan" title="Romulan Ship Required"></i>
		<i ng-if="upgrade.shipDominion" class="card-shipDominion-icon fs fs-shipDominion" title="Dominion Ship Required"></i>
		<i ng-if="upgrade.shipIndependent" class="card-shipIndependent-icon fs fs-shipIndependent" title="Independent Ship Required"></i>
		<i ng-if="upgrade.shipFerengi" class="card-shipFerengi-icon fs fs-shipFerengi" title="Ferengi Ship Required"></i>
		<i ng-if="upgrade.shipKazon" class="card-shipKazon-icon fs fs-shipKazon" title="Kazon Ship Required"></i>
		<i ng-if="upgrade.shipXindi" class="card-shipXindi-icon fs fs-shipXindi" title="Xindi Ship Required"></i>
		<i ng-if="upgrade.shipBorg" class="card-shipBorg-icon fs fs-shipBorg" title="Borg Ship Required"></i>
		<i ng-if="upgrade.ship8472" class="card-ship8472-icon fs fs-ship8472" title="Species 8472 Ship Required"></i>
		<i ng-if="upgrade.shipMU" class="card-shipMU-icon fs fs-shipMU" title="Mirror Universe Ship Required"></i>

		<i ng-if="upgrade.costFederation" class="card-costFederation-icon">{{upgrade|valueOf:'costFederation':ship:fleet}}</i>
		<i ng-if="upgrade.costBajoren" class="card-costBajoren-icon">{{upgrade|valueOf:'costFederation':ship:fleet}}</i>
		<i ng-if="upgrade.costVulcan" class="card-costVulcan-icon">{{upgrade|valueOf:'costVulcan':ship:fleet}}</i>
		<i ng-if="upgrade.costKlingon" class="card-costKlingon-icon">{{upgrade|valueOf:'costKlingon':ship:fleet}}</i>
		<i ng-if="upgrade.costRomulan" class="card-costRomulan-icon">{{upgrade|valueOf:'costRomulan':ship:fleet}}</i>
		<i ng-if="upgrade.costHirogen" class="card-costHirogen-icon">{{upgrade|valueOf:'costHirogen':ship:fleet}}</i>
		<i ng-if="upgrade.costDominion" class="card-costDominion-icon">{{upgrade|valueOf:'costDominion':ship:fleet}}</i>
		<i ng-if="upgrade.costIndependent" class="card-costIndependent-icon">{{upgrade|valueOf:'costIndependent':ship:fleet}}</i>
		<i ng-if="upgrade.costFerengi" class="card-costFerengi-icon">{{upgrade|valueOf:'costFerengi':ship:fleet}}</i>
		<i ng-if="upgrade.costKazon" class="card-costKazon-icon">{{upgrade|valueOf:'costKazon':ship:fleet}}</i>
		<i ng-if="upgrade.costXindi" class="card-costXindi-icon">{{upgrade|valueOf:'costXindi':ship:fleet}}</i>
		<i ng-if="upgrade.costBorg" class="card-costBorg-icon">{{upgrade|valueOf:'costBorg':ship:fleet}}</i>
		<i ng-if="upgrade.cost8472" class="card-cost8472-icon">{{upgrade|valueOf:'cost8472':ship:fleet}}</i>
		<i ng-if="upgrade.costMU" class="card-costMU-icon">{{upgrade|valueOf:'costMU':ship:fleet}}</i>

		<i ng-if="upgrade.attackConstraint" class="card-attackConstraint-icon" title="Must have an Attack Value of {{upgrade|valueOf:'attackConstraint':ship:fleet}}">{{upgrade|valueOf:'attackConstraint':ship:fleet}}</i>
		<i ng-if="upgrade.hullConstraint" class="card-hullConstraint-icon" title="Must Have a Hull Value of {{upgrade|valueOf:'hullConstraint':ship:fleet}}">{{upgrade|valueOf:'hullConstraint':ship:fleet}}</i>
		<i ng-if="upgrade.shieldConstraint" class="card-shieldConstraint-icon" title="Must Have Shield Value of {{upgrade|valueOf:'shieldConstraint':ship:fleet}}">{{upgrade|valueOf:'shieldConstraint':ship:fleet}}</i>
		<i ng-if="upgrade.csConstraint" class="card-csConstraint-icon" title="Must Have a Captain Skill of {{upgrade|valueOf:'csConstraint':ship:fleet}}">{{upgrade|valueOf:'csConstraint':ship:fleet}}</i>
		<i ng-if="upgrade.errata" class="card-errata-icon">{{upgrade|valueOf:'errata':ship:fleet}}</i>
		<i ng-if="upgrade.FrontArc" class="card-FrontArc-icon fs fs-FrontArc" title="Forward Firing Arc"></i>
		<i ng-if="upgrade.RearArc" class="card-RearArc-icon fs fs-RearArc" title="Secondary Firing Arc"></i>
		<i ng-if="upgrade.arc360" class="card-360Arc-icon fs fs-360Arc" title="360-Degree Firing Arc"></i>
		<i ng-if="upgrade.shipLimit" class="card-shipLimit-icon fs fs-shipLimit"></i>
		<i ng-if="upgrade.constitutionLimit" class="card-constitutionLimit-icon fs fs-constitutionLimit" title="Constitution Class"></i>
		<i ng-if="upgrade.akiraLimit" class="card-akiraLimit-icon fs fs-akiraLimit" title="Akira Class"></i>
		<i ng-if="upgrade.droneLimit" class="card-doneLimit-icon fs fs-droneLimit" title="Romulan Drone Ship"></i>
		<i ng-if="upgrade.andorianLimit" class="card-andorianLimit-icon fs fs-andorianLimit" title="Andorian Battle Cruiser"></i>
		<i ng-if="upgrade.attackshipLimit" class="card-attackshipLimit-icon fs fs-attackshipLimit" title="Jem'Hadar Attack Ship"></i>
		<i ng-if="upgrade.battleshipLimit" class="card-battleshipLimit-icon fs fs-battleshipLimit" tittle="Jem'Hadar Battleship"></i>
		<i ng-if="upgrade.dreadnaughtLimit" class="card-dreadnaughtLimit-icon fs fs-dreadnaughtLimit" tittle="Cardassian ATR-4107"></i>
		<i ng-if="upgrade.dauntlessLimit" class="card-dauntlessLimit-icon fs fs-dauntlessLimit" title="Dauntless Class"></i>
		<i ng-if="upgrade.dderidexLimit" class="card-dderidexLimit-icon fs fs-dderidexLimit" title="D'Deridex Class"></i>
		<i ng-if="upgrade.dkyrLimit" class="card-dkyrLimit-icon fs fs-dkyrLimit" title="D'Kyr Class"></i>
		<i ng-if="upgrade.defiantLimit" class="card-defiantLimit-icon fs fs-defiantLimit" title="Defiant Class"></i>
		<i ng-if="upgrade.gornLimit" class="card-gornLimit-icon fs fs-gornLimit" title="Gorn Raider"></i>
		<i ng-if="upgrade.hirogenLimit" class="card-hirogenLimit-icon fs fs-hirogenLimit" title="Hirogen Warship"></i>
		<i ng-if="upgrade.maquisraiderLimit" class="card-maquisraiderLimit-icon fs fs-maquisraiderLimit" title="Maquis Raider"></i>
		<i ng-if="upgrade.prometheusLimit" class="card-prometheusLimit-icon fs fs-prometheusLimit" title="Prometheus Class"></i>
		<i ng-if="upgrade.excelsiorLimit" class="card-excelsiorLimit-icon fs fs-excelsiorLimit" title="Excelsior Class"></i>
		<i ng-if="upgrade.nxLimit" class="card-nxLimit-icon fs fs-nxLimit" title="Federation NX Class"></i>
		<i ng-if="upgrade.deltaflyerLimit" class="card-deltaflyerLimit-icon fs fs-deltaflyerLimit" title="Delta Flyer Class"></i>
		<i ng-if="upgrade.intrepidLimit" class="card-intrepidLimit-icon fs fs-intrepidLimit" title="Intrepid Class"></i>
		<i ng-if="upgrade.novaLimit" class="card-novaLimit-icon fs fs-novaLimit" title="Nova Class"></i>
		<i ng-if="upgrade.aerieLimit" class="card-aerieLimit-icon fs fs-aerieLimit" title="Aerie Class"></i>
		<i ng-if="upgrade.numiriLimit" class="card-numiriLimit-icon fs fs-numiriLimit" title="Numiri Patrol Ship"></i>
		<i ng-if="upgrade.neradaLimit" class="card-neradaLimit-icon fs fs-neradaLimit" title="Nerada-Type"></i>
		<i ng-if="upgrade.sovereignLimit" class="card-sovereignLimit-icon fs fs-sovereignLimit" title="Sovereign Class"></i>
		<i ng-if="upgrade.constitutionkLimit" class="card-constitutionkLimit-icon fs fs-constitutionkLimit" title="Constitution (Kelvin) Class"></i>
		<i ng-if="upgrade.remanLimit" class="card-remanLimit-icon fs fs-remanLimit" title="Reman Warbird"></i>
		<i ng-if="upgrade.kvortLimit" class="card-kvortLimit-icon fs fs-kvortLimit" title="K'Vort Class"></i>
		<i ng-if="upgrade.brelLimit" class="card-brelLimit-icon fs fs-brelLimit" title="B'Rel Class"></i>
		<i ng-if="upgrade.vorchaLimit" class="card-vorchaLimit-icon fs fs-vorchaLimit" title="Vor'cha Class"></i>
		<i ng-if="upgrade.neghvarLimit" class="card-neghvarLimit-icon fs fs-neghvarLimit" title="Negh'Var Class"></i>
		<i ng-if="upgrade.galorLimit" class="card-galorLimit-icon fs fs-galorLimit" title="Cardassian Galor Class"></i>
		<i ng-if="upgrade.keldonLimit" class="card-keldonLimit-icon fs fs-keldonLimit" title="Cardassian Keldon Class"></i>
		<i ng-if="upgrade.suurokLimit" class="card-suurokLimit-icon fs fs-suurokLimit" title="Suurok Class"></i>
		<i ng-if="upgrade.vidiianLimit" class="card-vidiianLimit-icon fs fs-vidiianLimit" title="Vidiian Battle Cruiser"></i>
		<i ng-if="upgrade.warbirdLimit" class="card-warbirdLimit-icon fs fs-warbirdLimit" title="Warbird Class"></i>
		<i ng-if="upgrade.faq" class="card-faq-icon fs fs-faq"></i>
		<i ng-if="upgrade.opBanned" class="card-OP-banned-icon fs fs-opBanned" title="Banned from OP Play"></i>

	</div>

	<div class="card-text">
		<div ng-if="upgrade.range" class="card-weapon-range pull-right">{{upgrade|valueOf:'range':ship:fleet}}</div>
		<div class="card-text-inner font-staw-alt" ng-bind-html="upgrade.text | icons" ng-class="{'card-text-inner-long': upgrade.text.length > 300, 'card-text-inner-super-long': upgrade.text.length > 530, 'text-left': upgrade.range }"></div>
	</div>

	<div class="card-upgrade-cost pull-right"><div ng-repeat="faction in upgrade|valueOf:'factions':ship:fleet" class="card-upgrade-faction card-faction-{{ (upgrade|valueOf:'factions':ship:fleet).length - $index}}"><div class="card-upgrade-faction-black"></div><div class="card-upgrade-faction-icon card-faction-{{faction}}"></div></div><div class="card-upgrade-cost-value" ng-class="{'card-upgrade-cost-free': '{{upgrade|valueOf:'free':ship:fleet}}' }" tooltip-show="ship" tooltip="upgrade|valueOf:'cost':ship:fleet:false:{modifiers:true}">{{upgrade|valueOf:'cost':ship:fleet}}</div></div>

	<div ng-if="upgrade.type == 'captain' || upgrade.type == 'admiral' || (upgrade|valueOf:'skill':ship:fleet)" class="card-skill-container pull-left">
		<div class="card-skill" tooltip-show="ship" tooltip="upgrade|valueOf:'skill':ship:fleet:false:{modifiers:true}" tooltip-position="nw-alt"><span class="card-skill-plus" ng-show="upgrade.isSkillModifier && upgrade.skill >= 0">+</span>{{upgrade|valueOf:'skill':ship:fleet}}</div>
	</div>

	<div ng-if="!(upgrade|valueOf:'skill':ship:fleet) && upgrade.type != 'captain' && upgrade.type != 'admiral' " class="card-upgrade-type pull-left fs fs-{{upgrade.type}}"></div>

	<div class="card-border-bottom">
		<i ng-if="upgrade.talents" ng-repeat="talent in range(upgrade.talents) track by $index" class="fs fs-talent"></i>
		<i ng-repeat="slot in upgrade.upgradeSlots track by $index" ng-if="slot.showOnCard" class="fs fs-{{slot.type[0]}}" ng-class="{'card-upgrades-long': upgrade.upgradeSlots.length > 2}"></i>
	</div>

<i ng-if="upgrade.alliance" class="card-alliance-icon fs fs-alliance">

	<div style="clear: both"></div>

</div>
