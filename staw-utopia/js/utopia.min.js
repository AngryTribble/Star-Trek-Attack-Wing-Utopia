var module;function wrapInterceptors(n,a,t){a=a.type?"["+a.type+"] "+a.name:a,(n instanceof Function||!n.length)&&(n=[n]),$.each(n,function(n,e){e instanceof Function?t.push({fn:e,priority:50,source:a}):e.fn?(e.priority=e.priority||50,e.source=e.source||a,t.push(e)):console.log("Invalid interceptor",e)})}(module=angular.module("utopia-dragdrop",[])).directive("draggable",function(){return{scope:{dragItem:"=",dragStore:"=",dragSource:"="},link:function(n,a){a.prop("draggable",!0),a.on("dragstart",function(t){n.$apply(function(){n.dragStore.item=n.dragItem,n.dragStore.source=n.dragSource}),a.addClass("dragging"),t.originalEvent.dataTransfer.effectAllowed="move",t.originalEvent.dataTransfer.setData("text/plain","google")}),a.on("dragend",function(t){a.removeClass("dragging"),n.$apply(function(n){delete n.dragStore.item,delete n.dragStore.source})}),a.on("click",function(a){return n.$apply(function(){n.dragStore.item!=n.dragItem?(n.dragStore.item=n.dragItem,n.dragStore.source=n.dragSource):delete n.dragStore.item}),a.preventDefault(),!1})}}}),module.directive("droppable",function(){return{scope:{drop:"&",canDrop:"&",dragStore:"="},link:function(n,a){a.on("dragover",function(t){n.canDrop({$item:n.dragStore.item})&&(a.addClass("drag-over"),t.preventDefault())}),a.on("dragenter",function(t){n.canDrop({$item:n.dragStore.item})&&a.addClass("drag-over")}),a.on("dragleave",function(n){a.removeClass("drag-over")}),a.on("drop",function(t){a.removeClass("drag-over"),n.$apply(function(n){n.drop({$item:n.dragStore.item}),delete n.dragStore.item}),t.preventDefault()}),a.on("click",function(a){n.$apply(function(){n.dragStore.item&&(n.drop({$item:n.dragStore.item}),delete n.dragStore.item)}),a.preventDefault()})}}}),(module=angular.module("utopia-fleet-builder",["utopia-card-upgrade","utopia-dragdrop"])).directive("fleetBuilder",["$filter",function(n){return{scope:{fleet:"=",cards:"=",searchOptions:"=",dragStore:"="},templateUrl:"fleet-builder.html",controller:["$scope","isMobile",function(a,t){a.isMobile=t,a.$watch("fleet",function(n){location.hash=btoa(angular.toJson(a.saveFleet(n)))},!0),a.$on("removeFromFleet",function(n,t){a.removeFromFleet(t,a.fleet)}),a.$on("zoom",function(n,t){a.zoom=t}),a.setSearchTypes=function(n){$.each(a.searchOptions.types,function(a,t){t.search=0<=$.inArray(a,n)}),a.searchOptions.columns<1&&(a.searchOptions.columns=1)},a.addFleetShip=function(n,t){var c=a.findOtherInFleet(t,n);return e(t,"canJoinFleet",t,n)?c&&c!=t?(console.log("upgrade uniquenes check failed"),!1):(c&&a.removeFromFleet(c,n),t=angular.copy(t),n.ships.push(t),t):(console.log("joinFleet stopped by interceptor"),!1)},a.getUpgradeSlots=n("upgradeSlots"),a.isUpgradeCompatible=function(n,a,t,c){if(n==a.occupant)return!1;var r=e(a,"type",t,c);return"question"==n.type?n.isSlotCompatible&&n.isSlotCompatible(r):0<=$.inArray(n.type,r)};var e=n("valueOf");function c(n,a){return!!(a&&n.unique&&a.unique&&n.name==a.name&&n.mirror==a.mirror)&&a}function r(n){if(!n)return{};var a={id:n.type+":"+n.id};n.resource&&(a.resource=r(n.resource)),n.captain&&(a.captain=r(n.captain)),n.admiral&&(a.admiral=r(n.admiral)),n.ambassador&&(a.ambassador=r(n.ambassador));var t=[];$.each(n.upgrades||[],function(n,a){var e={};a.occupant&&(e=r(a.occupant)),t.push(e)}),0<t.length&&(a.upgrades=t);var e=[];return $.each(n.upgradeSlots||[],function(n,a){var t={};a.occupant&&(t=r(a.occupant)),e.push(t)}),0<e.length&&(a.upgradeSlots=e),a}function o(n,t,e,c){var r=angular.copy(a.findCardById(t,e.id));return r?{card:r,promulgate:function(r){var s;if(e.resource&&(s=o(n,t,e.resource,r))){var u=a.setShipResource(n,r,s.card);u&&s.promulgate(u)}if(e.captain&&(s=o(n,t,e.captain,r))){var l=a.setShipCaptain(n,r,s.card);l&&s.promulgate(l)}if(e.admiral&&(s=o(n,t,e.admiral,r))){var p=a.setShipAdmiral(n,r,s.card);p&&s.promulgate(p)}if(e.ambassador&&(s=o(n,t,e.ambassador,r))){var f=a.setShipAmbassador(n,r,s.card);f&&s.promulgate(f)}$.each(e.upgrades||[],function(e,c){if(c&&c.id){var s=o(n,t,c,r);if(s){var u=a.setUpgrade(n,r,r.upgrades[e],s.card);u&&s.promulgate(u)}}}),$.each(e.upgradeSlots||[],function(e,s){if(s&&s.id){var u=o(n,t,s,c||r);if(u){var l=a.setUpgrade(n,c||r,r.upgradeSlots[e],u.card);l&&u.promulgate(l)}}})}}:(console.log("unable to load card",e.id),!1)}a.setUpgrade=function(n,t,c,r){if(!a.isUpgradeCompatible(r,c,t,n))return console.log("wrong slot type"),!1;if(c.occupant==r)return!1;if(!e(r,"canEquip",t,n,c))return console.log("equip stopped by special card rule"),!1;if(!e(r,"canEquipFaction",t,n,c))return console.log("equip stopped by faction-specific special card rule"),!1;if(c.canEquip&&!c.canEquip(r,t,n,c))return console.log("upgrade rejected by slot"),!1;var o=a.findOtherInFleet(r,n);return o&&o!=r&&o!=c.occupant?(console.log("upgrade uniquenes check failed"),!1):(o&&o!=c.occupant&&a.removeFromFleet(o,n,c.occupant),c.occupant=angular.copy(r),e(c.occupant,"onEquip",t,n),c.occupant)},a.setShipResource=function(n,t,c){if(!n.resource||c.type!=n.resource.slotType)return!1;if(!e(c,"canEquip",t,n))return console.log("equip stopped by special card rule"),!1;var r=a.findOtherInFleet(c,n);return r&&r!=upgrade&&r!=t.resource?(console.log("upgrade uniquenes check failed"),!1):(t.resource=angular.copy(c),t.resource)},a.setShipCaptain=function(n,t,c){if("captain"!=c.type)return console.log("card is not a captain"),!1;if(!e(c,"canEquipCaptain",t,n))return console.log("equip stopped by interceptor"),!1;var r=a.findOtherInFleet(c,n);return r&&r!=c&&r!=t.captain?(console.log("captain already in fleet"),!1):(r&&r!=t.captain&&a.removeFromFleet(r,n,t.captain),t.captain=angular.copy(c),t.captain)},a.fleetHasAdmiral=function(n){var a=!1;return $.each(n.ships,function(n,t){if(t.admiral)return a=!0,!1}),a},a.fleetHasAmbassador=function(n){var a=!1;return $.each(n.ships,function(n,t){if(t.ambassador)return a=!0,!1}),a},a.setShipAdmiral=function(n,t,c){if("admiral"!=c.type)return!1;if(!e(c,"canEquipAdmiral",t,n))return console.log("equip stopped by interceptor"),!1;var r=a.findOtherInFleet(c,n);return r&&r!=c&&r!=t.admiral?(console.log("admiral already in fleet"),!1):(r&&r!=t.admiral&&a.removeFromFleet(r,n,t.admiral),t.admiral=angular.copy(c),t.admiral)},a.setShipAmbassador=function(n,t,c){if("ambassador"!=c.type)return!1;if(!e(c,"canEquipAmbassador",t,n))return console.log("equip stopped by interceptor"),!1;var r=a.findOtherInFleet(c,n);return r&&r!=c&&r!=t.ambassador?(console.log("ambassador already in fleet"),!1):(r&&r!=t.ambassador&&a.removeFromFleet(r,n,t.ambassador),t.ambassador=angular.copy(c),t.ambassador)},a.findOtherInFleet=function(n,t){var e=!1;return $.each(t.ships,function(t,r){return n==r||c(n,r)?(e=r,!1):n==r.captain||c(n,r.captain)?(e=r.captain,!1):n==r.admiral||c(n,r.admiral)?(e=r.admiral,!1):n==r.ambassador||c(n,r.ambassador)?(e=r.ambassador,!1):($.each(a.getUpgradeSlots(r),function(a,t){if(n==t.occupant||c(n,t.occupant))return e=t.occupant,!1}),!e&&void 0)}),t.resource&&$.each(t.resource.upgradeSlots||[],function(a,t){if(n==t.occupant||c(n,t.occupant))return e=t.occupant,!1}),e},a.removeFromFleet=function(n,t,c){if(!n)return!1;n==t.resource&&delete t.resource,t.resource&&$.each(t.resource.upgradeSlots||[],function(t,e){if(n==e.occupant)return c&&a.isUpgradeCompatible(c,e)?e.occupant=c:delete e.occupant,found=!0,!1}),$.each(t.ships,function(e,r){if(n==r)return c&&"ship"==c.type?t.ships[e]=c:t.ships.splice(e,1),!1;if(n==r.resource)return delete r.resource,!1;if(n==r.captain)return c&&"captain"==c.type?r.captain=c:delete r.captain,!1;if(n==r.admiral)return c&&"admiral"==c.type?r.admiral=c:delete r.admiral,!1;if(n==r.ambassador)return c&&"ambassador"==c.type?r.ambassador=c:delete r.ambassador,!1;var o=!1;return $.each(a.getUpgradeSlots(r),function(t,e){if(n==e.occupant)return c&&a.isUpgradeCompatible(c,e)?e.occupant=c:delete e.occupant,o=!0,!1}),!o}),e(n,"onRemove",{},t)},a.getTotalCost=function(t,e){var c=n("valueOf"),r=c(t,"cost",t,e);return t.resource&&(c(t.resource,"free",t,e)||(r+=c(t.resource,"cost",t,e))),t.captain&&(c(t.captain,"free",t,e)||(r+=c(t.captain,"cost",t,e))),t.admiral&&(c(t.admiral,"free",t,e)||(r+=c(t.admiral,"cost",t,e))),t.ambassador&&(c(t.ambassador,"free",t,e)||(r+=c(t.ambassador,"cost",t,e))),$.each(a.getUpgradeSlots(t),function(n,a){a.occupant&&(c(a.occupant,"free",t,e)||(r+=c(a.occupant,"cost",t,e)))}),t.totalCost=r},a.getFleetCost=function(n){var t=n.resource?e(n.resource,"cost",{},n):0;return $.each(n.ships,function(e,c){t+=a.getTotalCost(c,n)}),n.totalCost=t},a.setFleetResource=function(n,t){n.resource&&a.removeFromFleet(n.resource,n),n.resource=t},a.saveFleet=function(n){var a={ships:[]};return n.resource&&(a.resource=r(n.resource)),$.each(n.ships,function(n,t){a.ships.push(r(t))}),a},a.findCardById=function(n,a){var t=!1;return $.each(n,function(n,e){if(e.type+":"+e.id==a)return t=e,!1}),t};var s=(a.loadFleet=function(n,t){var e={ships:[]};return t.resource&&(result=o(e,n,t.resource))&&(e.resource=result.card,result.promulgate(e.resource)),$.each(t.ships,function(t,c){var r=o(e,n,c);if(r){var s=a.addFleetShip(e,r.card);s&&r.promulgate(s)}}),e},!1);try{s=!!location.hash&&angular.fromJson(atob(location.hash.substring(1)))}catch(u){}a.$on("cardsLoaded",function(){s&&(s=a.loadFleet(a.cards,s))&&(a.fleet=s,0<a.fleet.ships.length&&($.each(s.ships,function(n,a){a.hideEmptySlots=!0}),a.searchOptions.columns=0))})}]}}]),(module=angular.module("utopia-fleet-export",[])).directive("fleetExport",function(){return{scope:{fleet:"=",sets:"=",searchOptions:"="},templateUrl:"fleet-export.html",link:function(n,a){$(a).find("textarea").focus(function(){($this=$(this)).select(),window.setTimeout(function(){$this.select()},1),$this.mouseup(function(){return $this.unbind("mouseup"),!1})})},controller:["$scope","$filter",function(n,a){n.fleetText="",n.showSetNames=!1,n.ttsExportStyle=!1;var t=a("valueOf");function e(a){if("fleetSheet"==n.exportType){o={cost:(e=a).totalCost,ships:[],resource:{}},$.each(e.ships,function(n,a){var c=[];(function n(a,e,c,r){var o,s,u,l,p={name:a.name,type:{ship:"Ship",captain:"Captain",admiral:"A",ambassador:"M",crew:"C",talent:"E",tech:"T",weapon:"W",borg:"B",squadron:"S"}[l=a.type],faction:(o=a.factions,s={federation:"FED",klingon:"KLI",romulan:"ROM",dominion:"DOM",borg:"BOR","species-8472":"SPE",kazon:"KAZ",xindi:"XIN",bajoran:"BAJ",ferengi:"FER",vulcan:"VUL",independent:"IND","mirror-universe":"MIR","q-continuum":"Q"},u=[],$.each(o,function(n,a){a in s?u.push(s[a]):console.error("Unknown Faction: "+a)}),u.join("/")),cost:t(a,"cost",e,c),priority:0};switch("ship"!=a.type||a.unique||(p.name="Generic "+a.class),p.type){case"Ship":p.priority=0;break;case"Captain":p.priority=1;break;case"Admiral":p.priority=2;break;case"Ambassador":p.priority=3;break;default:p.priority=4}r.push(p),a.resource&&r.push(n(a.resource,e,c,r)),a.captain&&r.push(n(a.captain,e,c,r)),a.admiral&&r.push(n(a.admiral,e,c,r)),a.ambassador&&r.push(n(a.ambassador,e,c,r)),a.upgrades&&0<a.upgrades.length&&$.each(a.upgrades,function(a,t){t.occupant&&r.push(n(t.occupant,e,c,r))}),a.upgradeSlots&&0<a.upgradeSlots.length&&$.each(a.upgradeSlots||[],function(a,t){t.occupant&&r.push(n(t.occupant,e,c,r))})})(a,a,e,c),(c=$.grep(c,function(n){return 0==n||n})).sort(function(n,a){return n.priority-a.priority}),$.each(c,function(n,a){delete a.priority,a.index=n}),o.ships.push({cards:c.slice(),cost:a.totalCost})}),e.resource&&(o.resource.name=e.resource.name,o.resource.cost=t(e.resource,"cost",{},e)),o.ships.sort(function(n,a){return a.cost-n.cost}),n.fleetText=JSON.stringify(o,null,2)}else if("tts"==n.exportType){s=a,u="",$.each(s.ships,function(n,a){u+=r(a,a,s).text+"\n"}),s.resource&&(u+=r(s.resource,{},s).text+"\n"),u+="\n\n------------------------------------------\n",u+="Generated by Utopia Tabletop Simulator",n.fleetText=u}else{var e,o,s,u,l="",p=0;if(l+="Save your URL for easy Reloading\n\n",$.each(a.ships,function(n,t){var e=c(t,t,a);l+=e.text+"Ship Total: "+e.cost+" SP\n\n",p+=e.cost}),a.resource){var f=c(a.resource,{},a);l+="Resource: "+f.text+"\n",p+=f.cost}l+="Fleet Total: "+p+" SP\n\n",l+="Generated by Utopia http://angrytribble.github.io/Star-Trek-Attack-Wing-Utopia/staw-utopia",n.fleetText=l}}function c(a,e,r,o,s){var u="";o=o||0;for(var l=0;l<o;l++)u+="- ";var p,f,h=t(a,"cost",e,r),d=t(a,"free",e,r),F=!0;if("resource"==a.type&&(F=!1),u+=a.name,"captain"==a.type&&(u+=" "+a.skill+" (Captain)"),"admiral"==a.type&&(u+=" (Admiral)"),"ambassador"==a.type&&(u+=" (Ambassador)"),"fleet-captain"==a.type&&(u+=" Fleet Captain"),"flagship"==a.type&&(u+=" Flagship"),"faction"==a.type&&(u+=" Faction"),"ship"==a.type?u+=a.unique?"":" ("+a.class+")":n.showSetNames&&(u+=a.set?" ("+(p=a.set,f="",$.each(p,function(a,t){f+=n.sets[t]?n.sets[t].name:t,a<p.length-1&&(f+=", ")}),f)+")":""),d&&(h=0),s||(u+=" ["+h+"]"),u+="\n",a.resource){var g=c(a.resource,e,r,o+1);u+=g.text,h+=g.cost}return a.captain&&(u+=(g=c(a.captain,e,r,o+1)).text,h+=g.cost),a.admiral&&(u+=(g=c(a.admiral,e,r,o+1)).text,h+=g.cost),a.ambassador&&(u+=(g=c(a.ambassador,e,r,o+1)).text,h+=g.cost),$.each(a.upgrades||[],function(n,a){if(a.occupant){var t=c(a.occupant,e,r,o+1);u+=t.text,F&&(h+=t.cost)}}),$.each(a.upgradeSlots||[],function(n,a){if(a.occupant){var t=c(a.occupant,e,r,o+1,!F);u+=t.text,F&&(h+=t.cost)}}),{cost:h,text:u}}function r(n,a,t){var e="";if(e=("ship"!=n.type||n.unique,n.id),e+="\n",n.resource){var c=r(n.resource,a,t);e+=c.text}return n.captain&&(e+=(c=r(n.captain,a,t)).text),n.admiral&&(e+=(c=r(n.admiral,a,t)).text),n.ambassador&&(e+=(c=r(n.ambassador,a,t)).text),$.each(n.upgrades||[],function(n,c){c.occupant&&(e+=r(c.occupant,a,t).text)}),$.each(n.upgradeSlots||[],function(n,c){c.occupant&&(e+=r(c.occupant,a,t).text)}),{cost:0,text:e}}n.$watch("fleet",function(n){e(n)},!0),n.$watch("showSetNames",function(){e(n.fleet)}),n.$watch("exportType",function(){e(n.fleet)})}]}}),(module=angular.module("utopia-missions",["utopia"])).controller("UtopiaSetCtrl",["$scope","cardLoader",function(n,a){n.missionSets={},n.missionList=[],n.viewer={},n.activeSet=!1,n.setCards=[],a(n.missionSets,function(){location.hash&&location.hash.substring(1),$.each(Object.keys(n.missionSets),function(a,t){var e=n.missionSets[t];e.sourceID!=t&&e.name!=t||(n.viewer.missionSets=e,n.missionList.push(e))}),n.$watch("viewer.missionSets",function(a){n.missionSetCards=[],a&&(location.hash=a.sourceID,$.each(n.cards,function(t,e){0<=$.inArray(a.sourceID,e.missionSet)&&n.setCards.push(e)}),n.setCards.sort(displaySort))})})}]),(module=angular.module("utopia-search",["utopia-card","utopia-dragdrop","utopia-card-loader","utopia-card-rules"])).filter("cardFilter",["$factions","$filter",function(n,a){return function(t,e){var c=a("valueOf");return $.map(t,function(a){if(e.unique&&!a.unique&&!e.generic||e.generic&&a.unique&&!e.unique)return null;if(a.set&&!e.ignoreSetsFilter&&e.sets){var t=!1;if($.each(a.set,function(n,a){e.sets[a].search&&(t=!0)}),!t)return null}if(e.filterField&&e.filterOperator&&e.filterValue){var r=c(a,e.filterField);if(!r)return null;switch(e.filterOperator){case"<":if(r>=e.filterValue)return null;break;case"<=":if(r>e.filterValue)return null;break;case"=":if(r!=e.filterValue)return null;break;case">=":if(r<e.filterValue)return null;break;case">":if(r<=e.filterValue)return null}}if(e.query&&0>a.name.toLowerCase().indexOf(e.query.toLowerCase())&&(!a.class||0>a.class.toLowerCase().indexOf(e.query.toLowerCase()))&&0>a.text.toLowerCase().indexOf(e.query.toLowerCase()))return null;var o=!0;if($.each(e.types,function(n,a){if(a.search)return o=!1}),!o&&!e.types[a.type].search)return null;if(e.maneuverType){if("ship"!=a.type)return null;var s=!1,u=[];if($.each(Object.keys(a.classData.maneuvers),function(n,t){if($.isNumeric(t)){var e=Object.keys(a.classData.maneuvers[t]);$.each(e,function(n,e){(maneuver_object={}).direction=e,maneuver_object.difficulty=a.classData.maneuvers[t][e],maneuver_object.speed=parseInt(t,10),maneuver_object.speed<0&&(maneuver_object.direction="reverse",maneuver_object.speed=Math.abs(maneuver_object.speed)),u.push(maneuver_object)})}}),$.each(u,function(n,a){e.maneuverDifficulty?a.direction==e.maneuverType&&a.difficulty==e.maneuverDifficulty&&(s=!0):a.direction==e.maneuverType&&(s=!0)}),!s)return null}if("resource"==a.type)return a;o=!0;var l=!1;return $.each(e.factions,function(t,e){e.search&&(o=!1,l|=n.hasFaction(a,t))}),o||l?a:null})}}]),module.filter("sortBy",["$filter",function(n){return function(a,t,e){return e=!0===e||"true"==e,n("orderBy")(a,function(a){return n("valueOf")(a,t)||0},!e)}}]),module.directive("search",function(){return{scope:{cards:"=",sets:"=",setList:"=",dragStore:"=",search:"=searchOptions",defaults:"="},templateUrl:"search.html",controller:["$scope","$factions",function(n,a){n.search={query:"",unique:!1,generic:!1,factions:{},types:{ship:{},captain:{},admiral:{}},columns:1,sortBy:"cost",ascending:"false",maneuverType:"",maneuverDifficulty:"",filterField:"",filterOperator:"<=",filterValue:""},n.defaults=localStorage.defaults?angular.fromJson(localStorage.defaults):{},n.defaults.search?angular.copy(n.defaults.search,n.search):n.defaults.search=angular.copy(n.search),n.resetSearch=function(){n.search.query="",n.search.unique=!1,n.search.generic=!1,$.each(n.search.factions,function(n,a){a.search=!1}),$.each(n.search.types,function(n,a){a.search=!1}),n.search.sortBy=n.defaults.search.sortBy||"name",n.search.ascending=n.defaults.search.ascending||"true",n.search.maneuverType="",n.search.maneuverDifficulty="",n.search.filterField="",n.search.filterOperator="<=",n.search.filterValue=""},n.modifySearchColumns=function(a){n.search.columns+=a,n.search.columns<0&&(n.search.columns=0),5<n.search.columns&&(n.search.columns=5)},n.$watch("search",function(){n.resultLimit=10},!0),n.$watch("search.sets",function(n){n&&(localStorage.sets=angular.toJson(n))},!0),n.$watch("defaults",function(n){n&&(localStorage.defaults=angular.toJson(n))},!0),$.each(a.list,function(a,t){n.search.factions[t.toLowerCase().replace(/ /g,"-")]={}}),n.sortables=[{value:"name",name:"Name"},{value:"cost",name:"Cost"},{value:"attack",name:"Attack"},{value:"agility",name:"Agility"},{value:"hull",name:"Hull"},{value:"shields",name:"Shields"},{value:"skill",name:"Skill Value"}],n.maneuvers=[{value:"bank",name:"Bank"},{value:"turn",name:"Turn"},{value:"about",name:"Come About"},{value:"reverse",name:"Full Astern"},{value:"spin",name:"Spin"},{value:"stop",name:"Stop"},{value:"flank",name:"Flank"},{value:"45-degree-rotate",name:"Rotate 45 Degrees"},{value:"90-degree-rotate",name:"Rotate 90 Degrees"}],n.difficulty_list=[{value:"green",name:"Green"},{value:"white",name:"White"},{value:"red",name:"Red"}],n.$on("cardsLoaded",function(){$.each(n.cards,function(a,t){n.search.types[t.type]||(n.search.types[t.type]={})});try{n.search.sets=localStorage.sets?angular.fromJson(localStorage.sets):{},n.defaults=localStorage.defaults?angular.fromJson(localStorage.defaults):{}}catch(a){n.search.sets={},n.defaults={}}$.each(n.sets,function(a,t){n.search.sets[t.id]||(console.log("New set: "+t.name),n.search.sets[t.id]={search:!0}),n.setList.push(t)})}),n.uncheckAllSets=function(){$.each(n.search.sets,function(n,a){a.search=!1})},n.exportSets=function(){var a="utopia_owned_sets.json",t=encodeURIComponent(JSON.stringify(n.search.sets,null,2)),e=document.createElement("a");console.log("Exporting owned sets to the file "+a),e.setAttribute("href","data:application/json;charset=utf-8,"+t),e.setAttribute("download",a),e.style.display="none",document.body.appendChild(e),e.click(),document.body.removeChild(e)},n.importSets=function(a){var t=a.files[0],e=new FileReader,c="";e.onload=function(a){c=a.target.result,n.processSetsImport(c)},console.info("Opening "+t.name+" saved set file..."),e.readAsText(t)},n.processSetsImport=function(n){var a=JSON.parse(n),t=0;$.each(a,function(n,a){"search"in a==0&&t++}),0<t?console.error("Owned set file import failed with "+t+" errors found in file."):(localStorage.sets=angular.toJson(a),window.location.reload(!0))},n.checkAllSets=function(){$.each(n.search.sets,function(n,a){a.search=!0})}}]}}),module.directive("searchFilterGroup",function(){return{scope:{title:"@"},templateUrl:"search-filter-group.html",transclude:!0,link:function(n,a,t){null!=t.open&&(n.showContent=!0)}}}),(module=angular.module("utopia-set-viewer",["utopia"])).controller("UtopiaSetCtrl",["$scope","$filter","cardLoader","$factions",function(n,a,t,e){function c(n,a){var t,e;return"ship"==n.type&&n.unique?-1:"ship"==a.type&&a.unique?1:n.type==a.type?(e=a,(t=n).cost>e.cost?-1:e.cost>t.cost?1:0):"ship"==n.type?-1:"ship"==a.type?1:"captain"==n.type?-1:"captain"==a.type?1:"admiral"==n.type?-1:"admiral"==a.type?1:"talent"==n.type?-1:"talent"==a.type?1:"weapon"==n.type?-1:"weapon"==a.type?1:"tech"==n.type?-1:"tech"==a.type?1:"crew"==n.type?-1:"crew"==a.type?1:0}n.cards=[],n.sets={},n.setList=[],n.shipClasses={},n.token={},n.viewer={},n.activeSet=!1,n.setCards=[],t(n.cards,n.sets,n.shipClasses,n.token,function(){var a=!!location.hash&&location.hash.substring(1);$.each(Object.keys(n.sets),function(t,e){var c=n.sets[e];c.id!=a&&c.name!=a||(n.viewer.set=c),n.setList.push(c)})}),n.$watch("viewer.set",function(a){n.setCards=[],a&&(location.hash=a.id,$.each(n.cards,function(t,e){0<=$.inArray(a.id,e.set)&&n.setCards.push(e)}),n.setCards.sort(c))})}]),(module=angular.module("utopia-tooltip",[])).directive("tooltip",["$filter",function(n){return{scope:{tooltip:"&",tooltipPosition:"@",tooltipShow:"="},restrict:"A",link:function(a,t,e){var c=!1;a.$watch("tooltipShow",function(e){if(e&&!c){c=!0,$(t).data("powertipjq",$("<div></div>")),$(t).powerTip({placement:a.tooltipPosition||"ne-alt"});var r=n("icons");$(t).on("powerTipRender",function(){var n=$("<table class='card-tooltip'></table>");$.each(a.tooltip(),function(a,t){n.append("<tr><td>"+r(t.source)+"</td><td>"+(0<t.value&&0<a?"+":"")+t.value+"</tr>")}),$("#powerTip").html(n)}),a.$on("$destroy",function(){$(t).powerTip("destroy")})}})}}}]),(module=angular.module("utopia",["ngSanitize","utopia-search","utopia-card","utopia-fleet-builder","utopia-fleet-export","utopia-card-loader","utopia-card-rules"])).factory("isMobile",function(){var n=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(n)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(n.substr(0,4))}),module.controller("UtopiaCtrl",["$scope","$filter","cardLoader","$factions",function(n,a,t,e){n.defaults={};try{n.defaults=!!localStorage.defaults&&angular.fromJson(localStorage.defaults)}catch(c){n.defaults={}}n.drag={},n.cards=[],n.sets={},n.setList=[],n.shipClasses={},n.token={},n.activeFleet={ships:[]},n.loading=!0,t(n.cards,n.sets,n.shipClasses,n.token,function(){n.$broadcast("cardsLoaded"),n.loading=!1}),n.$watch("defaults",function(n){n&&(localStorage.defaults=angular.toJson(n))},!0),n.$on("removeFromFleetDropped",function(a,t){n.$broadcast("removeFromFleet",t)}),n.keypress=function(a){(26==a.which||122==a.which&&a.ctrlKey)&&(n.zoom=!n.zoom,n.$broadcast("zoom",n.zoom))}}]),(module=angular.module("utopia-card-faction",[])).directive("cardFaction",function(){return{scope:{faction:"=",dragStore:"=",dragSource:"="},templateUrl:"card-faction.html",controller:["$scope",function(n){}]}}),(module=angular.module("utopia-card-loader",["utopia-card-rules","utopia-card-ship","utopia-card-upgrade","utopia-card-resource","utopia-card-faction","utopia-card-token"])).factory("cardLoader",["$http","$filter","cardRules","$factions",function(n,a,t,e){var c=a("valueOf");return function(r,o,s,u,l){function p(n,a){var t=!1;return $.each(a,function(a,e){if(n.id==e.id&&n.type==e.type)return t=!0,!1}),t}var f={canJoinFleet:!0,intercept:{ship:{},fleet:{}}},h={intercept:{ship:{},fleet:{}},canEquip:!0,canEquipCaptain:!0,canEquipFaction:!0,showType:!0},d={intercept:{ship:{},fleet:{}},canEquip:!0,canEquipAdmiral:!0,canEquipFaction:!0,isSkillModifier:!0,showType:!0},F={intercept:{ship:{},fleet:{}},canEquip:!0,canEquipAmbassador:!0,canEquipFaction:!0,isSkillModifier:!0,showType:!0},g={intercept:{ship:{},fleet:{}},canEquip:!0,canEquipFaction:!0},_={intercept:{ship:{},fleet:{}},canEquip:!0,canEquipFaction:!0};n.get("data/data.json").success(function(n){var y,v=[];$.each(n.sets||[],function(n,a){var t;"copy"==a.type?v.push(a):o[(t=a).id]?console.log("Duplicate set",t.id,t.name):o[t.id]=t}),$.each(n.ships||[],function(n,a){"copy"==a.type?v.push(a):function(n){if(p(n,r))console.log("Duplicate card definition ignored",n.id);else{n.mirror=e.hasFaction(n,"mirror-universe");for(var a=0;a<n.upgrades.length;a++)"string"==typeof n.upgrades[a]&&(n.upgrades[a]={type:[n.upgrades[a]],source:"ship"});$.extend(!0,n,f),n.squadron&&(n.canJoinFleet=function(n,a,t){var e=0,c=0;return $.each(t.ships,function(n,a){a.squadron?c++:4<=a.hull&&e++}),c<e}),t[n.type+":"+n.id]&&$.extend(!0,n,t[n.type+":"+n.id]),$.each(n.upgradeSlots||[],function(a,t){t.source||(t.source=n.name)}),n.intercept.ship.cost?n.intercept.ship.cost=[n.intercept.ship.cost]:n.intercept.ship.cost=[],n.intercept.ship.cost.push({source:"Faction Penalty",priority:1,fn:function(n,a,t,r){if(e.match(n,a,a,t))return r;var o=c(n,"factionPenalty",a,t);return(r instanceof Function?r(n,a,t,0):r)+o}}),r.push(n)}}(a)}),$.each(n.shipClasses||[],function(n,a){var t;"copy"==a.type?v.push(a):s[(t=a).id]?console.log("Duplicate ship class",t.id,t.name,s[t.id].name):s[t.id]=t}),$.each(n.captains||[],function(n,a){"copy"==a.type?v.push(a):function(n){if(p(n,r))console.log("Duplicate card definition ignored",n.id);else{$.extend(!0,n,h),null==n.factionPenalty&&(n.factionPenalty=1),n.mirror=e.hasFaction(n,"mirror-universe"),n.upgradeSlots=[];for(var a=0;a<n.talents;a++)n.upgradeSlots.push({type:["talent"],source:n.name});t[n.type+":"+n.id]&&$.extend(!0,n,t[n.type+":"+n.id]),$.each(n.upgradeSlots||[],function(a,t){t.source||(t.source=n.name)}),r.push(n)}}(a)}),$.each(n.admirals||[],function(n,a){"copy"==a.type?v.push(a):function(n){if(p(n,r))console.log("Duplicate card definition ignored",n.id);else{$.extend(!0,n,d),null==n.factionPenalty&&(n.factionPenalty=3),n.mirror=e.hasFaction(n,"mirror-universe"),n.upgradeSlots=[];for(var a=0;a<n.talents;a++)n.upgradeSlots.push({type:["talent"],source:n.name});n.intercept.ship.skill=function(a,t,e,c){return a==t.captain&&(c=(c instanceof Function?c(a,t,e,0):c)+n.skill),c},t[n.type+":"+n.id]&&$.extend(!0,n,t[n.type+":"+n.id]),$.each(n.upgradeSlots||[],function(a,t){t.source||(t.source=n.name)}),r.push(n)}}(a)}),$.each(n.ambassadors||[],function(n,a){var c;"copy"==a.type?v.push(a):p(c=a,r)?console.log("Duplicate card definition ignored",c.id):($.extend(!0,c,F),null==c.factionPenalty&&(c.factionPenalty=0),c.mirror=e.hasFaction(c,"mirror-universe"),t[c.type+":"+c.id]&&$.extend(!0,c,t[c.type+":"+c.id]),$.each(c.upgradeSlots||[],function(n,a){a.source||(a.source=c.name)}),r.push(c))}),$.each(n.upgrades||[],function(n,a){var c;"copy"==a.type?v.push(a):p(c=a,r)?console.log("Duplicate card definition ignored",c.id):($.extend(!0,c,g),null==c.factionPenalty&&(c.factionPenalty=1),c.mirror=e.hasFaction(c,"mirror-universe"),t[c.type+":"+c.id]&&$.extend(!0,c,t[c.type+":"+c.id]),$.each(c.upgradeSlots||[],function(n,a){a.source||(a.source=c.name)}),r.push(c))}),$.each(n.resources||[],function(n,a){var e;"copy"==a.type?v.push(a):(e=a,$.extend(!0,e,_),t[e.type+":"+e.id]&&$.extend(!0,e,t[e.type+":"+e.id]),r.push(e))}),$.each(n.others||[],function(n,e){"copy"==e.type?v.push(e):function(n){if("fleet-captain"==n.type){for(var e=0;e<n.talentAdd;e++)n.upgradeSlots.push({type:["talent"],source:"Fleet Captain",rules:"Free talent if Captain has an empty talent slot",showOnCard:!0,intercept:{ship:{cost:{priority:-1,fn:function(n,t,e,c){if(!t.captain)return c;var r=a("upgradeSlots")(t.captain),o=!1;return $.each(r,function(n,a){0<=a.type.indexOf("talent")&&!a.occupant&&(o=!0)}),o?0:c}}}}});for(e=0;e<n.techAdd;e++)n.upgradeSlots.push({type:["tech"],source:"Fleet Captain",showOnCard:!0});for(e=0;e<n.weaponAdd;e++)n.upgradeSlots.push({type:["weapon"],source:"Fleet Captain",showOnCard:!0});for(e=0;e<n.crewAdd;e++)n.upgradeSlots.push({type:["crew"],source:"Fleet Captain",showOnCard:!0});n.intercept.ship.skill=function(a,t,e,c){return a==t.captain&&(c=(c instanceof Function?c(a,t,e,0):c)+n.skill),c}}if("flagship"==n.type){var c=n;c.intercept.ship={attack:function(n,a,t,e){return n==a&&"flagship"!=a.type?(e instanceof Function?e(n,a,t,0):e)+c.attack:e},agility:function(n,a,t,e){return n==a&&"flagship"!=a.type?(e instanceof Function?e(n,a,t,0):e)+c.agility:e},hull:function(n,a,t,e){return n==a&&"flagship"!=a.type?(e instanceof Function?e(n,a,t,0):e)+c.hull:e},shields:function(n,a,t,e){return n==a&&"flagship"!=a.type?(e instanceof Function?e(n,a,t,0):e)+c.shields:e}}}if("token"==n.type){if(u[n.id])return console.log("Duplicate token",n.id,n.name);u[n.id]=n}t[n.type+":"+n.id]&&$.extend(!0,n,t[n.type+":"+n.id]),r.push(n)}(e)}),y=v,$.each(y||[],function(n,a){$.each(r,function(n,t){if(t.id==a.of)return t.set=t.set.concat(a.set),!1})}),$.each(r,function(n,a){"ship"==a.type&&(a.classId&&s[a.classId]?a.classData=s[a.classId]:$.each(s,function(n,t){if(t.name==a.class)return a.classId=n,a.classData=t,!1}),a.classId&&a.classData&&s[a.classId]||console.log("No class for ship",a.id,a.name,a.class,a.classId)),a.hasTokenInfo&&u[a.tokenId]&&(a.tokenData=u[a.tokenId])}),l&&l()})}}]),(module=angular.module("utopia-card-resource",[])).directive("cardResource",function(){return{scope:{resource:"=",ship:"=",fleet:"=",dragStore:"=",dragSource:"="},templateUrl:"card-resource.html",controller:["$scope",function(n){}]}}),(module=angular.module("utopia-card-rules",["utopia-valueof"])).filter("shipCardNamed",["$filter",function(n){var a=n("upgradeSlots");return function(n,t){if(n.name==t)return n;if(n.captain&&n.captain.name==t)return n.captain;var e=!1;return $.each(a(n),function(n,a){if(a.occupant&&a.occupant.name==t)return e=a.occupant,!1}),e}}]),module.filter("fleetCardNamed",["$filter",function(n){var a=n("shipCardNamed");return function(n,t){if(!n)return!1;var e=!1;return $.each(n.ships,function(n,c){if(e=a(c,t))return!1}),e}}]),module.factory("$factions",["$filter",function(n){var a=n("valueOf"),t={hasFaction:function(n,t,e,c){return!!n&&0<=$.inArray(t,a(n,"factions",e,c))},match:function(n,t,e,c){var r=!1;return $.each(a(n,"factions",e,c),function(n,o){if($.each(a(t,"factions",e,c),function(n,a){if(o==a)return r=!0,!1}),r)return!1}),r},list:["Federation","Klingon","Vulcan","Romulan","Bajoran","Dominion","Independent","Borg","Ferengi","Species 8472","Kazon","Mirror Universe","Xindi","Q Continuum"]};return t.listCodified=$.map(t.list,function(n){return n.toLowerCase().replace(/ /g,"-")}),t}]),module.factory("cardRules",["$filter","$factions",function(n,a){var t=n("valueOf"),e=function(a){return function(t,e,c){var r=!1,o=n("upgradeSlots")(e);return $.each(o,function(n,e){e.occupant&&e.occupant!=t&&e.occupant.name==a&&(r=!0)}),!r}},c=["crew","weapon","tech","talent","question","borg"],r=function(n){return 0<=$.inArray(n.type,c)},o=function(n,a,t,e){return e instanceof Function?e(n,a,t):e},s=a.hasFaction,u=function(n,a){for(var t=[a],e=1;e<n;e++)t.push(angular.copy(a));return t},l=function(a,t){var e=["weapon"];return $.each(n("upgradeSlots")(t),function(n,t){if(t.occupant&&t.occupant.name==a.source)return e=t.type,!1}),e},p=function(a,t,e){var c=!1;if(t.type==a)c=!0;else if("question"==t.type&&t.countsAsUpgrade){for(var r=n("upgradeSlots")(e),o=0;o<r.length;o++)if(r[o].occupant&&r[o].occupant.id==t.id&&-1<$.inArray(a,r[o].type)){c=!0;break}}return c};return{"captain:Cap101":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"captain:Cap112":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"federation",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"captain:Cap115":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"federation",t,e)?0:1}},"captain:Cap111":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"captain:Cap114":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"independent",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"captain:Cap113":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"independent",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"captain:Cap116":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"independent",t,e)?0:1}},"captain:Cap016":{factionPenalty:function(n,a,t){return a&&$factions.hasFaction(a,"bajoran",a,t)?0:c.hasFaction(a,"vulcan",a,t)?0:1}},"tech:T278":{canEquip:function(n,a,t){return"Prometheus Class"==a.class},intercept:{ship:{shields:function(n,a,t,e){return n==a?s(n,a,t,e)+5:e}}}},"talent:E208":{canEquipFaction:function(n,a,t){return a.captain&&("Kor"==a.captain.name||"Koloth"==a.captain.name||"Kang"==a.captain.name)},intercept:{fleet:{skill:function(n,a,t,e){return n!=a.captain||"Kor"!=n.name&&"Kang"!=n.name&&"Koloth"!=n.name?e:o(n,a,t,e)+1}}}},"captain:Cap004":{upgradeSlots:[{type:["talent"],rules:"May equip Dahar Master Elite Talent for 0 SP",intercept:{ship:{cost:function(n,a,t,e){return"Dahar Master"==n.name?0:e}}}}]},"ship:S336":{upgradeSlots:[{type:["tech"],rules:"Klingon Upgrade, 4 SP cost or less",canEquip:function(n){return"klingon"==n.factions&&n.cost<=4},intercept:{ship:{cost:function(){return 0}}}}]},"weapon:W217":{attack:0,intercept:{self:{attack:function(n,a,e,c){return a?t(a,"attack",a,e):c}}},canEquipFaction:function(n,a,t){return a.hull<=3}},"weapon:W216":{attack:0,intercept:{self:{attack:function(n,a,e,c){return a?t(a,"attack",a,e):c}}},canEquipFaction:function(n,a,t){return s(a,"klingon",a,t)}},"talent:E209":{canEquipFaction:function(n,a,t){return s(a.captain,"klingon",a,t)}},"tech:T273":{upgradeSlots:[{type:["tech"]}]},"admiral:A037":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:3}},"ship:S342":{intercept:{ship:{cost:function(n,t,e,c){return(a.hasFaction(n,"federation",t,e)||a.hasFaction(n,"bajoran",t,e)||a.hasFaction(n,"vulcan",t,e))&&"weapon"==n.type?o(n,t,e,c)-1:c}}}},"captain:Cap007":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"captain:Cap009":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"captain:Cap010":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"captain:Cap006":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"captain:Cap008":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1},upgradeSlots:u(1,{type:["talent"],rules:"No Faction Penalty for Klingon Elite Talent",intercept:{ship:{factionPenalty:{priority:100,fn:function(n,a,t,e){return"klingon"==n.factions?0:e}}}}})},"weapon:W215":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1},upgradeSlots:[{type:["weapon"],rules:"Torpedo Upgrade with Printed Cost 5 or less.",faceDown:!0,canEquip:function(n){return"W204"==n.id||"W192"==n.id||"W191"==n.id||"W183"==n.id||"W177"==n.id||"W161"==n.id||"W160"==n.id||"W158"==n.id||"W157"==n.id||"W008"==n.id||"W004"==n.id||"W003"==n.id||"W002"==n.id||"W009"==n.id||"W154"==n.id||"W152"==n.id||"W145"==n.id||"W142"==n.id||"W141"==n.id||"W137"==n.id||"W128"==n.id||"W122"==n.id||"W120"==n.id||"W119"==n.id||"W118"==n.id||"W117"==n.id||"W116"==n.id||"W114"==n.id||"W112"==n.id||"W105"==n.id||"W100"==n.id||"W088"==n.id||"W082"==n.id||"W081"==n.id||"W079"==n.id||"W078"==n.id||"W074"==n.id||"W072"==n.id||"W067"==n.id||"W059"==n.id||"W050"==n.id||"W039"==n.id||"W038"==n.id||"W031"==n.id||"W195"==n.id||"W016"==n.id||"W119"==n.id},intercept:{ship:{cost:function(){return 0}}}}]},"tech:T272":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"tech:T271":{canEquip:function(n,a,t){return 0<=a.class.indexOf("Defiant Class")},factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"weapon:W215":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1},upgradeSlots:[{type:["weapon"],rules:"Torpedo, 5 SP of less",faceDown:!0,intercept:{ship:{canEquip:function(n,a,e){return 5>=t(n,"cost",a,e)},free:function(){return!0}}}}]},"tech:T270":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1},canEquipFaction:function(n,a,t){return(s(a,"federation",a,t)||s(a,"vulcan",a,t)||s(a,"bajoran",a,t))&&5<=a.hull},intercept:{ship:{shields:function(n,a,t,e){return n==a?o(n,a,t,e)+2:e}}}},"weapon:W214":{canEquip:function(n,a,t){return 0<=a.class.indexOf("Akira Class")},factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"weapon:W213":{canEquip:function(n,a,t){return 0<=a.class.indexOf("Defiant Class")},factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C374":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C373":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C372":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1},upgradeSlots:[{type:["crew"]}]},"crew:C371":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C370":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"weapon:W204":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1},attack:0,intercept:{self:{attack:function(n,a,e,c){return a?t(a,"attack",a,e)+1:c}}}},"talent:E202":{canEquip:e("Battle-Hardened"),factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"talent:E203":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"talent:E201":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"talent:E199":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"talent:E200":{canEquip:e("Calculating"),factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"weapon:W201":{canEquip:e("Full Spread"),factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"weapon:W207":{canEquip:e("Enhanced Targeting"),factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"weapon:W202":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"weapon:W205":{canEquip:e("Overcharged Phasers"),factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"weapon:W203":{canEquip:e("Dorsal Phaser Array"),factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"tech:T259":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"tech:T257":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"tech:T255":{canEquip:e("Detection Grid"),factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"tech:T253":{canEquip:e("Reinforced Shielding"),factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"tech:T258":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"tech:T256":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"tech:T254":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C362":{canEquip:e("Commander"),factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C360":{canEquip:e("Tactical Officer"),factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C361":{canEquip:e("Helmsman"),factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C358":{canEquip:e("Science Officer"),factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C359":{canEquip:e("Operations Officer"),factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"captain:Cap118":{intercept:{ship:{cost:function(n,a,t,e){var c=0;return"ship"==n.type&&(c=30),o(n,a,t,e)-c}}}},"captain:Cap119":{intercept:{ship:{cost:function(n,a,t,e){var c=0;return"ship"==n.type&&(c=30),o(n,a,t,e)-c}}}},"captain:Cap121":{upgradeSlots:[{},{type:["tech","weapon","crew"]}],intercept:{ship:{cost:function(n,a,t,e){var c=0;return"ship"==n.type&&(c=30),o(n,a,t,e)-c}}}},"captain:Cap122":{upgradeSlots:[{},{type:["tech","weapon","crew"]}],intercept:{ship:{cost:function(n,a,t,e){var c=0;return"ship"==n.type&&(c=30),o(n,a,t,e)-c}}}},"captain:Cap123":{upgradeSlots:[{},{},{type:["tech","weapon","crew"]}],intercept:{ship:{cost:function(n,a,t,e){var c=0;return"ship"==n.type&&(c=30),o(n,a,t,e)-c}}}},"captain:Cap124":{upgradeSlots:[{},{},{type:["tech","weapon","crew"]}],intercept:{ship:{cost:function(n,a,t,e){var c=0;return"ship"==n.type&&(c=30),o(n,a,t,e)-c}}}},"captain:Cap125":{upgradeSlots:[{},{},{type:["tech","weapon","crew"]},{type:["tech","weapon","crew"]}],intercept:{ship:{cost:function(n,a,t,e){var c=0;return"ship"==n.type&&(c=30),o(n,a,t,e)-c}}}},"captain:Cap126":{upgradeSlots:[{},{},{type:["tech","weapon","crew"]},{type:["tech","weapon","crew"]}],intercept:{ship:{cost:function(n,a,t,e){var c=0;return"ship"==n.type&&(c=30),o(n,a,t,e)-c}}}},"captain:Cap127":{upgradeSlots:[{},{},{},{type:["tech","weapon","crew"]},{type:["tech","weapon","crew"]}],intercept:{ship:{cost:function(n,a,t,e){var c=0;return"ship"==n.type&&(c=30),o(n,a,t,e)-c}}}},"captain:Cap128":{upgradeSlots:[{},{},{},{type:["tech","weapon","crew"]},{type:["tech","weapon","crew"]}],intercept:{ship:{cost:function(n,a,t,e){var c=0;return"ship"==n.type&&(c=30),o(n,a,t,e)-c}}}},"tech:T253":{canEquip:e("Reinforced Shielding"),intercept:{ship:{shields:function(n,a,t,e){return n==a?o(n,a,t,e)+2:e}}}},"captain:Cap646":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"captain:Cap906":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"talent:E132":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:3002":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:3003":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:3004":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:3005":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"weapon:W122":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"weapon:W121":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"weapon:W120":{intercept:{self:{attack:function(n,a,t,e){return a&&"Vor'cha Class"==a.class?o(n,a,t,e)+1:e}}}},"captain:Cap641":{intercept:{ship:{cost:function(n,a,t,e){var c=e;return p("weapon",n,a)&&(c=o(n,a,t,e)-1),c}}}},"weapon:W111":{intercept:{self:{cost:function(n,a,t,e){return a&&0>a.class.indexOf("Breen")?o(n,a,t,e)+5:e}}}},"weapon:W114":{intercept:{self:{attack:function(n,a,t,e){return a&&"Negh'var Class"==a.class?o(n,a,t,e)+1:e}}}},"crew:C191":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"crew:C193":{intercept:{self:{cost:function(n,a,t,e){return a&&"Romulan Science Vessel"!=a.class?o(n,a,t,e)+5:e}}}},"tech:T247":{canEquip:function(n,a,t){return"Romulan Science Vessel"==a.class}},"captain:Cap644":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1},intercept:{ship:{cost:function(n,a,t,e){return p("crew",n,a)?o(n,a,t,e)-1:e}}}},"captain:Cap905":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1},upgradeSlots:u(2,{type:["talent"],rules:"Fed Talents Cost Exactly 3 SP",faceDown:!0,intercept:{ship:{cost:function(n,a,t,e){return s(n,"federation",a,t)||s(n,"bajoran",a,t)||s(n,"vulcan",a,t)?3:e}}}})},"talent:E128":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"talent:E127":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"talent:E126":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C200":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C199":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C198":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C197":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C196":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"weapon:W118":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"captain:Cap217":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"captain:Cap814":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1},intercept:{ship:{factionPenalty:function(n,a,t,e){return r(n)?0:e}}}},"talent:E130":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"talent:E129":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"crew:C204":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C203":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C202":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"crew:C201":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"captain:Cap645":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1},intercept:{ship:{factionPenalty:function(n,a,t,e){return"captain"==n.type||"talent"==n.type?0:e}}}},"captain:Cap531":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"independent",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"talent:E122":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"independent",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"crew:C186":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"independent",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"weapon:W110":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"independent",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"tech:T243":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"independent",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"captain:Cap325":{intercept:{ship:{cost:function(t,e,c,r){var s=!1,u=0;return $.each(n("upgradeSlots")(e),function(n,t){if(t.occupant&&a.hasFaction(t.occupant,"dominion",e,c)){var r=o(t.occupant,e,c,t.occupant.cost);u<r&&(s=t.occupant,u=r)}}),t==s&&(r=u-2),r}}}},"tech:T236":{canEquip:function(n,a,t){return a&&0<=a.class.indexOf("Jem'Hadar")}},"weapon:W103":{intercept:{self:{cost:function(n,a,t,e){return a&&0>a.class.indexOf("Jem'Hadar")?o(n,a,t,e)+5:e}}}},"crew:C178":{canEquip:function(n,a,t){return a&&0<=a.class.indexOf("Jem'Hadar")}},"crew:C177":{canEquip:function(n,a,t){return a&&0<=a.class.indexOf("Jem'Hadar")}},"crew:C176":{canEquip:function(n,a,t){return a&&0<=a.class.indexOf("Jem'Hadar")}},"captain:Cap326":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"federation",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"captain:Cap639":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"weapon:W107":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"tech:T240":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1},intercept:{self:{cost:function(n,a,t,e){return a&&"U.S.S. Defiant"!=a.name?o(n,a,t,e)+5:e}}}},"crew:C183":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"talent:E119":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"talent:E118":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C182":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C181":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C175":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"weapon:W102":{intercept:{self:{attack:function(n,a,t,e){return a&&0<=a.class.indexOf("Keldon Class")?o(n,a,t,e)+1:e}}}},"tech:T233":{intercept:{self:{cost:function(n,a,t,e){return a&&0>a.class.indexOf("Keldon Class")?o(n,a,t,e)+5:e}}}},"captain:Cap323":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1},upgradeSlots:[{type:["tech"]}]},"captain:Cap636":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"talent:E115":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C171":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C170":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C169":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"tech:T232":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"tech:T231":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"captain:Cap430":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"talent:E113":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C167":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"weapon:W100":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"tech:T229":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"talent:E111":{canEquipFaction:function(n,t,e){return t.captain&&a.hasFaction(t.captain,"klingon",t,e)}},"tech:T225":{canEquip:function(n,a,t){return"Raptor Class"==a.class}},"tech:T224":{canEquip:function(n,a,t){return"Raptor Class"==a.class}},"captain:Cap717":{upgradeSlots:[{}].concat(u(2,{type:["crew"],rules:"-1 SP if Dominion",intercept:{ship:{cost:function(n,t,e,c){return a.hasFaction(n,"dominion",t,e)?o(n,t,e,c)-1:c}}}}))},"crew:C159":{canEquip:function(n,a,t){return a&&0<=a.class.indexOf("Jem'Hadar")}},"crew:C157":{intercept:{self:{cost:function(n,a,t,e){return a&&0>a.class.indexOf("Jem'Hadar")?o(n,a,t,e)+5:e}}}},"weapon:W097":{intercept:{self:{attack:function(n,a,t,e){return a&&"Jem'Hadar Battleship"==a.class?o(n,a,t,e)+2:e}}}},"weapon:W096":{intercept:{self:{cost:function(n,a,t,e){return a&&0>a.class.indexOf("Jem'Hadar")?o(n,a,t,e)+5:e}}}},"captain:Cap215":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"captain:Cap429":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C165":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C164":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C163":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"tech:T227":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"tech:T226":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"tech:T228":{upgradeSlots:[{type:["weapon"]},{type:["weapon"]}]},"captain:Cap525":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"federation",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"captain:Cap524":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"federation",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1},upgradeSlots:[{},{type:["tech"],rules:"Costs exactly 3 SP",intercept:{ship:{cost:function(n,t,e,c){return a.match(n,t,t,e)?a.match(n,t,t,e)?3:c:4}}}}]},"talent:E107":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"federation",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"talent:E106":{canEquipFaction:function(n,t,e){return t.captain&&a.hasFaction(t.captain,"bajoran",t,e)}},"crew:C156":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"federation",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C155":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"federation",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"weapon:W094":{canEquip:function(n,t,e){return a.hasFaction(t,"borg",t,e)}},"captain:Cap214":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"independent",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"captain:Cap427":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"independent",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"crew:C152":{canEquip:function(n,t,e){return a.hasFaction(t,"kazon",t,e)}},"tech:T217":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"independent",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1},intercept:{self:{cost:function(n,t,e,c){return t&&!a.hasFaction(t,"kazon",t,e)?o(n,t,e,c)+5:c}}}},"crew:C150":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"independent",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"crew:C146":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"independent",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"weapon:W091":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"independent",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"tech:T221":{canEquip:function(n,t,e){return a.hasFaction(t,"species-8472",t,e)}},"tech:T219":{canEquip:function(n,t,e){return a.hasFaction(t,"species-8472",t,e)}},"tech:T216":{canEquip:function(n,t,e){return a.hasFaction(t,"species-8472",t,e)}},"talent:E104":{intercept:{self:{cost:function(n,t,e,c){return t&&!a.hasFaction(t,"species-8472",t,e)?o(n,t,e,c)+5:c}}}},"weapon:W095":{canEquip:function(n,t,e){return a.hasFaction(t,"species-8472",t,e)}},"weapon:W093":{intercept:{self:{attack:function(n,a,t,e){return a&&"Species 8472 Bioship"==a.class?o(n,a,t,e)+2:e}}}},"weapon:W092":{canEquip:function(n,t,e){return a.hasFaction(t,"species-8472",t,e)}},"captain:Cap523":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"captain:Cap812":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"tech:T222":{canEquip:function(n,a,t){return"U.S.S. Voyager"==a.name}},"crew:C154":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1},name:"B'Elanna Torres",upgradeSlots:[{type:["weapon"]},{type:["tech"]}]},"tech:T220":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C153":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"talent:E105":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C148":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C147":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C144":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"tech:T215":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"weapon:W090":{canEquip:function(n,a,t){return"U.S.S. Voyager"==a.name}},"crew:C145":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"talent:E102":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"captain:Cap426":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"talent:E103":{canEquipFaction:function(n,a,t){return a.captain&&("Loskene"==a.captain.name||0<=a.captain.name.indexOf("Tholian"))}},"weapon:W089":{canEquip:function(n,a,t){return"Tholian Vessel"==a.class}},"weapon:W088":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"talent:E097":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"captain:Cap425":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"tech:T209":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"crew:C138":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"tech:T208":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"talent:E098":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"captain:Cap322":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"federation",t,e)?0:1},upgradeSlots:[{type:["crew"]}]},"captain:Cap715":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"federation",t,e)?0:1}},"crew:C143":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"federation",t,e)?0:1}},"crew:C142":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"federation",t,e)?0:1}},"tech:T214":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"federation",t,e)?0:1}},"tech:T213":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"federation",t,e)?0:1}},"talent:E101":{canEquipFaction:function(n,t,e){return t.captain&&a.hasFaction(t,"vulcan",t,e)&&a.hasFaction(t.captain,"vulcan",t,e)},upgradeSlots:u(2,{type:["tech","crew"]})},"weapon:W087":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"federation",t,e)?0:1}},"weapon:W086":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"federation",t,e)?0:1}},"captain:Cap321":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"federation",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"captain:Cap714":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"federation",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C141":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"federation",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C140":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"federation",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"tech:T212":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"federation",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1},canEquip:function(n,a,t){return!!(a&&a.classData&&a.classData.maneuvers&&a.classData.maneuvers.max)&&a.classData.maneuvers.max<4}},"tech:T211":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"federation",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1},intercept:{self:{cost:function(n,a,t,e){return a&&"Bajoran Interceptor"!=a.class?o(n,a,t,e)+5:e}}}},"talent:E100":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"federation",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"weapon:W085":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"federation",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1},canEquip:function(n,a,t){return a.hull<=3},intercept:{self:{cost:function(n,a,t,e){return a&&"Bajoran Interceptor"!=a.class?o(n,a,t,e)+5:e}}}},"ship:S139":{intercept:{ship:{cost:function(n,a,t,e){return"Borg Ablative Hull Armor"==n.name?o(n,a,t,e)-3:e}}}},"talent:E099":{canEquipFaction:function(n,t,e){return t.captain&&a.hasFaction(t.captain,"borg",t,e)}},"weapon:W084":{intercept:{self:{attack:function(n,a,t,e){return a&&"Borg Tactical Cube"==a.class?o(n,a,t,e)+3:e}}}},"weapon:W083":{canEquipFaction:function(n,t,e){return a.hasFaction(t,"borg",t,e)}},"talent:E093":{canEquip:function(n,a,t){return a.hull<=3}},"tech:T204":{canEquip:e("Ion Thrusters")},"captain:Cap633":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"crew:C135":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"crew:C134":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1},upgradeSlots:[{type:["weapon"]}],intercept:{ship:{cost:{priority:100,fn:function(n,a,t,e){return p("weapon",n,a)&&"Torpedo Fusillade"!=n.name&&"W057"!=n.id&&"Aft Phaser Emitters"!=n.name&&"W156"!=n.id&&"W199"!=n.id&&(e=o(n,a,t,e))<=5&&(e-=2),e}}}}},"talent:E094":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"weapon:W080":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"captain:Cap712":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"talent:E092":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C132":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"tech:T162":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"crew:C131":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"weapon:W078":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"captain:Cap522":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"federation",t,e)?0:1},intercept:{ship:{cost:function(n,t,e,c){return(a.hasFaction(n,"federation",t,e)||a.hasFaction(n,"bajoran",t,e)||a.hasFaction(n,"vulcan",t,e))&&"tech"==n.type?o(n,t,e,c)-2:c}}}},"tech:T201":{canEquip:function(n,a,t){return"Suurok Class"==a.class},intercept:{ship:{attack:function(n,a,t,e){return n==a?o(n,a,t,e)+1:e},hull:function(n,a,t,e){return n==a?o(n,a,t,e)+1:e}}}},"tech:T200":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"federation",t,e)?0:1}},"talent:E086":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"federation",t,e)?0:1}},"crew:C116":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"federation",t,e)?0:1}},"talent:E087":{canEquipFaction:function(n,t,e){return t.captain&&a.hasFaction(t.captain,"dominion",t,e)}},"weapon:W075":{canEquip:function(n,a,t){return"Jem'Hadar Battleship"==a.class||"Jem'Hadar Battleship "==a.class||"Jem'Hadar Battle Cruiser"==a.class}},"captain:Cap320":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"captain:Cap631":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"captain:Cap809":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"admiral:A026":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:3}},"talent:E091":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C130":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C129":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C128":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C127":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"talent:E090":{canEquipFaction:function(n,t,e){return a.hasFaction(t,"federation",t,e)||a.hasFaction(t,"bajoran",t,e)||a.hasFaction(t,"vulcan",t,e)}},"crew:C126":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C125":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C124":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"captain:Cap424":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1},intercept:{ship:{cost:function(n,a,t,e){return p("crew",n,a)?o(n,a,t,e)-1:e},factionPenalty:function(n,t,e,c){return r(n)&&a.hasFaction(n,"borg",t,e)?0:c}}}},"captain:Cap711":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1},upgradeSlots:[{},{type:["crew"]}],intercept:{ship:{canEquipFaction:{priority:100,fn:function(n,a,t,e){return"talent"==n.type||e}},factionPenalty:{priority:100,fn:function(n,a,t,e){return"talent"==n.type?0:e}}}}},"crew:C123":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"crew:C122":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"crew:C121":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"crew:C120":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"talent:E089":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"talent:E088":{canEquipFaction:function(n,t,e){return t.captain&&a.hasFaction(t.captain,"borg",t,e)}},"borg:B012":{canEquipFaction:function(n,t,e){return a.hasFaction(t,"borg",t,e)}},"weapon:W077":{intercept:{self:{attack:function(n,t,e,c){return t&&a.hasFaction(t,"borg",t,e)?o(n,t,e,c)+1:c}}}},"weapon:W076":{intercept:{self:{cost:function(n,t,e,c){return t&&!a.hasFaction(t,"borg",t,e)?o(n,t,e,c)+5:c}}}},"captain:Cap319":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"federation",t,e)?0:a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"tech:T099":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1},name:"Multi-Adaptive Shields",canEquipFaction:function(n,t,e){return a.hasFaction(t,"federation",t,e)||a.hasFaction(t,"bajoran",t,e)||a.hasFaction(t,"vulcan",t,e)}},"tech:T098":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1},intercept:{self:{cost:function(n,a,t,e){return a&&"U.S.S. Raven"!=a.name?o(n,a,t,e)+5:e}}}},"talent:E085":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"crew:C115":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"captain:Cap710":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C110":{upgradeSlots:[{type:["tech"]}]},"crew:C114":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"independent",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1},text:"At the start of the game, place 1 non-Borg [tech] or [weapon] Upgrade with a cost of 5 or less face down beneath this card. At any time, you may discard Quark to flip the Upgrade that is beneath this card face up and deploy it to your ship, even if it exceeds your ship's restrictions.",upgradeSlots:[{type:["weapon","tech"],rules:"Non-Borg, 5SP or less",faceDown:!0,intercept:{ship:{canEquip:function(n,a,e){return 5>=t(n,"cost",a,e)},canEquipFaction:function(n,t,e){return!a.hasFaction(n,"borg",t,e)},free:function(){return!0}}}}]},"crew:C113":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"crew:C112":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"federation",t,e)?0:a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"tech:T097":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"federation",t,e)?0:a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"crew:C108":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C109":{upgradeSlots:[{type:["talent"],rules:"No Faction Penalty",intercept:{ship:{factionPenalty:function(){return 0}}}}],factionPenalty:0},"ship:S106":{class:"Galaxy Class",classId:"galaxy__class_mu"},"ship:S107":{class:"Galaxy Class",classId:"galaxy__class_mu"},"ship:S108":{class:"Galaxy Class",classId:"galaxy__class_mu"},"ship:S105":{class:"Galaxy Class",classId:"galaxy__class_mu"},"weapon:W070":{intercept:{self:{cost:function(n,a,t,e){return a&&"Galaxy Class"!=a.class&&"Intrepid Class"!=a.class&&"Sovereign Class"!=a.class?o(n,a,t,e)+5:e}}}},"captain:Cap629":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1},upgradeSlots:[{},{type:["crew"]}]},"tech:T091":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C097":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"talent:E082":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"weapon:W170":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1},upgradeSlots:[{type:["weapon"]}]},"captain:Cap421":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"federation",t,e)?0:1}},"captain:Cap520":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"federation",t,e)?0:1}},"admiral:A023":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"federation",t,e)?0:3}},"captain:Cap630":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"federation",t,e)?0:1},upgradeSlots:[{},{type:["crew"]}]},"crew:C101":{canEquipFaction:function(n,t,e){return a.hasFaction(t,"vulcan",t,e)}},"tech:T095":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"federation",t,e)?0:1},upgradeSlots:[{type:["weapon"]}],canEquip:function(n,a,t){return"Suurok Class"==a.class&&e("Combat Vessel Variant")(n,a,t)},intercept:{ship:{attack:function(n,a,t,e){return n==a?o(n,a,t,e)+1:e},hull:function(n,a,t,e){return n==a?o(n,a,t,e)+1:e},canEquip:function(n,a,t){return"Combat Vessel Variant"!=n.name}}}},"tech:T094":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"federation",t,e)?0:1}},"talent:E083":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"federation",t,e)?0:1}},"ship:S115":{upgradeSlots:[{type:["tech"],rules:"Free EHP Only",canEquip:function(n){return"Enhanced Hull Plating"==n.name},intercept:{ship:{cost:function(){return 0}}}}]},"captain:Cap318":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"captain:Cap422":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"admiral:A024":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:3}},"captain:Cap521":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1},upgradeSlots:[{},{type:["crew"]}]},"tech:T096":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1},canEquip:e("Enhanced Hull Plating"),canEquipFaction:function(n,t,e){return a.hasFaction(t,"federation",t,e)||a.hasFaction(t,"bajoran",t,e)||a.hasFaction(t,"vulcan",t,e)}},"crew:C107":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1},upgradeSlots:[{type:["tech"]}]},"crew:C106":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C105":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C104":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C103":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C102":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"talent:E084":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"ship:S113":{intercept:{ship:{canEquip:function(n,a,e,c){return!(p("borg",n,a)&&5<t(n,"cost",a,e))&&c}}}},"ship:S111":{intercept:{ship:{canEquip:function(n,a,e,c){return!(p("borg",n,a)&&5<t(n,"cost",a,e))&&c}}}},"captain:Cap317":{canEquip:function(a,t,e){return!n("fleetCardNamed")(e,"Hugh")},intercept:{fleet:{canEquip:function(n,a,t,e){return"Hugh"!=n.name&&e},canEquipCaptain:function(n,a,t,e){return"Hugh"!=n.name&&e}}}},"crew:C100":{canEquip:function(a,t,e){return!n("fleetCardNamed")(e,"Hugh")},intercept:{fleet:{canEquip:function(n,a,t,e){return"Hugh"!=n.name&&e},canEquipCaptain:function(n,a,t,e){return"Hugh"!=n.name&&e}}}},"borg:B011":{canEquip:e("Scavenged Parts")},"weapon:W071":{canEquipFaction:function(n,t,e){return a.hasFaction(t,"borg")}},"captain:Cap628":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"independent",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"tech:T090":{canEquipFaction:function(n,t,e){return a.hasFaction(t,"ferengi",t,e)}},"talen:E080":{canEquipFaction:function(n,t,e){return t.captain&&a.hasFaction(t.captain,"ferengi",t,e)&&a.hasFaction(t,"ferengi",t,e)}},"crew:C095":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"independent",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"weapon:W067":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"independent",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"tech:T089":{intercept:{self:{cost:function(n,t,e,c){return t&&!a.hasFaction(t,"mirror-universe",t,e)?o(n,t,e,c)+5:c}}}},"captain:Cap315":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"independent",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1},upgradeSlots:[{type:["weapon"]}],intercept:{ship:{cost:function(n,t,e,c){return p("weapon",n,t)&&a.hasFaction(n,"kazon",t,e)?o(n,t,e,c)-1:c}}}},"crew:C093":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"independent",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"tech:T088":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"independent",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1},canEquip:e("Tractor Beam")},"weapon:W064":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"independent",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1},intercept:{self:{cost:function(n,a,t,e){return"Predator Class"!=a.class?o(n,a,t,e)+4:e}}}},"weapon:W063":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"independent",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"ship:S099":{intercept:{ship:{canEquip:function(n,a,e,c){return!(p("borg",n,a)&&5<t(n,"cost",a,e))&&c}}}},"weapon:W062":{name:"Proton Beam",intercept:{self:{cost:function(n,t,e,c){return t&&!a.hasFaction(t,"borg",t,e)?o(n,t,e,c)+5:c}}}},"captain:Cap627":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"federation",t,e)?0:1}},"talent:E079":{canEquipFaction:function(n,t,e){return t.captain&&a.hasFaction(t.captain,"vulcan",t,e)&&a.hasFaction(t,"vulcan",t,e)}},"crew:C091":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"federation",t,e)?0:1}},"tech:T086":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"federation",t,e)?0:1}},"weapon:W061":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"federation",t,e)?0:1}},"borg:B007":{canEquip:e("Hive Mind")},"talent:E078":{canEquipFaction:function(n,t,e){return t.captain&&!a.hasFaction(t.captain,"borg",t,e)&&!a.hasFaction(t,"borg",t,e)},upgradeSlots:[{type:["borg"]}]},"captain:Cap420":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"admiral:A021":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:3}},"captain:Cap807":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1},upgradeSlots:[{},{type:["crew","tech","weapon","talent"]}]},"tech:T085":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1},canEquip:e("Advanced Shields")},"talent:E077":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"talent:E076":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C080":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C089":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1},upgradeSlots:[{type:["crew"]}]},"crew:C088":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1},upgradeSlots:[{type:["tech"]}]},"crew:C084":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C083":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"weapon:W058":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1},intercept:{self:{attack:function(n,a,t,e){return a&&"Sovereign Class"==a.class?o(n,a,t,e)+1:e}}}},"weapon:W057":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1},attack:0,canEquip:function(n,t,e){return t&&(a.hasFaction(t,"federation",t,e)||a.hasFaction(t,"bajoran",t,e)||a.hasFaction(t,"vulcan",t,e))&&4<=t.hull},intercept:{self:{attack:function(n,a,e,c){return a?t(a,"attack",a,e):c},cost:function(n,a,e,c){return a?o(n,a,e,c)+t(a,"attack",a,e)+1:c}}}},"borg:B006":{canEquip:e("Transwarp Signal"),canEquipFaction:function(n,t,e){return a.hasFaction(t,"borg",t,e)}},"borg:B005":{canEquip:e("Borg Shield Matrix")},"weapon:W056":{intercept:{self:{cost:function(n,t,e,c){return t&&!a.hasFaction(t,"borg",t,e)?o(n,t,e,c)+5:c}}}},"captain:Cap518":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1},upgradeSlots:[{type:["tech","weapon","crew"]}],intercept:{ship:{cost:function(n,t,e,c){return(a.hasFaction(t,"independent",t,e)||a.hasFaction(t,"ferengi",t,e)||a.hasFaction(t,"kazon",t,e)||a.hasFaction(t,"xindi",t,e))&&r(n)?o(n,t,e,c)-1:c}}}},"captain:Cap626":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1},upgradeSlots:[{},{type:["weapon","crew"]}]},"crew:C087":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"crew:C086":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"crew:C082":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"crew:C081":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"talent:E073":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"talent:E072":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"weapon:W060":{canEquip:function(n,a,t){return a.hull<=3},factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"weapon:W059":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"ship:S087":{canJoinFleet:function(n,a,t){var e=!0;return $.each(t.ships,function(n,a){if("Assimilated Vessel 80279"==a.name)return e=!1}),e},intercept:{fleet:{canJoinFleet:function(n,a,t){return"Assimilated Vessel 80279"!=n.name}}}},"borg:T083":{canEquip:e("Data Node")},"talent:E071":{canEquipFaction:function(n,t,e){return t.captain&&a.hasFaction(t.captain,"klingon",t,e)}},"talent:E063":{upgradeSlots:u(4,{type:["talent"],rules:"Romulan Talent Only",faceDown:!0,intercept:{ship:{cost:function(){return 0},factionPenalty:function(){return 0},canEquip:function(n,t,e,c){return!!a.hasFaction(n,"romulan",t,e)&&c}}}}),canEquip:function(n,a,t){return a.captain&&"Shinzon"==a.captain.name},factionPenalty:0},"tech:T080":{canEquip:function(n,a,t){return"Reman Warbird"==a.class}},"tech:T079":{intercept:{self:{cost:function(n,a,t,e){return a&&"Reman Warbird"!=a.class?o(n,a,t,e)+5:e}}}},"weapon:W054":{canEquip:function(n,a,t){return"Reman Warbird"==a.class}},"weapon:W053":{intercept:{self:{attack:function(n,a,t,e){return a&&"Reman Warbird"==a.class?o(n,a,t,e)+2:e}}}},"tech:T081":{canEquip:function(n,a,t){return"Klingon Bird-of-Prey"==a.class}},"talent:E068":{canEquipFaction:function(n,t,e){return t.captain&&a.hasFaction(t.captain,"klingon",t,e)}},"ship:S084":{class:"Defiant Class",classId:"defiant_class_mirror"},"ship:S080":{class:"Defiant Class",classId:"defiant_class_mirror"},"captain:Cap516":{upgradeSlots:[{},{type:["tech"]}]},"crew:C078":{upgradeSlots:[{type:["tech"]}]},"captain:Cap902":{upgradeSlots:[{},{type:["borg"]}]},"borg:E070":{intercept:{self:{cost:function(n,t,e,c){return t&&!a.hasFaction(t,"borg",t,e)?o(n,t,e,c)+5:c}}}},"borg:B002":{canEquip:e("Interplexing Beacon")},"ship:S070":{canJoinFleet:function(n,a,t){var e=!0;return $.each(t.ships,function(n,a){if("Assimilated Vessel 64758"==a.name)return e=!1}),e},intercept:{fleet:{canJoinFleet:function(n,a,t){return"Assimilated Vessel 64758"!=n.name}}}},"talent:E060":{intercept:{self:{cost:function(n,a,t,e){return a&&a.captain&&5<a.captain.skill?o(n,a,t,e)+5:e}}}},"captain:Cap901":{canEquipCaptain:function(a,t,e){return!n("fleetCardNamed")(e,"Jean-Luc Picard")},intercept:{fleet:{canEquip:function(n,a,t,e){return"Jean-Luc Picard"!=n.name&&e},canEquipCaptain:function(n,a,t,e){return"Jean-Luc Picard"!=n.name&&e}}}},"squadron:D016":{canEquip:e("Cover Fire")},"squadron:D015":{canEquip:e("Flanking Attack")},"squadron:D013":{canEquip:e("Support Ship")},"squadron:D011":{canEquip:e("Aft Disruptor Wave Cannons")},"squadron:D010":{canEquip:e("Galor Class Phaser Banks")},"ship:S067":{class:"Negh'var Class",classId:"negh_var_class_mirror"},"ship:S066":{class:"Negh'var Class",classId:"negh_var_class_mirror"},"crew:C067":{intercept:{ship:{skill:function(n,t,e,c){return n==t.captain&&a.hasFaction(t,"mirror-universe",t,e)&&(c=o(n,t,e,c)+2),c}}}},"tech:T078":{intercept:{self:{cost:function(n,a,t,e){return a&&"Regent's Flagship"!=a.name?o(n,a,t,e)+5:e}}}},"weapon:W050":{intercept:{self:{attack:function(n,a,t,e){return a&&"Negh'var Class"==a.class?o(n,a,t,e)+1:e}}}},"captain:Cap706":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"crew:C072":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"crew:C071":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"crew:C070":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"crew:C069":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"weapon:W052":{canEquip:function(n,a,t){return 0<=a.class.indexOf("Vidiian")}},"weapon:W051":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"talent:E061":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"crew:C063":{talents:1,factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:a.hasFaction(t,"klingon",t,e)?0:1},upgradeSlots:[{type:["talent"]}]},"tech:T069":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"klingon",t,e)?0:1}},"weapon:W047":{canEquip:e("Phaser Array Retrofit")},"captain:Cap622":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"captain:Cap806":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"tech:T076":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1},canEquip:e("Monotanium Armor Plating")},"tech:T075":{canEquip:function(n,a,t){return 0<=a.class.indexOf("Hirogen")}},"talent:E056":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1},canEquip:function(n,a,t){return 0<=a.class.indexOf("Hirogen")},intercept:{self:{cost:function(n,a,t,e){return a&&a.captain&&"Karr"!=a.captain.name&&0>a.captain.name.indexOf("Hirogen")?o(n,a,t,e)+5:e}}}},"talent:E055":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"talent:E054":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"weapon:W049":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1},intercept:{self:{cost:function(n,a,t,e){return a&&0>a.class.indexOf("Hirogen")?o(n,a,t,e)+5:e}}}},"crew:C062":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1},upgradeSlots:[{type:["weapon"]}]},"squadron:D009":{canEquip:e("Defensive Maneuvers")},"squadron:D008":{canEquip:e("Support Ship")},"squadron:D006":{canEquip:e("Attack Wave")},"squadron:D004":{canEquip:e("Attack Formation")},"squadron:D002":{canEquip:e("Cover Fire")},"squadron:D001":{canEquip:e("Coordinated Attack")},"ship:S061":{intercept:{ship:{canEquipCaptain:function(n,a,t){return"Gareb"==n.name||"Jhamel"==n.name||"Romulan Drone Pilot"==n.name}}}},"ship:S266":{intercept:{ship:{canEquipCaptain:function(n,a,t){return"Gareb"==n.name||"Jhamel"==n.name||"Romulan Drone Pilot"==n.name}}}},"captain:Cap105":{upgradeSlots:[{type:["captain"],rules:"Captain to place under Gareb",intercept:{ship:{cost:function(){return 0},onEquip:function(n,a,t){n.upgradeSlots=[];for(var e=0;e<n.talents;e++)n.upgradeSlots.push({type:["talent"],source:"Gareb"});n.unique=!1,n.text="(Place underneath Gareb)",n.name=n.name+" (Gareb)"},canEquip:function(){return!0},canEquipFaction:function(){return!0},factionPenalty:function(){return 0}}}}],skill:function(n,a,t){return n.upgradeSlots[0].occupant?n.upgradeSlots[0].occupant.skill:0},cost:function(n,a,t){var e=0;return n.upgradeSlots[0].occupant&&(e=n.upgradeSlots[0].occupant.cost-3),e},canEquipCaptain:function(n,a,t){return"Romulan Drone Ship"==a.class}},"captain:Cap104":{canEquipCaptain:function(n,a,t){return"Romulan Drone Ship"==a.class}},"captain:Cap621":{upgradeSlots:[{},{type:["tech"]}]},"tech:T074":{intercept:{self:{cost:function(n,a,t,e){return a&&"Romulan Drone Ship"!=a.class?o(n,a,t,e)+5:e}}}},"tech:T073":{canEquip:function(n,a,t){return"Romulan Drone Ship"==a.class}},"tech:T072":{canEquip:function(n,a,t){return"Romulan Drone Ship"==a.class}},"weapon:T071":{name:"Triphasic Emitters",range:!1,upgradeSlots:[{type:["weapon"],rules:"Non-Borg, 5SP or less",intercept:{ship:{free:function(){return!0},canEquip:function(n,a,e,c){return!(0==n.printedValue||s(n,"borg",a,e)||5<t(n,"cost",a,e))&&c}}}}]},"talent:E051":{canEquipFaction:function(n,a,t){return 0<=a.class.indexOf("Tholian")&&a.captain&&("Loskene"==a.captain.name||0<=a.captain.name.indexOf("Tholian"))}},"weapon:W045":{intercept:{self:{cost:function(n,a,t,e){return a&&0>a.class.indexOf("Tholian")?o(n,a,t,e)+5:e}}}},"captain:Cap618":{canEquipCaptain:function(n,t,e){return a.hasFaction(t,"romulan",t,e)}},"admiral:A017":{canEquipAdmiral:function(n,t,e){return a.hasFaction(t,"romulan",t,e)}},"crew:C059":{canEquip:e("Romulan Helmsman")},"talent:E049":{canEquipFaction:function(n,t,e){return a.hasFaction(t,"romulan",t,e)&&t.captain&&a.hasFaction(t.captain,"romulan",t,e)}},"crew:C057":{canEquipFaction:function(n,t,e){return a.hasFaction(t,"romulan",t,e)}},"crew:C058":{intercept:{ship:{skill:function(n,a,t,e){return n==a.captain?o(n,a,t,e)+1:e}}}},"weapon:W044":{intercept:{self:{cost:function(n,t,e,c){return t&&!a.hasFaction(t,"romulan",t,e)?o(n,t,e,c)+5:c}}}},"captain:Cap513":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"independent",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"captain:Cap619":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"independent",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"crew:C061":{canEquipFaction:function(n,t,e){return a.hasFaction(t,"kazon",t,e)}},"crew:C060":{canEquipFaction:function(n,t,e){return a.hasFaction(t,"kazon",t,e)}},"weapon:W046":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"independent",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"captain:Cap412":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"talent:T058":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1},canEquipFaction:function(n,t,e){return a.hasFaction(t,"federation",t,e)||a.hasFaction(t,"bajoran",t,e)||a.hasFaction(t,"vulcan",t,e)}},"crew:C047":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"tech:T057":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1},type:"question",isSlotCompatible:function(n){return 0<=$.inArray("tech",n)||0<=$.inArray("weapon",n)||0<=$.inArray("crew",n)},upgradeSlots:[{type:["tech"]}],intercept:{ship:{shields:function(n,a,t,e){return n==a?o(n,a,t,e)+1:e}}},canEquip:e("Systems Upgrade"),canEquipFaction:function(n,t,e){return a.hasFaction(t,"federation",t,e)||a.hasFaction(t,"bajoran",t,e)||a.hasFaction(t,"vulcan",t,e)}},"weapon:W034":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1},canEquip:function(n,a,t){return a.attack<=3&&e("Type 8 Phaser Array")(n,a,t)}},"talent:E046":{canEquipFaction:function(n,t,e){return a.hasFaction(t,"dominion",t,e)}},"weapon:W041":{canEquip:function(n,a,t){return 4<=a.hull},canEquipFaction:function(n,t,e){return a.hasFaction(t,"dominion",t,e)}},"captain:Cap312":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1},upgradeSlots:[{type:["talent"],rules:"Salvage Only",canEquip:function(n){return"Salvage"==n.name}}]},"captain:Cap511":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"tech:T207":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"talent:E048":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"crew:C056":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"tech:T068":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1},canEquip:function(n,a,t){return a.hull<=3&&e("Improved Deflector Screens")(n,a,t)}},"weapon:W042":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1},intercept:{self:{cost:function(n,a,t,e){return a&&"Gorn Raider"!=a.class?o(n,a,t,e)+4:e}}}},"crew:C051":{cost:function(a,e,c){if(!e)return 3;var r=0;return $.each(n("upgradeSlots")(e),function(n,o){if(o.occupant&&o.occupant!=a&&"talent"==o.occupant.type){var s=t(o.occupant,"cost",e,c);if(0<s)return o.occupant,r=s,!1}}),0<r?2:3}},"tech:T066":{canEquip:function(n,a,t){return e("Agony Booth")(n,a,t)}},"talent:E045":{canEquip:function(n,a,t){return"I.S.S. Enterprise"==a.name}},"ship:S051":{upgradeSlots:[{type:["crew","tech"],rules:"This Upgrade costs -2 SP",intercept:{ship:{cost:function(n,a,t,e){return o(n,a,t,e)-2}}}}]},"captain:Cap310":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C050":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"talent:E044":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"tech:T065":{canEquip:function(n,a,t){return 0<=a.class.indexOf("Shuttlecraft")},canEquipFaction:function(n,t,e){return a.hasFaction(t,"federation",t,e)}},"tech:T064":{canEquip:function(n,a,t){return 0<=a.class.indexOf("Shuttlecraft")&&e("Warp Drive")(n,a,t)},canEquipFaction:function(n,t,e){return a.hasFaction(t,"federation",t,e)}},"ship:S047":{intercept:{ship:{cost:function(n,a,t,e){return p("tech",n,a)?o(n,a,t,e)-1:e}}}},"captain:Cap208":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"captain:Cap308":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"admiral:A013":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:3}},"crew:C273":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1},intercept:{ship:{skill:function(n,a,t,e){return n==a.captain?o(n,a,t,e)+3:e}}}},"tech:T056":{canEquip:function(n,a,t){return a.hull<=3},canEquipFaction:function(n,t,e){return a.hasFaction(t,"federation",t,e)||a.hasFaction(t,"bajoran",t,e)||a.hasFaction(t,"vulcan",t,e)}},"tech:T055":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1},intercept:{self:{cost:function(n,a,t,e){return a&&"Oberth Class"!=a.class?o(n,a,t,e)+5:e}}}},"tech:T054":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C046":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C045":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C044":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1},canEquipFaction:function(n,a,t){return s(a,"federation",a,t)||s(a,"bajoran",a,t)||s(a,"vulcan",a,t)},canEquip:function(n,a,t){return a.hull<=3}},"crew:C043":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1},upgradeSlots:[{type:["tech"]}]},"captain:Cap415":{intercept:{ship:{factionPenalty:function(n,a,t,e){return r(n)?0:e}}}},"crew:C049":{canEquip:e("Orion Tactical Officer")},"crew:C048":{canEquip:e("Andorian Helmsman")},"tech:T062":{canEquip:e("Enhanced Hull Plating"),canEquipFaction:function(n,t,e){return a.hasFaction(t,"mirror-universe",t,e)&&t.hull<=4}},"captain:Cap413":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"captain:Cap805":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1},upgradeSlots:[{},{type:["tech"]}]},"talent:E042":{canEquipFaction:function(n,a,t){return"Krenim Weapon Ship"==a.class&&a.captain&&("Annorax"==a.captain.name||"Obrist"==a.captain.name||0<=a.captain.name.indexOf("Krenim"))}},"tech:T061":{canEquip:function(n,a,t){return"Krenim Weapon Ship"==a.class}},"tech:T060":{canEquip:function(n,a,t){return"Krenim Weapon Ship"==a.class}},"tech:T059":{canEquip:function(n,a,t){return"Krenim Weapon Ship"==a.class}},"weapon:W036":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1},intercept:{self:{cost:function(n,a,t,e){return a&&"Krenim Weapon Ship"!=a.class?o(n,a,t,e)+6:e}}}},"weapon:W035":{canEquip:function(n,a,t){return"Krenim Weapon Ship"==a.class}},"captain:Cap410":{upgradeSlots:[{type:["talent"],rules:"Mauk-to'Vor Only at 3SP",canEquip:function(n,a,t){return"Mauk-to'Vor"==n.name},intercept:{ship:{cost:function(){return 3}}}}],factionPenalty:function(){return 0}},"crew:C041":{canEquip:e("Klingon Stealth Team"),canEquipFaction:function(n,t,e){return a.hasFaction(t,"klingon",t,e)}},"talent:E039":{canEquipFaction:function(n,t,e){return a.hasFaction(t,"klingon",t,e)&&a.hasFaction(t.captain,"klingon",t,e)}},"weapon:W033":{canEquip:e("Ambush Attack")},"captain:Cap804":{upgradeSlots:[{},{type:["crew"]}]},"crew:C038":{canEquipFaction:function(n,t,e){return a.hasFaction(t,"klingon",t,e)}},"tech:T049":{intercept:{self:{cost:function(n,t,e,c){return t&&!a.hasFaction(t,"klingon",t,e)?o(n,t,e,c)+5:c}}}},"talent:E038":{canEquip:function(n,t,e){return a.hasFaction(t,"klingon",t,e)&&(!t.captain||a.hasFaction(t.captain,"klingon",t,e))},intercept:{ship:{canEquipCaptain:function(n,t,e){return a.hasFaction(n,"klingon",t,e)}}}},"captain:Cap207":{canEquipFaction:function(n,t,e){return a.hasFaction(t,"bajoran",t,e)}},"admiral:A012":{canEquipAdmiral:function(n,t,e){return a.hasFaction(t,"bajoran",t,e)}},"captain:Cap411":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"federation",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"captain:Cap616":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"federation",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1},upgradeSlots:[{},{type:["crew"]}]},"talent:E041":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"federation",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"tech:T053":{type:"question",isSlotCompatible:function(n){return 0<=$.inArray("tech",n)||0<=$.inArray("weapon",n)||0<=$.inArray("crew",n)},canEquip:function(n,a,t){return"Bajoran Scout Ship"==a.class&&e("Assault Vessel Upgrade")(n,a,t)},intercept:{ship:{attack:function(n,a,t,e){return n==a?o(n,a,t,e)+1:e},shields:function(n,a,t,e){return n==a?o(n,a,t,e)+1:e}}}},"crew:C042":{canEquipFaction:function(n,t,e){return a.hasFaction(t,"bajoran",t,e)}},"talent:E040":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"federation",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"captain:Cap206":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C040":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"tech:T051":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"tech:T050":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C039":{canEquip:function(t,e,c){if(e.captain&&!a.hasFaction(e.captain,"romulan",e,c))return!1;var r=!0;return $.each(n("upgradeSlots")(e),function(n,t){t.occupant&&"crew"==t.occupant.type&&!a.hasFaction(t.occupant,"romulan",e,c)&&(r=!1)}),r},intercept:{ship:{canEquip:function(n,t,e,c){return!("crew"==n.type&&!a.hasFaction(n,"romulan",t,e))&&c},canEquipCaptain:function(n,t,e,c){return!!a.hasFaction(n,"romulan",t,e)&&c},cost:function(n,t,e,c){return"tech"!=n.type&&"weapon"!=n.type||a.hasFaction(n,"borg",t,e)||(c=o(n,t,e,c)-1),c},factionPenalty:function(n,t,e,c){return"captain"==n.type||r(n)&&a.hasFaction(n,"romulan",t,e)?0:c}}}},"tech:T048":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1},intercept:{self:{cost:function(n,a,t,e){return a&&"U.S.S. Prometheus"!=a.name?o(n,a,t,e)+4:e}}},canEquip:e("Regenerative Shielding")},"tech:T047":{canEquip:function(n,a,t){return"Prometheus Class"==a.class}},"weapon:W031":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1},intercept:{self:{attack:function(n,a,t,e){return a&&"Prometheus Class"==a.class?o(n,a,t,e)+1:e}}}},"weapon:W030":{canEquip:function(n,a,t){return"Prometheus Class"==a.class}},"tech:T015":{canEquip:e("Inverse Tachyon Pulse")},"captain:Cap305":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"independent",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"captain:Cap406":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"independent",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"talent:E025":{canEquipFaction:function(n,t,e){return a.hasFaction(t,"ferengi",t,e)&&a.hasFaction(t.captain,"ferengi",t,e)}},"talent:E024":{canEquipFaction:function(n,t,e){return a.hasFaction(t,"ferengi",t,e)&&a.hasFaction(t.captain,"ferengi",t,e)}},"weapon:W016":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"independent",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"weapon:W015":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"independent",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"crew:C025":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"independent",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1},canEquip:e("Tactical Officer")},"tech:T022":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"independent",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"tech:T021":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"independent",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"tech:T020":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"independent",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1},canEquip:e("Ferengi Probe")},"captain:Cap306":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1},intercept:{self:{skill:function(n,a,t,e){return a&&"Dauntless Class"==a.class?o(n,a,t,e)+5:e}}}},"tech:T033":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1},skill:0,upgradeSlots:[{type:["tech"]}],intercept:{self:{skill:function(n,a,t,e){return a&&!a.captain?2:e}}}},"tech:T032":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"tech:T031":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"tech:T030":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1},intercept:{self:{cost:function(n,a,t,e){return a&&"Dauntless Class"!=a.class?o(n,a,t,e)+5:e}}}},"tech:T029":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1},canEquip:e("Navigational Deflector")},"tech:T028":{canEquip:function(n,a,t){return"Dauntless Class"==a.class}},"tech:E030":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"talent:E029":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"question:Q001":{type:"question",isSlotCompatible:function(n){return 0<=$.inArray("tech",n)||0<=$.inArray("weapon",n)||0<=$.inArray("crew",n)||0<=$.inArray("talent",n)}},"weapon:W010":{canEquip:function(n,a,t){return"D'deridex Class"==a.class&&e("Additional Phaser Array")(n,a,t)}},"tech:T004":{intercept:{self:{cost:function(n,a,t,e){return a&&"D'deridex Class"!=a.class?o(n,a,t,e)+3:e}}}},"talent:E001":{canEquipFaction:function(n,t,e){return a.hasFaction(t,"romulan",t,e)&&t.captain&&a.hasFaction(t.captain,"romulan",t,e)}},"crew:C002":{intercept:{self:{cost:function(n,a,t,e){return a&&!s(a,"romulan",a,t)?o(n,a,t,e)+2:e}}},canEquip:e("Bridge Officer")},"captain:Cap504":{upgradeSlots:[{type:["talent"],rules:"Klingon Talents Only",canEquip:function(n,a,t){return s(n,"klingon",a,t)}}],intercept:{ship:{cost:function(n,a,t,e){return r(n)&&s(n,"klingon",a,t)&&(e=o(n,a,t,e)-1),e},factionPenalty:function(n,a,t,e){return r(n)&&!s(n,"klingon",a,t)&&(e=2*o(n,a,t,e)),e}}}},"talent:E002":{canEquipFaction:function(n,a,t){return s(a,"klingon",a,t)&&s(a.captain,"klingon",a,t)}},"crew:C004":{intercept:{self:{cost:function(n,a,t,e){return a&&!s(a,"klingon",a,t)?o(n,a,t,e)+3:e}}},canEquip:e("Tactical Officer")},"tech:T001":{upgradeSlots:u(2,{type:["crew"],rules:"Non-Borg, Combined cost 5 or less",faceDown:!0,canEquip:function(a,e,c,r){if(s(a,"borg",e,c))return!1;var o=0;return $.each(n("upgradeSlots")(e),function(n,a){r!=a&&a.occupant&&"Cryogenic Stasis"==a.source&&(o=t(a.occupant,"cost",e,c))}),o+t(a,"cost",e,c)<=5},intercept:{ship:{free:function(){return!0}}}})},"captain:Cap401":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"admiral:A002":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:3}},"captain:Cap505":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"admiral:A003":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:3}},"talent:E006":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"talent:E005":{canEquipFaction:function(n,a,t){return s(a,"federation",a,t)&&a.captain&&s(a.captain,"federation",a,t)},canEquipFaction:function(n,t,e){return a.hasFaction(t,"federation",t,e)&&a.hasFaction(t.captain,"federation",t,e)||a.hasFaction(t,"bajoran",t,e)&&a.hasFaction(t.captain,"bajoran",t,e)||a.hasFaction(t,"vulcan",t,e)&&a.hasFaction(t.captain,"vulcan",t,e)}},"talent:E004":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"weapon:W009":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"weapon:W008":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C006":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"weapon:W007":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"tech:T003":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"captain:Cap614":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"admiral:A010":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:3}},"talent:E033":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"crew:C033":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"federation",t,e)?0:a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"weapon:W025":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1},intercept:{self:{cost:function(n,a,t,e){return a&&"Intrepid Class"!=a.class?o(n,a,t,e)+4:e}}}},"tech:T042":{canEquip:function(n,a,t){return"Intrepid Class"==a.class&&e("Variable Geometry Pylons")(n,a,t)}},"ship:S013":{intercept:{ship:{factionPenalty:function(n,a,t,e){return"crew"==n.type||"tech"==n.type?0:e}}}},"captain:Cap201":{canEquipCaptain:function(n,a,t){return s(a,"ferengi",a,t)}},"admiral:A005":{canEquipAdmiral:function(n,a,t){return s(a,"ferengi",a,t)}},"captain:Cap304":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"independent",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"captain:Cap404":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"independent",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1},upgradeSlots:[{type:["talent"],rules:"Grand Nagus Only",canEquip:function(n){return"Grand Nagus"==n.name}}]},"talent:E016":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"independent",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"talent:E015":{canEquipFaction:function(n,a,t){return s(a,"ferengi",a,t)&&s(a.captain,"ferengi",a,t)}},"crew:C016":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"crew:C015":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"independent",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"crew:C014":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"independent",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"tech:T013":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"independent",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1},upgradeSlots:u(2,{type:["crew","tech"],rules:"Combined cost 4SP or less",canEquip:function(a,e,c,r){var o=0;return $.each(n("upgradeSlots")(e),function(n,a){r!=a&&a.occupant&&"Cargo Hold"==a.source&&(o=t(a.occupant,"cost",e,c))}),o+t(a,"cost",e,c)<=4}}),canEquip:function(n,a,t){return!!s(a,"ferengi",a,t)&&e("Cargo Hold")(n,a,t)}},"tech:T012":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"independent",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1},canEquip:e("Inversion Wave")},"weapon:W024":{canEquip:function(n,a,t){return"Species 8472 Bioship"==a.class}},"weapon:W023":{canEquip:function(n,a,t){return"Species 8472 Bioship"==a.class}},"tech:T041":{canEquip:function(n,a,t){return"Species 8472 Bioship"==a.class&&e("Biological Technology")(n,a,t)}},"tech:T040":{canEquip:function(n,a,t){return"Species 8472 Bioship"==a.class&&e("Biogenic Field")(n,a,t)}},"tech:T039":{canEquip:function(n,a,t){return"Species 8472 Bioship"==a.class}},"tech:T038":{canEquip:e("Fluidic Space"),intercept:{self:{cost:function(n,a,t,e){return a&&!s(a,"species-8472",a,t)?o(n,a,t,e)+5:e}}}},"captain:Cap203":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"admiral:A007":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:3}},"captain:Cap605":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"talent:E018":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C019":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C018":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"tech:T014":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1},canEquip:e("High Energy Sensor Sweep")},"weapon:W012":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1},upgradeSlots:u(2,{type:["weapon"]}),canEquip:e("Arsenal")},"question:Q002":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1},isSlotCompatible:function(n){return 0<=$.inArray("tech",n)||0<=$.inArray("weapon",n)||0<=$.inArray("crew",n)},intercept:{self:{cost:function(n,a,t,e){return!a||s(a,"federation",a,t)||s(a,"bajoran",a,t)||s(a,"vulcan",a,t)?e:o(n,a,t,e)+5}}},canEquip:function(n,a,t){return(!a.classData||!a.classData.rearArc)&&4<=a.hull}},"captain:Cap204":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"admiral:A009":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:3}},"talent:E026":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C026":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"weapon:W017":{canEquip:function(n,a,t){return!(a&&!s(a,"federation",a,t)&&!s(a,"bajoran",a,t)&&!s(a,"vulcan",a,t))&&e("Dual Phaser Banks")(n,a,t)},intercept:{self:{cost:function(n,a,t,e){return a&&"Constitution Class"!=a.class&&"Constitution Refit Class"!=a.class?o(n,a,t,e)+3:e}}}},"question:Q003":{isSlotCompatible:function(n){return 0<=$.inArray("weapon",n)||0<=$.inArray("crew",n)},intercept:{self:{cost:function(n,a,t,e){return a&&!s(a,"federation",a,t)?o(n,a,t,e)+5:e}}},canEquip:function(n,a,t){return("Constitution Class"==a.class||"Constitution Refit Class"==a.class)&&e("Astrogator")(n,a,t)}},"captain:Cap303":{upgradeSlots:[{type:["talent"],rules:"Secret Research Only",canEquip:function(n,a,t){return"Secret Research"==n.name}}]},"talent:E009":{intercept:{self:{cost:function(n,a,t,e){return a&&"Romulan Science Vessel"!=a.class?o(n,a,t,e)+5:e}}}},"tech:T008":{canEquip:function(n,a,t){return a&&"Romulan Science Vessel"==a.class}},"tech:T007":{intercept:{self:{cost:function(n,a,t,e){return a&&"Romulan Science Vessel"!=a.class?o(n,a,t,e)+5:e}}}},"tech:T006":{intercept:{self:{cost:function(n,a,t,e){return a&&"Romulan Science Vessel"!=a.class?o(n,a,t,e)+5:e}}},canEquip:e("Signal Amplifier")},"tech:T010":{canEquip:e("Warp Core Ejection System")},"tech:T009":{canEquip:function(n,a,t){return a&&"Romulan Science Vessel"==a.class}},"captain:Cap701":{intercept:{ship:{cost:function(n,a,t,e){return r(n)&&s(n,"klingon",a,t)?o(n,a,t,e)-1:e}}}},"talent:E013":{canEquipFaction:function(n,a,t){return s(a,"klingon",a,t)&&s(a.captain,"klingon",a,t)}},"crew:C012":{intercept:{self:{factionPenalty:function(n,a,t,e){return s(a,"klingon",a,t)?0:e}}}},"crew:C013":{intercept:{ship:{skill:function(n,a,t,e){return n==a.captain?o(n,a,t,e)+(s(n,"klingon",a,t)?3:1):e}}}},"captain:Cap407":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"captain:Cap507":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1},upgradeSlots:[{type:["tech"],rules:"Costs -1 SP",intercept:{ship:{cost:function(n,a,t,e){return o(n,a,t,e)-1}}}}]},"crew:C031":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C030":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C029":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"tech:T027":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1},canEquip:e("Parametallic Hull Plating"),intercept:{self:{cost:function(n,a,t,e){return!a||s(a,"federation",a,t)||s(a,"bajoran",a,t)||s(a,"vulcan",a,t)?e:o(n,a,t,e)+3}}}},"tech:T026":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1},canEquip:e("Immersion Shielding"),intercept:{self:{cost:function(n,a,t,e){return!a||s(a,"federation",a,t)||s(a,"bajoran",a,t)||s(a,"vulcan",a,t)?e:o(n,a,t,e)+3}},ship:{shields:function(n,a,t,e){return n==a?o(n,a,t,e)+1:e}}}},"tech:T025":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1},canEquip:e("Unimatrix Shielding"),intercept:{self:{cost:function(n,a,t,e){return!a||s(a,"federation",a,t)||s(a,"bajoran",a,t)||s(a,"vulcan",a,t)?e:o(n,a,t,e)+4}},ship:{shields:function(n,a,t,e){return n==a?o(n,a,t,e)+2:e}}}},"weapon:W020":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"weapon:W019":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1},intercept:{self:{range:function(n,a,t,e){return a&&0<=a.class.indexOf("Shuttlecraft")?"1 - 2":e}}}},"captain:Cap724":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"talent:E134":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C217":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1},upgradeSlots:u(3,{type:["tech"],rules:"FEDERATION TECH UPGRADES, 4SP OR LESS",faceDown:!0,intercept:{ship:{cost:function(){return 0},factionPenalty:function(){return 0},canEquip:function(n,e,c,r){return console.log(!a.hasFaction(n,"federation",e,c),4<t(n,"cost",e,c)),!!(a.hasFaction(n,"federation",e,c)&&5>t(n,"cost",e,c))&&r}}}})},"crew:C216":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C215":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1},intercept:{ship:{cost:{priority:100,fn:function(n,a,t,e){return p("tech",n,a)&&(e=o(n,a,t,e),e-=1),e}}}}},"tech:T104":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1},canEquip:function(n,a,t){return e("Navigational Station")(n,a,t)}},"tech:T104":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"weapon:W123":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"captain:Cap535":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"independent",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"crew:C228":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"independent",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"crew:C228":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"independent",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1},canEquip:function(n,a,t){return e("Kazon Gurad")(n,a,t)}},"weapon:W129":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"independent",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"weapon:W128":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"independent",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"weapon:W127":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"independent",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"question:Q004":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"independent",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1},type:"question",isSlotCompatible:function(n){return 0<=$.inArray("tech",n)||0<=$.inArray("weapon",n)||0<=$.inArray("crew",n)},canEquipFaction:function(n,t,e){return console.log(t),!a.hasFaction(t,"borg",t,e)},canEquip:function(n,a,t){return e("Unremarkable Species")(n,a,t)},intercept:{self:{cost:function(n,a,t,e){return a&&!s(a,"kazon",a,t)?o(n,a,t,e)+5:e}}},upgradeSlots:[{type:function(n,a){return l(n,a)}}]},"squadron:D023":{canEquip:function(n,a,t){return e("Cover Fire")(n,a,t)}},"squadron:D021":{canEquip:function(n,a,t){return e("Torpedo Attack")(n,a,t)}},"squadron:D018":{canEquip:function(n,a,t){return e("Support Ship")(n,a,t)}},"captain:Cap307":{upgradeSlots:[{type:["talent"],rules:"Tal Shiar Only",canEquip:function(n){return"Tal Shiar"==n.name}}]},"talent:E034":{canEquipFaction:function(n,a,t){return s(a.captain,"romulan",a,t)}},"captain:Cap205":{canEquipCaptain:function(n,a,t){return s(a,"species-8472",a,t)}},"weapon:W022":{canEquip:function(n,a,t){return!!s(a,"species-8472",a,t)&&e("Energy Weapon")(n,a,t)}},"tech:T037":{canEquip:function(n,a,t){return!!s(a,"species-8472",a,t)&&e("Neuro Peptides")(n,a,t)}},"tech:T036":{canEquip:function(n,a,t){return s(a,"species-8472",a,t)}},"tech:T035":{canEquip:function(n,a,t){return!!s(a,"species-8472",a,t)&&e("Resistant Hull")(n,a,t)}},"weapon:W029":{canEquip:e("Aft Weapons Array"),intercept:{self:{cost:function(n,a,t,e){return a&&"Cardassian Galor Class"!=a.class?o(n,a,t,e)+5:e}}}},"tech:T046":{canEquip:e("High Energy Subspace Field"),intercept:{self:{cost:function(n,a,t,e){return a&&!s(a,"dominion",a,t)?o(n,a,t,e)+5:e}}}},"captain:Cap405":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"talent:E023":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C024":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"tech:T019":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"weapon:W014":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1},canEquip:function(n,a,c){return!(3<t(a,"attack",a,c))&&e("Upgraded Phasers")(n,a,c)},intercept:{self:{cost:function(n,a,t,e){return!a||s(a,"federation",a,t)||s(a,"bajoran",a,t)||s(a,"vulcan",a,t)?e:o(n,a,t,e)+5}}}},"tech:T002":{canEquip:e("Reactor Core")},"tech:T034":{canEquip:e("Targeting Systems")},"crew:C032":{intercept:{self:{cost:function(n,a,t,e){return a&&!s(a,"klingon",a,t)?o(n,a,t,e)+5:e}}}},"captain:Cap611":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"federation",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"talent:E027":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"federation",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1},canEquip:function(n,a,e){return 3>=t(a,"hull",a,e)}},"crew:C027":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"federation",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1},canEquip:function(n,a,t){return s(a,"federation",a,t)||s(a,"bajoran",a,t)||s(a,"vulcan",a,t)}},"weapon:W018":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"federation",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1},canEquip:function(n,a,e){return 3>=t(a,"hull",a,e)},intercept:{self:{cost:function(n,a,t,e){return a&&"Bajoran Interceptor"!=a.class?o(n,a,t,e)+5:e}}}},"tech:T023":{canEquip:function(n,a,t){return"Bajoran Interceptor"==a.class&&e("Navigational Sensors")(n,a,t)}},"captain:Cap610":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"independent",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"weapon:W064":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"independent",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"talent:E022":{canEquipFaction:function(n,a,t){return s(a,"kazon",a,t)&&s(a.captain,"kazon",a,t)}},"crew:C023":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"independent",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"tech:T018":{canEquipFaction:function(n,a,t){return s(a,"kazon",a,t)}},"captain:Cap403":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"federation",t,e)?0:1}},"talent:E010":{canEquipFaction:function(n,a,t){return s(a,"vulcan",a,t)&&s(a.captain,"vulcan",a,t)}},"crew:C008":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"federation",t,e)?0:1},intercept:{self:{cost:function(n,a,t,e){return a&&!s(a,"vulcan",a,t)?o(n,a,t,e)+4:e}}}},"weapon:W011":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"federation",t,e)?0:1}},"tech:T011":{canEquip:function(n,a,t){return!!s(a,"vulcan",a,t)&&e("Power Distribution Net")(n,a,t)}},"captain:Cap608":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"independent",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"talent:E021":{canEquipFaction:function(n,a,t){return s(a,"ferengi",a,t)&&s(a.captain,"ferengi",a,t)}},"crew:C022":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"independent",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"weapon:W013":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"independent",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"tech:T017":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"independent",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"captain:Cap815":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"talent:E137":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C227":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C226":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C225":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C224":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C223":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"tech:T112":{canEquip:function(n,a,t){return e("Counter Measures")(n,a,t)},intercept:{self:{cost:function(n,a,t,e){return a&&"Cardassian ATR-4107"!=a.class?o(n,a,t,e)+5:e}}}},"question:Q005":{isSlotCompatible:function(n){return 0<=$.inArray("tech",n)||0<=$.inArray("weapon",n)||0<=$.inArray("crew",n)},upgradeSlots:[{type:function(n,a){return l(n,a)}},{type:["crew"]}],canEquip:function(n,a,t){return e("Maintenance Crew")(n,a,t)}},"question:Q021":{canEquipFaction:function(n,a,t){return s(a,"kazon",a,t)&&s(a.captain,"kazon",a,t)},isSlotCompatible:function(n){return 0<=$.inArray("tech",n)||0<=$.inArray("weapon",n)||0<=$.inArray("crew",n)},upgradeSlots:[{type:function(n,a){return l(n,a)}},{type:["tech"]}],intercept:{ship:{skill:function(n,a,t,e){return n==a.captain?o(n,a,t,e)+2:e}}}},"captain:Cap219":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"federation",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1},upgradeSlots:u(2,{type:["talent"],rules:"Bajoran upgrades",faceDown:!0,intercept:{ship:{canEquip:function(n,t,e,c){return!!a.hasFaction(n,"bajoran",t,e)&&c}}}})},"talent:E140":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"federation",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"talent:E139":{canEquipFaction:function(n,t,e){return t.captain&&a.hasFaction(t.captain,"bajoran",t,e)&&a.hasFaction(t,"bajoran",t,e)}},"talent:E138":{canEquipFaction:function(n,t,e){return t.captain&&a.hasFaction(t.captain,"bajoran",t,e)&&a.hasFaction(t,"bajoran",t,e)}},"tech:T110":{canEquip:function(n,a,t){return e("TACHYON EDDIES")(n,a,t)},canEquipFaction:function(n,a,t){return a&&"BAJORAN SOLAR SAILOR"==a.class}},"tech:T109":{canEquip:function(n,a,t){return e("MAINSAILS")(n,a,t)},canEquipFaction:function(n,a,t){return a&&"BAJORAN SOLAR SAILOR"==a.class}},"tech:T108":{canEquipFaction:function(n,a,t){return a&&"BAJORAN SOLAR SAILOR"==a.class}},"captain:Cap612":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"independent",t,e)?0:1}},"talent:E028":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"independent",t,e)?0:1}},"crew:C028":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"independent",t,e)?0:1}},"weapon:W019":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"independent",t,e)?0:1},intercept:{self:{cost:function(n,a,t,e){return a&&!s(a,"xindi",a,t)?o(n,a,t,e)+5:e}}}},"tech:T024":{canEquip:function(n,a,t){return!!s(a,"xindi",a,t)&&e("Phase Deflector Pulse")(n,a,t)}},"captain:Cap508":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"independent",t,e)?0:1}},"talent:E036":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"independent",t,e)?0:1},upgradeSlots:u(2,{type:["weapon"]})},"crew:C036":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"independent",t,e)?0:1}},"weapon:W028":{canEquipFaction:function(n,a,t){return s(a,"xindi",a,t)}},"tech:T045":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"independent",t,e)?0:1}},"captain:Cap537":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"independent",t,e)?0:1}},"talent:E144":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"independent",t,e)?0:1}},"crew:C237":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"independent",t,e)?0:1}},"weapon:W141":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"independent",t,e)?0:1},attack:function(n,a,t,e){return a&&"Xindi Reptilian Warship"==a.class?o(n,a,t,e)+1:e}},"tech:T122":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"independent",t,e)?0:1}},"captain:temporal_cold_war_vosk":{factionPenalty:function(n,a,t,e){return"talent"==n.type?0:e}},"tech:T126":{intercept:{self:{cost:function(n,t,e,c){return t&&!a.hasFaction(t,"mirror-universe",t,e)?o(n,t,e,c)+4:c}}}},"tech:T103":{canEquip:function(n,a,t){return e("Distress Signal")(n,a,t)}},"tech:T102":{canEquip:function(n,a,t){return e("Gravition Field Generator")(n,a,t)}},"tech:T101":{canEquip:function(n,a,t){return e("Self Destruct Sequence")(n,a,t)}},"captain:Cap434":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1},upgradeSlots:[{},{type:["crew"]}]},"talent:E136":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1},canEquipFaction:function(n,a,t){return s(a,"federation",a,t)&&s(a.captain,"federation",a,t)||s(a,"bajoran",a,t)&&s(a.captain,"bajoran",a,t)||s(a,"vulcan",a,t)&&s(a.captain,"vulcan",a,t)||s(a,"federation",a,t)&&s(a.captain,"bajoran",a,t)||s(a,"federation",a,t)&&s(a.captain,"vulcan",a,t)||s(a,"vulcan",a,t)&&s(a.captain,"federation",a,t)||s(a,"vulcan",a,t)&&s(a.captain,"bajoran",a,t)||s(a,"bajoran",a,t)&&s(a.captain,"federation",a,t)||s(a,"bajoran",a,t)&&s(a.captain,"vulcan",a,t)}},"crew:C222":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C221":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C220":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C219":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"weapon:W126":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"captain:Cap647:":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"talent:E135":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"crew:C218":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"weapon:W125":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"weapon:W124":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"tech:T107":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"tech:T106":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"captain:Cap816":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"independent",t,e)?0:1}},"talent:E142":{canEquip:function(n,a,t){return a&&"Xindi Weapon"==a.class}},"crew:C230":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"independent",t,e)?0:1},intercept:{ship:{cost:function(n,t,e,c){return p("weapon",n,t)&&a.hasFaction(n,"xindi",t,e)?o(n,t,e,c)-1:c}}}},"weapon:W136":{canEquip:function(n,a,t){return a&&"Xindi Weapon"==a.class}},"weapon:W135":{canEquip:function(n,a,t){return a&&"Xindi Weapon"==a.class}},"tech:T117":{canEquip:function(n,t,e){return a.hasFaction(t,"xindi",t,e)}},"tech:T116":{canEquip:function(n,a,t){return a&&"Xindi Weapon"==a.class}},"captain:Cap329":{intercept:{ship:{cost:function(e,c,r,o){var s=0,u=0;return $.each(r.ships,function(n,t){a.hasFaction(t,"romulan",t,r)&&(u+=1)}),u<2?o:($.each(n("upgradeSlots")(c),function(n,o){if(o.occupant&&o.occupant!=e&&"talent"==o.occupant.type&&a.hasFaction(o.occupant,"romulan",c,r)){var u=t(o.occupant,"cost",c,r);if(0<u)return o.occupant,s=u,!1}}),0<s?o-1:o)}}}},"weapon:W134":{canEquip:function(n,a,t){return e("CHARGING WEAPONS")(n,a,t)}},"tech:T115":{canEquip:function(n,a,t){return e("SELF REPAIR TECHNOLOGY")(n,a,t)},canEquipFaction:function(n,t,e){return a.hasFaction(t,"romulan",t,e)}},"weapon:W139":{canEquip:function(n,a,t){return e("Stand By Torpedoes")(n,a,t)}},"crew:C234":{intercept:{self:{canEquip:function(n,a,t){if(a&&a.classData&&a.classData.maneuvers){for(i=1;i<a.classData.maneuvers.max;i++)if(void 0!==a.classData.maneuvers[i].about)return!0}return!1}},ship:{cost:function(n,t,e,c){return t&&!a.hasFaction(t,"klingon",t,e)?o(n,t,e,c)+5:c}}}},"crew:C233":{canEquip:function(n,a,t){return e("Klingon Navigator")(n,a,t)}},"tech:T121":{intercept:{self:{cost:function(n,t,e,c){return t&&!a.hasFaction(t,"romulan",t,e)?o(n,t,e,c)+5:c},canEquip:function(n,a,t){return e("Prototype Cloaking Device")(n,a,t)}}}},"crew:C235":{upgradeSlots:u(1,{type:["tech"],intercept:{ship:{cost:function(n,a,t,e){return(e=o(n,a,t,e)-1)<1&&(e=1),e},canEquip:function(n,t,e,c){return!!a.hasFaction(n,"romulan",t,e)&&c}}}})},"crew:C236":{intercept:{self:{canEquip:function(n,a,t){return!!e("Reman Bodyguards")(n,a,t)||!(!e("Reman Bodyguards")(n,a,t)||!a.captain||"Vrax"!=a.captain.name)},cost:function(n,a,t,e){return a&&a.captain&&"Vrax"==a.captain.name?o(n,a,t,e)-2:e}}}},"weapon:W140":{canEquip:function(n,a,t){return e("Disruptor Banks")(n,a,t)}},"captain:Cap536":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C231":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"weapon:W138":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"weapon:W137":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"tech:T118":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"tech:T119":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"captain:Cap332":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"talent:E145":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1},canEquip:function(n,a,t){return a&&!!~a.actions.indexOf("battlestations")}},"crew:C238":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"question:Q007":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1},isSlotCompatible:function(n){return 0<=$.inArray("tech",n)||0<=$.inArray("weapon",n)},canEquip:function(n,a,t){return e("Auxiliary Control Room")(n,a,t)}},"question:Q006":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1},isSlotCompatible:function(n){return 0<=$.inArray("tech",n)||0<=$.inArray("weapon",n)||0<=$.inArray("crew",n)},canEquip:function(n,a,t){return e("Automated Distress Beacon")(n,a,t)}},"captain:Cap725":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1},intercept:{ship:{factionPenalty:function(n,a,t,e){return r(n)?0:e},cost:function(a,t,e,c){var r=!1;if("ship"!=a.type){var s=[],u=n("upgradeSlots")(t);if($.each(u,function(n,a){a.occupant&&(5==a.occupant.cost||6==a.occupant.cost)&&s.push(a)}),s.length){3<s.length&&(s.sort(function(n,a){return a.occupant.cost-n.occupant.cost}),s=s.slice(0,3));for(var l=0;l<s.length;l++)if(a.id==s[l].occupant.id){r=!0;break}}}return r?4:o(a,t,e,c)}}}},"talent:E148":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"talent:E147":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"crew:C240":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"weapon:W143":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"captain:Cap539":{upgradeSlots:[{type:["talent"],rules:"Klingon only",canEquip:function(n,t,e,c){return a.hasFaction(n,"klingon",t,e)}}]},"tech:T124":{canEquip:function(n,a,t){return e("Emergency Power")(n,a,t)}},"weapon:W142":{intercept:{self:{attack:function(n,a,t,e){return a&&"Vor'cha Class"==a.class?o(n,a,t,e)+1:e}}}},"talent:E151":{canEquip:function(n,a,t){return a&&"D7 Class"==a.class}},"crew:C243":{canEquip:function(n,a,t){return e("Romulan Technical Officer")(n,a,t)}},"tech:T127":{canEquip:function(n,a,t){return e("Impulse Drive")(n,a,t)}},"talent:E153":{rules:"Borg Queen only",canEquip:function(n,a,t){return a.captain&&"Borg Queen"==a.captain.name}},"borg:B017":{rules:"Borg Cube only",canEquip:function(n,a,t){return a&&"Borg Cube"==a.class}},"question:Q008":{canEquip:e("Borg Support Vehicle Token"),factionPenalty:function(n,a,t){return n&&"Borg Support Vehicle Token"==n.name?0:1},isSlotCompatible:function(n){return 0<=$.inArray("tech",n)||0<=$.inArray("weapon",n)||0<=$.inArray("crew",n)||0<=$.inArray("borg",n)},canEquip:function(n,a,t){return a.hull<=7},upgradeSlots:[{type:function(n,a){return l(n,a)}}],intercept:{ship:{cost:function(n,a,t,e){var c=0;return"ship"==n.type&&"Borg Sphere"==a.class?c=15:"ship"==n.type&&(c=10),e-c}}}},"tech:T128":{rules:"Borg ship only",canEquipFaction:function(n,t,e){return a.hasFaction(t,"borg",t,e)}},"captain:Cap727":{upgradeSlots:[{},{type:["crew"]}]},"captain:Cap821":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1},intercept:{ship:{cost:function(n,t,e,c){return p("crew",n,t)&&a.hasFaction(n,"federation",t,e)||a.hasFaction(n,"bajoran",t,e)||a.hasFaction(n,"vulcan",t,e)?o(n,t,e,c)-1:c}}}},"crew:C252":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C249":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C248":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1},upgradeSlots:[{type:["tech","weapon"]}]},"crew:C247":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"captain:Cap907":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C251":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C250":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"weapon:W146":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1},upgradeSlots:[{type:["weapon"],rules:"Photon Torpedoes Only",canEquip:function(n){return 0<=n.name.indexOf("Photon Torpedoes")}}]},"tech:T129":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"captain:Cap436":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"talent:E155":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"weapon:W149":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1},canEquip:function(n,a,t){return e("Additional Phaser Arrays")(n,a,t)}},"weapon:W148":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"tech:T132":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"tech:T131":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1},canEquip:function(n,a,t){return e("High-Capacty Deflector Shield Grid")(n,a,t)}},"question:Q017":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1},isSlotCompatible:function(n){return 0<=$.inArray("weapon",n)||0<=$.inArray("crew",n)},upgradeSlots:[{type:["tech"]}]},"captain:Cap649":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"talent:E154":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"weapon:W147":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"tech:T130":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"question:Q009":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1},isSlotCompatible:function(n){return 0<=$.inArray("tech",n)||0<=$.inArray("weapon",n)||0<=$.inArray("crew",n)},upgradeSlots:[{type:function(n,a){return l(n,a)}}],canEquip:function(n,a,t){return e("Delta Shift")(n,a,t)}},"captain:Cap220":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C257":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"tech:T137":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1},rules:"Only one per ship",canEquip:e("Holo-Communicator")},"tech:T136":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1},rules:"Only one per ship",canEquip:e("Full Reverse")},"tech:T135":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1},rules:"Only one per ship",canEquip:e("Deflector Control")},"tech:T134":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1},rules:"Only one per ship",canEquip:e("Resonance Burst")},"weapon:W151":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"tech:T133":{canEquip:function(n,a,t){return e("Control Central")(n,a,t)}},"weapon:W150":{canEquip:function(n,a,t){return e("Main Batteries")(n,a,t)},upgradeSlots:[{type:["weapon"]}]},"captain:Cap333":{canEquip:function(n,a,t){return"Kuvah'Magh"==n.name},intercept:{ship:{cost:function(n,a,t,e){return"Kuvah'Magh"==n.name?o(n,a,t,e)-2:e}}}},"captain:Cap728":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"independent",t,e)?0:1}},"talent:E161":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"independent",t,e)?0:1},upgradeSlots:[{}].concat(u(1,{type:["weapon"],rules:"-2 SP if Xindi",intercept:{ship:{cost:function(n,t,e,c){return a.hasFaction(n,"xindi",t,e)?o(n,t,e,c)-2:c}}}}))},"talent:E160":{canEquipFaction:function(n,a,t){return s(a,"xindi",a,t)&&s(a.captain,"xindi",a,t)}},"crew:C259":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"independent",t,e)?0:1},intercept:{self:{cost:function(n,a,t,e){return a&&0>a.class.indexOf("Xindi")?o(n,a,t,e)+5:e},canEquip:function(n,a,t){return e("Insecetoid Raiding Party")(n,a,t)}}}},"weapon:W153":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"independent",t,e)?0:1},intercept:{self:{cost:function(n,a,t,e){return a&&0>a.class.indexOf("Xindi")?o(n,a,t,e)+5:e}}}},"weapon:W152":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"independent",t,e)?0:1}},"tech:T139":{canEquip:function(n,t,c){return a.hasFaction(t,"xindi",t,c)&&e("Hatchery")},upgradeSlots:[{type:["crew"],source:"Face-down Xindi (free)",intercept:{ship:{cost:function(n,a,t,e){return 0},canEquip:function(n,t,e,c){return!!a.hasFaction(n,"xindi",t,e)&&c}}}},{type:["crew"]}]},"tech:T140":{rules:"Only one per ship",canEquip:e("Auxiliary Power to Shields")},"question:Q016":{isSlotCompatible:function(n){return 0<=$.inArray("tech",n)||0<=$.inArray("weapon",n)||0<=$.inArray("crew",n)||0<=$.inArray("talent",n)},rules:"Only one per ship",canEquip:e("Course Change")},"crew:C262":{upgradeSlots:[{type:["talent"]}],canEquip:function(n,a,t){return a.captain&&"Cap439"==a.captain.id},intercept:{ship:{skill:function(n,a,t,e){return n==a.captain?o(n,a,t,e)+4:e}}}},"crew:C261":{upgradeSlots:[{type:["talent"]}],canEquip:function(n,a,t){return a.captain&&"Cap438"==a.captain.id},intercept:{ship:{skill:function(n,a,t,e){return n==a.captain?o(n,a,t,e)+4:e}}}},"tech:T141":{rules:"Only one per ship",canEquip:e("Aft Shields")},"captain:Cap542":{intercept:{ship:{type:function(n,a,t,e){return 0<=$.inArray("tech",e)||0<=$.inArray("weapon",e)||0<=$.inArray("crew",e)?e.concat(["ship-resource"]):e}}}},"ship-resource:Rs01":{upgradeSlots:[{type:["talent","tech","weapon","crew"]}]},"talent:E166":{canEquipFaction:function(n,a,t){return(s(a,"romulan",a,t)||s(a,"klingon",a,t))&&(s(a.captain,"romulan",a,t)||s(a.captain,"klingon",a,t))}},"tech:T142":{rules:"Only one per ship",canEquip:e("Tachyon Pulse")},"captain:Cap221":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"independent",t,e)?0:1}},"captain:Cap440":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"independent",t,e)?0:1}},"admiral:A029":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"independent",t,e)?0:3}},"weapon:W154":{intercept:{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"independent",t,e)?0:1},self:{attack:function(n,a,t,e){return a&&"Xindi Aquatic Cruiser"==a.class?o(n,a,t,e)+1:e}}}},"tech:T145":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"independent",t,e)?0:1},canEquip:e("Biometric Hologram"),canEquipFaction:function(n,t,e){return t.captain&&a.hasFaction(t,"xindi",t,e)&&a.hasFaction(t.captain,"xindi",t,e)}},"tech:T144":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"independent",t,e)?0:1},intercept:{self:{cost:function(n,a,t,e){return a&&0>a.class.indexOf("Xindi")?o(n,a,t,e)+5:e}}}},"tech:T143":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"independent",t,e)?0:1},intercept:{self:{cost:function(n,a,t,e){return a&&0>a.class.indexOf("Xindi")?o(n,a,t,e)+4:e}}}},"crew:C265":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"independent",t,e)?0:1}},"talent:E167":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"independent",t,e)?0:1},canEquipFaction:function(n,t,e){return t.captain&&a.hasFaction(t,"xindi",t,e)&&a.hasFaction(t.captain,"xindi",t,e)}},"captain:Cap803":{intercept:{ship:{cost:{priority:100,fn:function(a,t,e,c){var r=0;if("ship"==a.type)r=2;else{var s=[],u=n("upgradeSlots")(t);if($.each(u,function(n,a){a.occupant&&s.push(a)}),s.length){3<s.length&&(s.sort(function(n,a){return a.occupant.cost-n.occupant.cost}),s=s.slice(0,3));for(var l=0;l<s.length;l++)if(a.id==s[l].occupant.id){r=1;break}}}return o(a,t,e,c)-r}}}}},"talent:E168":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"tech:T146":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1},rules:"Only one per ship",canEquip:e("Transporter")},"weapon:W155":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1},attack:0,canEquip:function(n,t,e){return a.hasFaction(t,"federation",t,e)||a.hasFaction(t,"bajoran",t,e)||4<=t.hull},intercept:{self:{attack:function(n,a,e,c){return a?t(a,"attack",a,e)-1:c},cost:function(n,a,e,c){return a?o(n,a,e,c)+t(a,"attack",a,e):c}}}},"crew:C266":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1},upgradeSlots:[{type:["weapon"]},{type:["weapon"]}]},"captain:Cap441":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"independent",t,e)?0:1}},"captain:Cap801":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"independent",t,e)?0:1},intercept:{ship:{type:function(n,a,t,e){return 0<=$.inArray("tech",e)||0<=$.inArray("crew",e)?e.concat(["weapon"]):e},cost:function(n,a,t,e){return p("weapon",n,a)?o(n,a,t,e)-1:e}}}},"talent:E169":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"independent",t,e)?0:1}},"weapon:W157":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"independent",t,e)?0:1},self:{attack:function(n,a,t,e){return a&&"Xindi Reptilian Warship"==a.class?o(n,a,t,e)+1:e}}},"weapon:W156":{attack:0,canEquip:function(n,t,e){return a.hasFaction(t,"xindi",t,e)},intercept:{self:{attack:function(n,a,e,c){return a?t(a,"attack",a,e)+1:c},cost:function(n,a,e,c){return a?o(n,a,e,c)+t(a,"attack",a,e):c}}}},"crew:C267":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"independent",t,e)?0:1},upgradeSlots:[{type:["tech"]}],canEquipFaction:function(n,t,e){return a.hasFaction(t,"xindi",t,e)},canEquip:e("Reptilian Analysis Team")},"tech:T148":{canEquip:function(n,a,t){return"Xindi Reptilian Warship"==a.class}},"tech:T147":{canEquip:e("Sensor Encoders"),canEquip:function(n,a,t){return"Xindi Reptilian Warship"==a.class}},"weapon:W158":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"captain:Cap408":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"talent:E170":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"tech:T149":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1},canEquip:e("Impulse Thrusters")},"weapon:W159":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C271":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"captain:Cap335":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1},upgradeSlots:[{type:["talent"],rules:"Captain's Discretion",canEquip:function(n,a,t,e){return"Captain's Discretion"==n.name&&e}}]},"talent:E171":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C276":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C275":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C274":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"tech:T152":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1},upgradeSlots:[{type:["crew"]}],canEquip:e("Comm Station")},"tech:T1511":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1},canEquip:e("Close-Range Scan")},"tech:T150":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1},name:"Genesis Effect",range:!1,upgradeSlots:[{type:["crew"],rules:"Crew, 5SP or less",intercept:{ship:{free:function(){return!0},canEquip:function(n,a,e,c){return!(5<t(n,"cost",a,e))&&c}}}}]},"crew:C273":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1},intercept:{ship:{skill:function(n,a,t,e){return n==a.captain?o(n,a,t,e)+3:e}}}},"talent:E172":{upgradeSlots:u(3,{type:["talent"],rules:"Klingon Talent Only",faceDown:!0,intercept:{ship:{cost:function(){return 0},factionPenalty:function(){return 0},canEquip:function(n,t,e,c){return!!a.hasFaction(n,"klingon",t,e)&&c}}}})},"crew:C278":{upgradeSlots:[{type:["crew"]}]},"tech:T154":{canEquip:e("Dispersive Armor")},"question:Q010":{isSlotCompatible:function(n){return 0<=$.inArray("tech",n)||0<=$.inArray("weapon",n)}},"crew:C280":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"question:Q011":{isSlotCompatible:function(n){return 0<=$.inArray("tech",n)||0<=$.inArray("weapon",n)||0<=$.inArray("crew",n)},canEquip:e("Captured"),upgradeSlots:[{type:function(n,a){return l(n,a)}}],intercept:{ship:{factions:function(n,a,t,e){return n==a&&0>e.indexOf("independent")?e.concat(["independent"]):e}}}},"weapon:W162":{canEquip:e("Plasma Pulse")},"crew:C279":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"tech:T155":{canEquip:function(n,a,t){return 4<=a.hull}},"tech:T157":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"ship:S267":{intercept:{ship:{canEquipCaptain:function(n,a,t){return"Gareb"==n.name||"Jhamel"==n.name||"Romulan Drone Pilot"==n.name}}}},"ship:S266":{intercept:{ship:{canEquipCaptain:function(n,a,t){return"Gareb"==n.name||"Jhamel"==n.name||"Romulan Drone Pilot"==n.name}}}},"captain:Cap336":{canEquipCaptain:function(n,a,t){return"Romulan Drone Ship"==a.class}},"weapon:W166":{name:"Triphasic Emitters",range:!1,upgradeSlots:[{type:["weapon"],rules:"Non-Borg, 5SP or less",intercept:{ship:{free:function(){return!0},canEquip:function(n,a,e,c){return!(0==n.printedValue||s(n,"borg",a,e)||5<t(n,"cost",a,e))&&c}}}}]},"tech:T160":{canEquip:function(n,a,t){return"Romulan Drone Ship"==a.class},canEquip:e("Repair Protocol")},"weapon:W165":{canEquip:e("Tellarite Disruptor Banks"),factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"tech:T159":{canEquip:function(n,a,t){return"Romulan Drone Ship"==a.class},canEquip:e("Evasive Protocol")},"tech:T158":{canEquip:function(n,a,t){return"Romulan Drone Ship"==a.class},canEquip:e("Disguise Protocol")},"captain:Cap818":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"captain:Cap655":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"captain:Cap656":{upgradeSlots:u(1,{type:["talent"],rules:"Klingon And Romulan Talents Cost Exactly 3 SP",faceDown:!0,intercept:{ship:{cost:{priority:100,fn:function(n,a,t,e){return s(n,"klingon",a,t)||s(n,"romulan",a,t)?3:e}},factionPenalty:function(n,a,t,e){return s(n,"klingon",a,t)||s(n,"romulan",a,t)?0:e}}}})},"captain:Cap443":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"talent:E175":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"talent:E176":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"talent:E174":{canEquipFaction:function(n,t,e){return t.captain&&a.hasFaction(t.captain,"klingon",t,e)}},"tech:T163":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"weapon:W170":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1},canEquip:e("Tactical Station"),upgradeSlots:[{type:["weapon"]}]},"weapon:W169":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1},attack:0,intercept:{self:{attack:function(n,a,e,c){return a?t(a,"attack",a,e)+1:c}}}},"weapon:W167":{attack:0,intercept:{self:{attack:function(n,a,e,c){return a?t(a,"attack",a,e):c},cost:function(n,a,e,c){return a?o(n,a,e,c)+t(a,"attack",a,e):c}}}},"crew:C283":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C282":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C281":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C290":{canEquip:function(n,t,e){return a.hasFaction(t,"klingon",t,e)}},"crew:C285":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C284":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"captain:Cap817":{upgradeSlots:[{},{type:["tech"]}]},"talent:E177":{canEquipFaction:function(n,t,e){return t.captain&&a.hasFaction(t.captain,"romulan",t,e)}},"tech:T248":{canEquip:e("Interphase Generator")},"tech:T165":{canEquip:function(n,a,t){return e("Reinforced Shields")&&5<=a.hull}},"tech:T166":{canEquip:function(n,a,t){return e("Auxiliary Power Core")&&4<=a.hull},intercept:{self:{cost:function(n,t,e,c){return t&&!a.hasFaction(t,"romulan",t,e)?o(n,t,e,c)+2:c}}}},"weapon:W171":{canEquip:function(n,a,t){return e("Additional Weapons Array")&&"D'deridex Class"==a.class}},"talent:E180":{canEquipFaction:function(n,t,e){return t.captain&&a.hasFaction(t.captain,"dominion",t,e)&&5<=t.hull}},"crew:C297":{canEquip:function(n,t,e){return a.hasFaction(t,"dominion",t,e)}},"crew:C298":{upgradeSlots:[{type:["tech"]}]},"weapon:W178":{canEquip:function(n,a,t){return"Jem'Hadar Battleship "==a.class}},"weapon:W176":{canEquip:function(n,a,t){return e("Phased Polaron Beams")&&"Jem'Hadar Attack Ship"==a.class}},"weapon:W174":{canEquip:function(n,a,t){return"Jem'Hadar Attack Ship"==a.class}},"weapon:W175":{canEquip:e("Minesweeper")},"tech:T169":{canEquip:function(n,a,t){return e("Suicide Attack")&&"Jem'Hadar Attack Ship"==a.class}},"tech:T168":{canEquip:function(n,t,e){return a.hasFaction(t,"dominion",t,e)}},"captain:Cap730":{intercept:{ship:{factionPenalty:function(n,t,e,c){return a.hasFaction(n,"ferengi",t,e)?0:c},cost:function(n,a,t,e){return r(n)&&s(n,"ferengi",a,t)&&(e=o(n,a,t,e)-1),e}}}},"captain:Cap532":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"independent",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"talent:E181":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"independent",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1},canEquipFaction:function(n,t,e){return t.captain&&a.hasFaction(t.captain,"ferengi",t,e)}},"crew:C303":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"independent",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"crew:C302":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"independent",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"crew:C301":{canEquipFaction:function(n,t,e){return t.captain&&a.hasFaction(t.captain,"ferengi",t,e)}},"weapon:W180":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"independent",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"tech:T170":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"independent",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1},canEquip:e("Metaphasic Shields"),intercept:{ship:{shields:function(n,a,t,e){return n==a?o(n,a,t,e)+1:e}}}},"talent:E182":{canEquip:e("Neural Transponder"),canEquipFaction:function(n,t,e){return t.captain&&a.hasFaction(t.captain,"borg",t,e)}},"crew:C305":{upgradeSlots:[{type:["crew"]}],canEquip:e("Neonatal Borg"),intercept:{ship:{type:function(n,a,t,e){return 0<=$.inArray("tech",e)||0<=$.inArray("borg",e)&&"borg"==a.hasFaction?e.concat(["crew"]):e}}}},"weapon:W181":{attack:0,intercept:{self:{attack:function(n,a,e,c){return a?t(a,"attack",a,e):c}}}},"weapon:W179":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"captain:Cap819":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"independent",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"captain:Cap657":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"independent",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"captain:Cap446":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"independent",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1},upgradeSlots:[{type:["talent"]},{type:["crew"],faceDown:!0,rules:"Cost of 3sp or less",intercept:{ship:{cost:function(){return 0},canEquip:function(n,e,c,r){return 4>=t(n,"cost",e,c)&&a.hasFaction(e,"federation",e,c)||a.hasFaction(e,"klingon",e,c)||a.hasFaction(e,"romulan",e,c)||a.hasFaction(e,"dominion",e,c)||a.hasFaction(e,"borg",e,c)||a.hasFaction(e,"bajoran",e,c)||a.hasFaction(e,"vulcan",e,c)||a.hasFaction(e,"mirror-universe",e,c)?r:!!(3>=t(n,"cost",e,c)||a.hasFaction(e,"independent",e,c)||a.hasFaction(e,"ferengi",e,c)||a.hasFaction(e,"kazon",e,c)||a.hasFaction(e,"xindi",e,c))&&r}}}},{type:["crew"],faceDown:!0,rules:"Cost of 3sp or less",intercept:{ship:{cost:function(){return 0},canEquip:function(n,e,c,r){return 4>=t(n,"cost",e,c)&&a.hasFaction(e,"federation",e,c)||a.hasFaction(e,"klingon",e,c)||a.hasFaction(e,"romulan",e,c)||a.hasFaction(e,"dominion",e,c)||a.hasFaction(e,"borg",e,c)||a.hasFaction(e,"bajoran",e,c)||a.hasFaction(e,"vulcan",e,c)||a.hasFaction(e,"mirror-universe",e,c)?r:!!(3>=t(n,"cost",e,c)||a.hasFaction(e,"independent",e,c)||a.hasFaction(e,"ferengi",e,c)||a.hasFaction(e,"kazon",e,c)||a.hasFaction(e,"xindi",e,c))&&r}}}}]},"captain:Cap223":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"independent",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1},upgradeSlots:[{type:["talent"],rules:"Grand Nagus Only",canEquip:function(n){return"Grand Nagus"==n.name}},{type:["talent"],rules:"The Rules of Acquisition Only",canEquip:function(n){return"The Rules Of Acquisition"==n.name}}]},"admiral:A033":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"independent",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:3},upgradeSlots:[{type:["talent"],rules:"Grand Nagus Only",canEquip:function(n){return"Grand Nagus"==n.name}},{type:["talent"],rules:"The Rules of Acquisition Only",canEquip:function(n){return"The Rules Of Acquisition"==n.name}}]},"talent:E183":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"independent",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1},canEquipFaction:function(n,t,e){return t.captain&&a.hasFaction(t.captain,"ferengi",t,e)}},"tech:T172":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"independent",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1},canEquip:e("Kemocite")},"tech:T171":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"weapon:W184":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"independent",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"weapon:W182":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"weapon:W183":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"independent",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1},attack:0,intercept:{self:{attack:function(n,a,e,c){return a?t(a,"attack",a,e):c}}}},"crew:C310":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"independent",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1},canEquipFaction:function(n,t,e){return t.captain&&a.hasFaction(t.captain,"ferengi",t,e)}},"crew:C309":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"independent",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1},canEquipFaction:function(n,t,e){return t.captain&&a.hasFaction(t.captain,"ferengi",t,e)}},"crew:C311":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"independent",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"crew:C313":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"independent",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"crew:C308":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:1}},"question:Q019":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1},type:"question",isSlotCompatible:function(n){return 0<=$.inArray("tech",n)||0<=$.inArray("crew",n)}},"question:Q020":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"mirror",t,e)?0:1},type:"question",isSlotCompatible:function(n){return 0<=$.inArray("tech",n)||0<=$.inArray("crew",n)||0<=$.inArray("weapon",n)}},"question:Q012":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1},type:"question",isSlotCompatible:function(n){return 0<=$.inArray("tech",n)||0<=$.inArray("weapon",n)}},"captain:Cap732":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"captain:Cap447":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"talent:E184":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1},canEquipFaction:function(n,a,t){return a.captain&&("S'Sesslak"==a.captain.name||"Lahr"==a.captain.name||0<=a.captain.name.indexOf("Gorn"))},canEquip:function(n,a,t){return"Gorn Raider"==a.class}},"crew:C316":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"crew:C314":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1},intercept:{ship:{skill:function(n,a,t,e){return n==a.captain?o(n,a,t,e)+1:e}}}},"crew:C315":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"question:Q013":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1},canEquip:function(n,t,c){return e("Meridor - Gorn Ale")(n,t,c)&&a.hasFaction(t,"independent",t,c)||e("Meridor - Gorn Ale")(n,t,c)&&a.hasFaction(t,"ferengi",t,c)||e("Meridor - Gorn Ale")(n,t,c)&&a.hasFaction(t,"kazon",t,c)||e("Meridor - Gorn Ale")(n,t,c)&&a.hasFaction(t,"xindi",t,c)},isSlotCompatible:function(n){return 0<=$.inArray("tech",n)||0<=$.inArray("weapon",n)||0<=$.inArray("crew",n)},upgradeSlots:[{type:function(n,a){return l(n,a)}}]},"weapon:W186":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"weapon:W185":{canEquip:function(n,a,t){return"Gorn Raider"==a.class&&e("Disruptor Bombardment")}},"tech:T173":{canEquip:function(n,a,t){return"Gorn Raider"==a.class&&e("Gorn Sensors")}},"tech:T174":{canEquip:function(n,a,t){return"Gorn Raider"==a.class&&e("Enhanced Durability")},upgradeSlots:[{type:["tech"]}],intercept:{ship:{shields:function(n,a,t,e){return n==a?o(n,a,t,e)+1:e},agility:function(n,a,t,e){return n==a?o(n,a,t,e)+1:e}}}},"talent:E186":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"federation",t,e)?0:1}},"weapon:W187":{canEquip:e("Tactical Command Reticle"),canEquipFaction:function(n,t,e){return a.hasFaction(t,"dominion",t,e)},upgradeSlots:[{type:["weapon"]}]},"squadron:D032":{upgradeSlots:[{type:["squadron"]}]},"squadron:D029":{canEquip:e("Defensive Maneuver Beta")},"squadron:D028":{canEquip:e("Defensive Maneuver Theta")},"squadron:D027":{canEquip:e("Flanking Maneuver Delta")},"squadron:D031":{canEquip:e("Flanking Maneuver Epsilon")},"squadron:D026":{canEquip:e("Flanking Attack Omega")},"captain:Cap545":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"captain:Cap339":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"talent:E187":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1},canEquipFaction:function(n,a,t){return a.captain&&("Idrin"==a.captain.name||"Karr"==a.captain.name||0<=a.captain.name.indexOf("Hirogen"))}},"talent:E188":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"crew:C320":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1},canEquip:e("Beta Hirogen"),intercept:{ship:{skill:function(n,a,t,e){return n==a.captain?o(n,a,t,e)+1:e}}}},"crew:C321":{canEquip:function(n,a,t){return"Hirogen Warship"==a.class}},"weapon:W188":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1},intercept:{self:{cost:function(n,a,t,e){return a&&0>a.class.indexOf("Hirogen")?o(n,a,t,e)+5:e}}}},"tech:T178":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1},canEquip:e("Tractor Beam")},"tech:T177":{canEquip:function(n,a,t){return e("Stealth Mode")&&"Hirogen Warship"==a.class}},"question:Q014":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1},isSlotCompatible:function(n){return 0<=$.inArray("tech",n)||0<=$.inArray("weapon",n)}},"ship:S313":{upgradeSlots:[{type:["tech"],rules:"Free Inertial Compensators Only",canEquip:function(n){return"Inertial Compensators"==n.name},intercept:{ship:{cost:function(){return 0}}}}]},"ship:S316":{intercept:{ship:{type:function(n,a,t,e){return a.captain&&0<=$.inArray(e,a.captain)?e.concat(["crew"]):e}}},upgradeSlots:[{type:["crew"],rules:"Replace's Captain",intercept:{ship:{skill:function(n,a,t,e){return n.cost+3}}}}]},"captain:Cap658":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"federation",t,e)?0:a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"captain:Cap609":{canEquipCaptain:function(n,a,t){return"Dauntless Class"==a.class}},"captain:Cap336":{canEquipCaptain:function(n,a,t){return"Romulan Drone Ship"==a.class}},"captain:Cap448":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"captain:Cap501":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"talent:E192":{canEquip:function(n,t,e){return t.captain&&(a.hasFaction(t.captain,"independent",t,e)||a.hasFaction(t.captain,"ferengi",t,e)||a.hasFaction(t.captain,"kazon",t,e)||a.hasFaction(t.captain,"xindi",t,e))&&"Maquis Raider"==t.class}},"talent:E191":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1},canEquipFaction:function(n,a,t){return a.captain&&("Telev"==a.captain.name||"Thy'Lek Shran"==a.captain.name||0<=a.captain.name.indexOf("Andorian"))}},"talent:E190":{canEquipFaction:function(n,a,t){return a.captain&&0<=a.captain.name.indexOf("Vidiian")},canEquip:function(n,a,t){return"Vidiian Battle Cruiser"==a.class}},"crew:C340":{canEquip:function(n,a,t){return"Andorian Battle Cruiser"==a.class}},"crew:C338":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"crew:C339":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"crew:C337":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},"weapon:W193":{canEquip:function(n,a,t){return"Vidiian Battle Cruiser"==a.class}},"weapon:W194":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1},canEquip:function(n,a,t){return a.attack<=2}},"tech:T184":{canEquip:function(n,a,t){return e("Enhanced Shield Emitters")&&"Andorian Battle Cruiser"==a.class},intercept:{ship:{shields:function(n,a,t,e){return n==a?o(n,a,t,e)+2:e}}}},"tech:T251":{canEquip:function(n,a,t){return e("Particle Synthesis")&&"Dauntless Class"==a.class}},"tech:T182":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1},intercept:{self:{canEquip:function(n,a,t){if(a&&a.hull<=3&&a.classData&&a.classData.maneuvers){for(i=1;i<a.classData.maneuvers.max;i++)if(void 0!==a.classData.maneuvers[i].about)return!0}return!1}}}},"tech:T183":{canEquip:function(n,a,t){return e("Class 4 Cloaking Device")&&"Maquis Raider"==a.class}},"question:Q015":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1},canEquip:function(n,t,c){return e("Repurposed Cargo Hold")(n,t,c)&&a.hasFaction(t,"independent",t,c)||e("Repurposed Cargo Hold")(n,t,c)&&a.hasFaction(t,"ferengi",t,c)||e("Repurposed Cargo Hold")(n,t,c)&&a.hasFaction(t,"kazon",t,c)||e("Repurposed Cargo Hold")(n,t,c)&&a.hasFaction(t,"xindi",t,c)},isSlotCompatible:function(n){return 0<=$.inArray("tech",n)||0<=$.inArray("weapon",n)||0<=$.inArray("crew",n)},upgradeSlots:[{type:["tech","weapon"]}]},"captain:Cap820":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1},upgradeSlots:[{},{type:["crew"]}]},"admiral:A034":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:3},upgradeSlots:[{},{type:["crew"]}]},"captain:Cap733":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"captain:Cap502":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"captain:Cap601":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"talent:E189":{canEquipFaction:function(n,t,e){return t.captain&&a.hasFaction(t.captain,"klingon",t,e)}},"crew:C336":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1},upgradeSlots:[{type:["talent"]}]},"crew:C335":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1},upgradeSlots:[{type:["talent"]}]},"crew:C334":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C333":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C332":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C331":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C330":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1},upgradeSlots:[{type:["crew"],faceDown:!0,intercept:{ship:{canEquip:function(n,a,e){return 4>=t(n,"cost",a,e)},free:function(){return!0}}}}]},"crew:C329":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C328":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C327":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C326":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C322":{canEquip:function(n,t,e){return a.hasFaction(t,"klingon",t,e)}},"crew:C323":{canEquip:function(n,t,c){return a.hasFaction(t,"klingon",t,c)&&e("Klingon First Officer")}},"crew:C324":{canEquip:function(n,t,e){return a.hasFaction(t,"klingon",t,e)}},"crew:C325":{canEquip:function(n,t,e){return a.hasFaction(t,"klingon",t,e)}},"weapon:W189":{canEquip:function(n,a,t){return"Constitution Class (Kelvin)"==a.class&&e("Full Spread Phasers")}},"weapon:W192":{canEquip:function(n,a,t){return"Constitution Class (Kelvin)"==a.class},attack:0,intercept:{self:{attack:function(n,a,e,c){return a?t(a,"attack",a,e)+1:c}}}},"weapon:W191":{attack:0,intercept:{self:{attack:function(n,a,e,c){return a?t(a,"attack",a,e)+1:c}}}},"weapon:W190":{canEquip:function(n,a,t){return"Warbird Class"==a.class}},"tech:T179":{canEquip:function(n,t,c){return a.hasFaction(t,"klingon",t,c)&&e("Klingon Cloaking Device")}},"tech:T180":{canEquip:function(n,a,t){return e("Future Technology")},upgradeSlots:[{type:["tech"],faceDown:!0,intercept:{ship:{canEquip:function(n,a,e){return 4>=t(n,"cost",a,e)},free:function(){return!0}}}}],intercept:{ship:{factionPenalty:function(n,t,e,c){return"tech"==n.type&&a.hasFaction(n,"romulan",t,e)||"weapon"==n.type&&a.hasFaction(n,"romulan",t,e)||"tech"==n.type&&a.hasFaction(n,"borg",t,e)||"weapon"==n.type&&a.hasFaction(n,"borg",t,e)?0:c}}}},"captain:Cap822":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"captain:Cap825":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1},intercept:{self:{skill:function(n,a,t,e){return"Constitution Class"==a.class?o(n,a,t,e)+1:e}}}},"talent:E197":{canEquipFaction:function(n,t,e){return t.captain&&a.hasFaction(t.captain,"klingon",t,e)}},"talent:E196":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1},canEquipFaction:function(n,t,e){return t.captain&&a.hasFaction(t.captain,"federation",t,e)}},"crew:C345":{canEquip:function(n,t,e){return a.hasFaction(t,"klingon",t,e)}},"crew:C356":{canEquip:function(n,t,e){return a.hasFaction(t,"klingon",t,e)}},"crew:C348":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C347":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C353":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C354":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C349":{intercept:{ship:{factionPenalty:function(n,a,t,e){return"C349"==n.id?0:e}}}},"weapon:W197":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1},intercept:{self:{attack:function(n,a,e,c){return t(a,"attack",a,e)}}}},"weapon:W196":{canEquip:e("Magnetic Pulse"),intercept:{self:{attack:function(n,a,e,c){return t(a,"attack",a,e)}}}},"ship:S318":{class:"Galaxy Class",classId:"galaxy__class_mu",intercept:{ship:{factionPenalty:function(n,a,t,e){return n?0:e},factions:function(n,a,t,e){return n==a&&0>e.indexOf("mirror-universe")?e.concat(["mirror-universe"]):e},cost:function(n,a,t,e){return p("tech",n,a)?o(n,a,t,e)-1:e}}}},"captain:Cap911":{canEquipFaction:function(n,t,e){return a.hasFaction(n,"borg",t,e)}},"captain:Cap910":{canEquipCaptain:function(a,t,e){return!n("fleetCardNamed")(e,"Jean-Luc Picard")},canEquipFaction:function(n,t,e){return a.hasFaction(n,"borg",t,e)},upgradeSlots:[{type:["talent"]},{type:["crew"]},{type:["crew"]}],intercept:{fleet:{canEquip:function(n,a,t,e){return"Jean-Luc Picard"!=n.name&&e},canEquipCaptain:function(n,a,t,e){return"Jean-Luc Picard"!=n.name&&e}},ship:{factionPenalty:{priority:100,fn:function(n,a,t,e){return"crew"==n.type?0:e}}}}},"captain:Cap824":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C350":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"crew:C352":{canEquipFaction:function(n,a,t){return s(a,"borg",a,t)}},"crew:C345":{intercept:{ship:{skill:function(n,a,t,e){return n==a.captain?o(n,a,t,e)+(s(n,"borg",a,t)?3:1):e}}}},"crew:C351":{upgradeSlots:[{type:["borg"]}],intercept:{ship:{cost:{priority:100,fn:function(n,a,t,e){return p("borg",n,a)&&(e=o(n,a,t,e),e-=1),e}}}}},"crew:C357":{upgradeSlots:[{type:["borg"],rules:"-1SP for each Empty Slot",intercept:{ship:{cost:function(a,t,e,c){var r=0;return $.inArray(t.upgrades),$.each(n("upgradeSlots")(t),function(n,a){null==a.occupant&&"talent"!==a.type&&(r+=1)}),(c-=r)<0&&(c=0),c}}}}]},"tech:T252":{intercept:{ship:{factionPenalty:function(n,a,t,e){return"T252"==n.id?0:e}}},upgradeSlots:[{type:["borg"]}]},"weapon:W200":{canEquipFaction:function(n,t,e){return a.hasFaction(t,"borg",t,e)},intercept:{self:{attack:function(n,a,e,c){return a?t(a,"attack",a,e):c}}}},"weapon:W199":{canEquipFaction:function(n,t,e){return a.hasFaction(t,"borg",t,e)},intercept:{self:{attack:function(n,a,e,c){return a?t(a,"attack",a,e):c},cost:function(n,a,e,c){return a?t(a,"attack",a,e):c}}}},"borg:B020":{canEquipFaction:function(n,t,e){return a.hasFaction(t,"borg",t,e)},canEquip:e("Borg Multi-Adaptive Shields")},"borg:B022":{canEquipFaction:function(n,t,e){return a.hasFaction(t,"borg",t,e)}},"talent:E195":{canEquipFaction:function(n,a,t){return s(a.captain,"borg",a,t)}},"talent:E194":{canEquipFaction:function(n,a,t){return s(a,"borg",a,t)}},"talent:E193":{canEquip:e("Ocular Implants"),canEquipFaction:function(n,a,t){return s(a,"borg",a,t)&&s(a.captain,"borg",a,t)}},"ship:S335":{intercept:{ship:{cost:function(n,t,e,c){return a.hasFaction(n,"vulcan",t,e)&&"captain"==n.type?o(n,t,e,c)-1:a.hasFaction(n,"vulcan",t,e)&&"admiral"==n.type?o(n,t,e,c)-1:a.hasFaction(n,"vulcan",t,e)&&"crew"==n.type?o(n,t,e,c)-1:c}}}},"captain:Cap662":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"federation",t,e)?0:1}},"captain:Cap832":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"federation",t,e)?0:1}},"captain:Cap831":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:1}},"captain:Cap830":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"federation",t,e)?0:1}},"tech:T268":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"federation",t,e)?0:1}},"tech:T269":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"federation",t,e)?0:1}},"crew:C369":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"federation",t,e)?0:1},upgradeSlots:[{type:["tech"],rules:"Free Stone of Gol Only",canEquip:function(n){return"Stone of Gol"==n.name},intercept:{ship:{cost:function(){return 0}}}}]},"crew:C368":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:1}},"crew:C367":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:1}},"tech:T267":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"federation",t,e)?0:1},intercept:{self:{cost:function(n,t,e,c){return t&&!a.hasFaction(t,"vulcan",t,e)?o(n,t,e,c)+5:c}}}},"talent:E198":{canEquipFaction:function(n,a,t){return s(a,"vulcan",a,t)&&s(a.captain,"vulcan",a,t)}},"talent:E207":{canEquipFaction:function(n,a,t){return s(a,"vulcan",a,t)&&s(a.captain,"vulcan",a,t)}},"weapon:W212":{canEquipFaction:function(n,a,t){return s(a,"vulcan",a,t)}},"weapon:W211":{canEquipFaction:function(n,a,t){return s(a,"vulcan",a,t)}},"tech:T264":{canEquipFaction:function(n,a,t){return s(a,"vulcan",a,t)}},"tech:T266":{canEquip:function(n,a,t){return e("Science Vessel Variant")&&("D'Kyr Class"==a.class||"Suurok Class"==a.class)},intercept:{ship:{agility:function(n,a,t,e){return n==a?o(n,a,t,e)+1:e},hull:function(n,a,t,e){return n==a?o(n,a,t,e)+1:e}}}},"tech:T265":{canEquip:function(n,a,t){return e("Combat Vessel Variant")&&("D'Kyr Class"==a.class||"Suurok Class"==a.class)},intercept:{ship:{attack:function(n,a,t,e){return n==a?o(n,a,t,e)+1:e}}}},"captain:Cap826":{canEquipFaction:function(n,a,t){return s(a,"dominion",a,t)}},"question:Q018":{canEquip:e("Kanar"),canEquipFaction:function(n,a,t){return s(a,"dominion",a,t)},isSlotCompatible:function(n){return 0<=$.inArray("tech",n)||0<=$.inArray("weapon",n)||0<=$.inArray("crew",n)},upgradeSlots:[{type:function(n,a){return l(n,a)}}]},"crew:C363":{canEquipFaction:function(n,a,t){return s(a,"dominion",a,t)}},"captain:Cap827":{intercept:{self:{factionPenalty:function(n,a,t,e){return s(a,"romulan",a,t)?0:e}}}},"admiral:A036":{intercept:{self:{factionPenalty:function(n,a,t,e){return s(a,"romulan",a,t)?0:e}}}},"crew:C364":{intercept:{ship:{skill:function(n,a,t,e){return n==a.captain?o(n,a,t,e)+2:e}}}},"crew:C365":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"federation",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},"talent:E204":{canEquipFaction:function(n,a,t){return s(a,"dominion",a,t)},canEquip:e("Obsidian Order")},"weapon:W208":{canEquip:e("Multiple Dorsal Arrays"),canEquip:function(n,a,t){return"Cardassian Galor Class"==a.class}},"weapon:W209":{canEquip:e("Enhanced Resonance Field Grid")},"weapon:W210":{canEquip:function(n,a,t){return e("Phase Disruptor Array")&&("Cardassian Galor Class"==a.class||"Cardassian Keldon Class"==a.class)}},"tech:T260":{canEquip:e("Sensor Ghost")},"tech:T261":{canEquip:function(n,a,t){return e("Uridium Alloy")&&("Cardassian Galor Class"==a.class||"Cardassian Keldon Class"==a.class)}},"tech:T262":{canEquip:function(n,a,t){return e("Type-3 Galor Class")&&"Cardassian Galor Class"==a.class},intercept:{ship:{shields:function(n,a,t,e){return n==a?o(n,a,t,e)+2:e}}}},"tech:T263":{canEquipFaction:function(n,a,t){return s(a,"dominion",a,t)},upgradeSlots:u(2,{type:["crew"]})},":":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},":":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"federation",t,e)?0:a.hasFaction(t,"vulcan",t,e)?0:1}},":":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"bajoran",t,e)?0:a.hasFaction(t,"federation",t,e)?0:1}},":":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},":":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"independent",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},":":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"independent",t,e)?0:a.hasFaction(t,"xindi",t,e)?0:1}},":":{factionPenalty:function(n,t,e){return t&&a.hasFaction(t,"ferengi",t,e)?0:a.hasFaction(t,"kazon",t,e)?0:a.hasFaction(t,"independent",t,e)?0:1}},"resource:R042":{slotType:"ship-resource",cost:0,hideCost:!0,showShipResourceSlot:function(n,a,t){if(a.resource&&"ship-resource"==a.resource.type)return!0;var e=!0;return $.each(t.ships,function(n,a){a.resource&&(e=!1)}),e},onRemove:function(n,a,t){$.each(t.ships,function(n,a){a.resource&&delete a.resource})}},"ship-resource:R042a":{canEquip:function(n,a,e){return 4<=t(a,"hull",a,e)}},"resource:R040":{slotType:"ship-resource",cost:0,hideCost:!0,showShipResourceSlot:function(n,a,t){if(a.resource&&"ship-resource"==a.resource.type)return!0;var e=!0;return $.each(t.ships,function(n,a){a.resource&&(e=!1)}),e},onRemove:function(n,a,t){$.each(t.ships,function(n,a){a.resource&&delete a.resource})}},"ship-resource:Rs40":{intercept:{ship:{shields:function(n,a,t,e){return n==a?o(n,a,t,e)+1:e},skill:function(n,a,t,e){return n==a.captain?o(n,a,t,e)+1:e}}}},"resource:R039":{slotType:"ship-resource",cost:0,hideCost:!0,showShipResourceSlot:function(n,a,t){if(a.resource&&"ship-resource"==a.resource.type)return!0;var e=!0;return $.each(t.ships,function(n,a){a.resource&&(e=!1)}),e},onRemove:function(n,a,t){$.each(t.ships,function(n,a){a.resource&&delete a.resource})}},"resource:R033":{slotType:"ship-resource",cost:0,hideCost:!0,showShipResourceSlot:function(n,a,t){if(a.resource&&"ship-resource"==a.resource.type)return!0;var e=!0;return $.each(t.ships,function(n,a){a.resource&&(e=!1)}),e},onRemove:function(n,a,t){$.each(t.ships,function(n,a){a.resource&&delete a.resource})}},"ship-resource:R033a":{upgradeSlots:[{type:["captain"],rules:"Fleet Commander"}],intercept:{ship:{skill:function(n,a,t,e){return n==a.captain?o(n,a,t,e)+1:e},shields:function(n,a,t,e){return n==a?o(n,a,t,e)+1:e}}}},"ship-resource:R033b":{upgradeSlots:[{type:["captain"],rules:"Fleet Commander"}],intercept:{ship:{skill:function(n,a,t,e){return n==a.captain?o(n,a,t,e)+1:e},hull:function(n,a,t,e){return n==a?o(n,a,t,e)+1:e},canEquip:function(n,a,t){if(n||n&&"4+"==n.hullconstraint&&3<=a.hull||n&&"5+"==n.hullconstraint&&4<=a.hull||n&&"3-"==n.hullconstraint&&a.hull<=2)return!0}}}},"resource:R010":{slotType:"fleet-captain",cost:0,hideCost:!0,showShipResourceSlot:function(n,a,t){if(a.resource&&"fleet-captain"==a.resource.type)return!0;var e=!0;return $.each(t.ships,function(n,a){a.resource&&(e=!1)}),e},onRemove:function(n,a,t){$.each(t.ships,function(n,a){a.resource&&delete a.resource})}},"fleet-captain:R010a":{canEquip:function(n,t,e){return a.hasFaction(t,"federation",t,e)&&(!t.captain||t.captain.unique&&a.hasFaction(t.captain,"federation",t,e))},intercept:{ship:{canEquipCaptain:function(n,t,e){return n.unique&&a.hasFaction(n,"federation",t,e)}}}},"fleet-captain:R010b":{canEquip:function(n,t,e){return a.hasFaction(t,"dominion",t,e)&&(!t.captain||t.captain.unique&&a.hasFaction(t.captain,"dominion",t,e))},intercept:{ship:{canEquipCaptain:function(n,t,e){return n.unique&&a.hasFaction(n,"dominion",t,e)}}}},"fleet-captain:R010c":{canEquip:function(n,t,e){return a.hasFaction(t,"romulan",t,e)&&(!t.captain||t.captain.unique&&a.hasFaction(t.captain,"romulan",t,e))},intercept:{ship:{canEquipCaptain:function(n,t,e){return n.unique&&a.hasFaction(n,"romulan",t,e)}}}},"fleet-captain:R010d":{canEquip:function(n,t,e){return a.hasFaction(t,"klingon",t,e)&&(!t.captain||t.captain.unique&&a.hasFaction(t.captain,"klingon",t,e))},intercept:{ship:{canEquipCaptain:function(n,t,e){return n.unique&&a.hasFaction(n,"klingon",t,e)}}}},"fleet-captain:R010e":{canEquip:function(n,a,t){return!a.captain||a.captain.unique},intercept:{ship:{canEquipCaptain:function(n,a,t){return n.unique},factions:function(n,a,t,e){return e=e||n.factions,n==a.captain&&0>e.indexOf("independent")?e.concat(["independent"]):e}},fleet:{cost:function(n,a,t,e){return p("crew",n,a)?o(n,a,t,e)-1:e}}}},"fleet-captain:R010f":{canEquip:function(n,a,t){return!a.captain||a.captain.unique},intercept:{ship:{canEquipCaptain:function(n,a,t){return n.unique},factions:function(n,a,t,e){return e=e||n.factions,n==a.captain&&0>e.indexOf("independent")?e.concat(["independent"]):e}},fleet:{}}},"fleet-captain:R010g":{canEquip:function(n,a,t){return!a.captain||a.captain.unique},intercept:{ship:{canEquipCaptain:function(n,a,t){return n.unique},factions:function(n,a,t){var e=n.factions;return n==a.captain&&0>e.indexOf("independent")?e.concat(["independent"]):e}},fleet:{cost:function(n,a,t,e){return p("weapon",n,a)?o(n,a,t,e)-1:e}}}},"fleet-captain:R010h":{canEquip:function(n,a,t){return!a.captain||a.captain.unique},intercept:{ship:{canEquipCaptain:function(n,a,t){return n.unique},factions:function(n,a,t){var e=n.factions;return n==a.captain&&0>e.indexOf("independent")?e.concat(["independent"]):e}},fleet:{cost:function(n,a,t,e){return p("tech",n,a)?o(n,a,t,e)-1:e}}}},"resource:R015":{upgradeSlots:[{type:["faction"],source:"Select Factions for Officer Exchange Program"},{type:["faction"],source:"Select Factions for Officer Exchange Program"}],intercept:{fleet:{factionPenalty:function(n,t,e,c){var r=e.resource.upgradeSlots[0].occupant,o=e.resource.upgradeSlots[1].occupant;return r&&o?"captain"!=n.type&&"admiral"!=n.type&&"crew"!=n.type?c:a.match(n,r)&&a.match(t,o)||a.match(n,o)&&a.match(t,r)?0:c:c},cost:function(n,t,e,c){var r=e.resource.upgradeSlots[0].occupant,s=e.resource.upgradeSlots[1].occupant;return r&&s?"captain"!=n.type&&"admiral"!=n.type?c:a.match(n,r)&&a.match(t,s)||a.match(n,s)&&a.match(t,r)?o(n,t,e,c)-1:c:c}}}},"resource:R011":{hideCost:!0,intercept:{fleet:{type:function(n,a,t,e){return 0<=$.inArray("crew",e)?e.concat(["officer"]):e}}}},"officer:R011a":{skill:4,talents:1,upgradeSlots:[{},{type:["talent"],source:"First Officer"}]},"officer:R011b":{upgradeSlots:[{},{type:["weapon"],source:"Tactical Officer"}]},"officer:R011c":{upgradeSlots:[{},{type:["crew"],source:"Operations Officer"}]},"officer:R011d":{upgradeSlots:[{},{type:["tech"],source:"Science Officer"}]},"resource:R003":{class:"Sideboard",factions:a.listCodified,upgradeSlots:[{type:["captain"],source:"Sideboard",rules:"Combined cost 20 SP or less",canEquip:function(n,a,e,c){var r=0;return $.each(e.resource.upgradeSlots,function(n,o){o.occupant&&o!=c&&(r+=t(o.occupant,"cost",a,e))}),r+t(n,"cost",a,e)<=20},intercept:{ship:{canEquip:{priority:100,fn:function(){return!0}},canEquipFaction:{priority:100,fn:function(){return!0}},factionPenalty:function(){return 0}}}},{type:["talent"],source:"Sideboard",rules:"Combined cost 20 SP or less",canEquip:function(n,a,e,c){var r=0;return $.each(e.resource.upgradeSlots,function(n,o){o.occupant&&o!=c&&(r+=t(o.occupant,"cost",a,e))}),r+t(n,"cost",a,e)<=20},intercept:{ship:{canEquip:{priority:100,fn:function(){return!0}},canEquipFaction:{priority:100,fn:function(){return!0}},factionPenalty:function(){return 0}}}},{type:["crew"],source:"Sideboard",rules:"Combined cost 20 SP or less",canEquip:function(n,a,e,c){var r=0;return $.each(e.resource.upgradeSlots,function(n,o){o.occupant&&o!=c&&(r+=t(o.occupant,"cost",a,e))}),r+t(n,"cost",a,e)<=20},intercept:{ship:{canEquip:{priority:100,fn:function(){return!0}},canEquipFaction:{priority:100,fn:function(){return!0}},factionPenalty:function(){return 0}}}},{type:["tech"],source:"Sideboard",rules:"Combined cost 20 SP or less",canEquip:function(n,a,e,c){var r=0;return $.each(e.resource.upgradeSlots,function(n,o){o.occupant&&o!=c&&(r+=t(o.occupant,"cost",a,e))}),r+t(n,"cost",a,e)<=20},intercept:{ship:{canEquip:{priority:100,fn:function(){return!0}},canEquipFaction:{priority:100,fn:function(){return!0}},factionPenalty:function(){return 0}}}},{type:["weapon"],source:"Sideboard",rules:"Combined cost 20 SP or less",canEquip:function(n,a,e,c){var r=0;return $.each(e.resource.upgradeSlots,function(n,o){o.occupant&&o!=c&&(r+=t(o.occupant,"cost",a,e))}),r+t(n,"cost",a,e)<=20},intercept:{ship:{canEquip:{priority:100,fn:function(){return!0}},canEquipFaction:{priority:100,fn:function(){return!0}},factionPenalty:function(){return 0}}}}]},"resource:R004":{slotType:"flagship",cost:0,hideCost:!0,showShipResourceSlot:function(n,a,t){if(a.resource&&"flagship"==a.resource.type)return!0;var e=!0;return $.each(t.ships,function(n,a){a.resource&&(e=!1)}),e},onRemove:function(n,a,t){$.each(t.ships,function(n,a){a.resource&&delete a.resource})}},"flagship:R004a":{canEquip:function(n,t,e){return a.hasFaction(t,"romulan",t,e)}},"flagship:R004b":{canEquip:function(n,t,e){return a.hasFaction(t,"klingon",t,e)},intercept:{ship:{canEquip:function(n,a,t){if(n||n&&"4+"==n.hullconstraint&&3<=a.hull||n&&"5+"==n.hullconstraint&&4<=a.hull||n&&"3-"==n.hullconstraint&&a.hull<=2)return!0}}}},"flagship:R004c":{canEquip:function(n,t,e){return a.hasFaction(t,"dominion",t,e)},intercept:{ship:{canEquip:function(n,a,t){if(n||n&&"4+"==n.hullconstraint&&3<=a.hull||n&&"5+"==n.hullconstraint&&4<=a.hull||n&&"3-"==n.hullconstraint&&a.hull<=2)return!0}}}},"flagship:R004e":{canEquip:function(n,t,e){return a.hasFaction(t,"federation",t,e)},intercept:{ship:{canEquip:function(n,a,t){if(n||n&&"4+"==n.hullconstraint&&3<=a.hull||n&&"5+"==n.hullconstraint&&4<=a.hull||n&&"3-"==n.hullconstraint&&a.hull<=2)return!0}}}},"flagship:R004f":{intercept:{ship:{factions:function(n,a,t,e){return n==a&&0>e.indexOf("independent")?e.concat(["independent"]):e}}}},"flagship:R004g":{intercept:{ship:{factions:function(n,a,t,e){return n==a&&0>e.indexOf("independent")?e.concat(["independent"]):e},canEquip:function(n,a,t){if(n||n&&"4+"==n.hullconstraint&&3<=a.hull||n&&"5+"==n.hullconstraint&&4<=a.hull||n&&"3-"==n.hullconstraint&&a.hull<=2)return!0}}}},"flagship:R004h":{intercept:{ship:{factions:function(n,a,t,e){return n==a&&0>e.indexOf("independent")?e.concat(["independent"]):e},canEquip:function(n,a,t){if(n||n&&"4+"==n.hullconstraint&&3<=a.hull||n&&"5+"==n.hullconstraint&&4<=a.hull||n&&"3-"==n.hullconstraint&&a.hull<=2)return!0}}}},"flagship:R004i":{intercept:{ship:{factions:function(n,a,t,e){return n==a&&0>e.indexOf("independent")?e.concat(["independent"]):e},canEquip:function(n,a,t){if(n||n&&"4+"==n.hullconstraint&&3<=a.hull||n&&"5+"==n.hullconstraint&&4<=a.hull||n&&"3-"==n.hullconstraint&&a.hull<=2)return!0}}}},"resource:R020":{cost:function(n,a,e){if(!e)return 0;var c=0;return $.each(e.ships||[],function(n,a){c+=t(a,"shields",a,e)}),Math.ceil(c/2)}},"resource:R029":{},"talent:E035":{upgradeSlots:[{type:["talent"],rules:"",faceDown:!0,canEquip:function(n,e,c){return a.match(n,e)&&5>=t(n,"cost",e,c)},intercept:{ship:{free:function(){return!0}}}}],canEquip:e("Balance of Terror"),intercept:{self:{cost:{priority:1e3,fn:function(){return 3}}}}},"crew:C035":{upgradeSlots:[{type:["crew"],rules:"",faceDown:!0,canEquip:function(n,e,c){return a.match(n,e)&&5>=t(n,"cost",e,c)},intercept:{ship:{free:function(){return!0}}}}],canEquip:e("Balance of Terror"),intercept:{self:{cost:{priority:1e3,fn:function(){return 3}}}}},"tech:T044":{upgradeSlots:[{type:["tech"],rules:"",faceDown:!0,canEquip:function(n,e,c){return a.match(n,e)&&5>=t(n,"cost",e,c)},intercept:{ship:{free:function(){return!0}}}}],canEquip:e("Balance of Terror"),intercept:{self:{cost:{priority:1e3,fn:function(){return 3}}}}},"weapon:W027":{upgradeSlots:[{type:["weapon"],rules:"",faceDown:!0,canEquip:function(n,e,c){return a.match(n,e)&&5>=t(n,"cost",e,c)},intercept:{ship:{free:function(){return!0}}}}],canEquip:e("Balance of Terror"),intercept:{self:{cost:{priority:1e3,fn:function(){return 3}}}}},"resource:R036":{intercept:{fleet:{type:function(n,a,t,e){return 0<=$.inArray("crew",e)?e.concat(["ship-resource"]):e}}}},"ship-resource:R036a":{upgradeSlots:[{type:["crew"]},{type:["talent"],intercept:{ship:{cost:function(n,a,t,e){return o(n,a,t,e)+1}}}}]}}}]),(module=angular.module("utopia-card-ship-class",[])).directive("cardShipClass",function(){return{scope:{shipClass:"=",ship:"=",fleet:"="},templateUrl:"card-ship-class.html",controller:["$scope",function(n){n.abs=Math.abs,n.speeds=[];for(var a=n.shipClass.maneuvers,t=a.max;t>=a.min;t--)(0!=t||a[0])&&n.speeds.push(t);for(n.speeds.length<7&&-2<a.min&&n.speeds.push(9),n.speeds.length<7&&-1<a.min&&n.speeds.push(9);n.speeds.length<7;)n.speeds.unshift(9);n.getBaseTileName=function(n){return n.unique?n.name:n.class}}]}}),(module=angular.module("utopia-card-ship",[])).directive("cardShip",function(){return{scope:{ship:"=",fleet:"=",dragStore:"=",dragSource:"="},templateUrl:"card-ship.html",controller:["$scope",function(n){}]}}),(module=angular.module("utopia-card-token",[])).directive("cardToken",function(){return{scope:{token:"=",ship:"=",fleet:"=",dragStore:"=",dragSource:"="},templateUrl:"card-token.html",controller:["$scope",function(n){}]}}),(module=angular.module("utopia-card-upgrade",[])).directive("cardUpgrade",function(){return{scope:{upgrade:"=",ship:"=",fleet:"=",dragStore:"=",dragSource:"="},templateUrl:"card-upgrade.html",controller:["$scope",function(n){n.range=function(n){return Array(n)},n.isDefined=function(n){return void 0!==n}}]}}),(module=angular.module("utopia-card",["utopia-tooltip","utopia-card-ship","utopia-card-ship-class","utopia-card-upgrade","utopia-card-resource","utopia-dragdrop","utopia-valueof"])).directive("card",function(){return{scope:{card:"=",ship:"=",fleet:"=",dragStore:"=",dragSource:"@"},restrict:"E",templateUrl:"card.html"}}),module.filter("icons",function(){return function(n){return n.replace(/\[([^\]]*)\]/g,"<i class='fs fs-$1'></i>").replace(/\n/g,"<br/>")}}),(module=angular.module("utopia-valueof",[])).filter("removeDashes",["$filter",function(n){return function(n){return n?n.replace(/\-/g," "):n}}]),module.factory("globalInterceptors",function(){return{cost:{priority:1e3,source:"Cost cannot be negative",hidden:!0,fn:function(n,a,t,e){return(e=e instanceof Function?e(n,a,t):e)<0?0:e}}}}),module.filter("upgradeSlots",function(){return function(n){var a=[];n.resource&&n.resource.upgradeSlots&&(a=a.concat(n.resource.upgradeSlots)),n.captain&&n.captain.upgradeSlots&&(a=a.concat(n.captain.upgradeSlots)),n.admiral&&n.admiral.upgradeSlots&&(a=a.concat(n.admiral.upgradeSlots)),n.ambassador&&n.ambassador.upgradeSlots&&(a=a.concat(n.ambassador.upgradeSlots)),a=a.concat(n.upgrades).concat(n.upgradeSlots);for(var t=[];0<a.length;){var e=a.shift();e&&(t.push(e),e.occupant&&e.occupant.upgradeSlots&&!e.faceDown&&(a=e.occupant.upgradeSlots.concat(a)))}return t}}),module.filter("shipInterceptors",["$filter",function(n){var a=n("upgradeSlots");return function(n,t,e,c,r){var o=[],s=a(t);return $.each(s,function(a,t){t.occupant&&t.occupant.intercept[e][c]&&!t.faceDown&&wrapInterceptors(t.occupant.intercept[e][c],t.occupant,o),(r&&t==r||n==t.occupant)&&t.intercept&&t.intercept[e]&&t.intercept[e][c]&&wrapInterceptors(t.intercept[e][c],t.source||"Unknown",o)}),t.resource&&t.resource.intercept[e][c]&&wrapInterceptors(t.resource.intercept[e][c],t.resource,o),t.captain&&t.captain.intercept[e][c]&&wrapInterceptors(t.captain.intercept[e][c],t.captain,o),t.admiral&&t.admiral.intercept[e][c]&&wrapInterceptors(t.admiral.intercept[e][c],t.admiral,o),t.ambassador&&t.ambassador.intercept[e][c]&&wrapInterceptors(t.ambassador.intercept[e][c],t.ambassador,o),t.intercept&&t.intercept[e][c]&&wrapInterceptors(t.intercept[e][c],t,o),o}}]),module.filter("interceptors",["$filter","globalInterceptors",function(n,a){var t=n("shipInterceptors");return function(n,e,c,r,o){var s=[];return n.intercept&&n.intercept.self&&n.intercept.self[r]&&wrapInterceptors(n.intercept.self[r],n,s),e&&(s=s.concat(t(n,e,"ship",r,o))),c&&($.each(c.ships||[],function(a,e){s=s.concat(t(n,e,"fleet",r))}),c.resource&&(s=s.concat(t(n,c.resource,"fleet",r)))),a[r]&&(s=s.concat(a[r])),s}}]),module.filter("valueOf",["$filter",function(n){var a=n("interceptors");return function(n,t,e,c,r,o){var s=[{source:"Printed Value",value:data=(data=n[t])instanceof Function?data(n,e,c):data}];if(e){var u=a(n,e,c,t,r);u.sort(function(n,a){return n.priority>a.priority?1:-1}),$.each(u,function(a,t){var r=data;(data=t.fn(n,e,c,data))==r||t.hidden||(data=data instanceof Function?data(n,e,c):data,r=r instanceof Function?r(n,e,c):r,data!=r&&s.push({source:t.source,value:data-r}))})}return data instanceof Function&&(data=data(n,e,c)),o&&o.modifiers?s:data}}]),angular.module("utopia").run(["$templateCache",function(n){"use strict";n.put("fleet-builder.html",'<div class="fleet-open-export" ng-show="!searchOptions.showExport">\r\n	<button class="fleet-search-bigger" ng-click="searchOptions.showExport = true"><i class="fa fa-chevron-left"></i> Export</button>\r\n</div>\r\n\r\n<div class="fleet-open-search" ng-show="searchOptions.columns < 1">\r\n	<button class="fleet-search-bigger" ng-click="searchOptions.columns = 1">Search <i class="fa fa-chevron-right"></i></button>\r\n</div>\r\n\r\n<div class="fleet-ship-container" ng-repeat="ship in fleet.ships track by $index">\r\n\r\n	<div class="fleet-ship-top">\r\n		<div class="fleet-ship-top-left" ng-class="{\'fleet-ship-top-left-first\':$first}"></div>\r\n		<div class="fleet-ship-title font-staw" ng-class="{\'fleet-ship-title-long\': ship.name.length >= 18, \'fleet-ship-title-longer\': ship.name.length >= 21}">{{ ship.name }}</div>\r\n		<div class="fleet-ship-top-spacer"></div>\r\n		<div class="fleet-ship-title fleet-ship-cost font-staw">{{ getTotalCost(ship,fleet) }} SP</div>\r\n		<div class="fleet-ship-top-spacer"></div>\r\n		<div class="fleet-ship-top-spacer"></div>\r\n		<div class="toggle-button-value pull-left" ng-class="{\'toggle-button-value-active\': !ship.hideEmptySlots}"></div>\r\n		<div class="fleet-ship-title fleet-ship-cost font-staw">\r\n			<button class="title-button" ng-click="ship.hideEmptySlots = !ship.hideEmptySlots">Show Empty Slots</button>\r\n		</div>\r\n		<div class="fleet-ship-top-right"></div>\r\n	</div>\r\n	<div class="fleet-ship-middle">\r\n		<div class="fleet-ship-left"></div>\r\n\r\n		<div class="fleet-ship-inner">\r\n\r\n			<div class="card-container" ng-class="{\'zoom\':zoom}">\r\n				<card card="ship" fleet="fleet" drag-store="dragStore"></card>\r\n			</div><!--\r\n			Stupid whitespace breaks card alignment\r\n		 --><div class="card-container" ng-class="{\'zoom\':zoom}">\r\n				<card card="ship.classData" ship="ship" fleet="fleet" drag-store="dragStore"></card>\r\n			</div><!--\r\n		 --><div class="card-container" ng-class="{\'zoom\':zoom}" ng-show="!ship.squadron && fleet.resource && (fleet.resource|valueOf:\'showShipResourceSlot\':ship:fleet)" droppable can-drop="$item.type == fleet.resource.slotType" drop="setShipResource(fleet,ship,$item)" drag-store="dragStore">\r\n				<div class="card-outer card-drop-target font-staw" ng-click="setSearchTypes([fleet.resource.slotType])">\r\n					<div class="card-drop-target-inner">\r\n						<div class="card-drop-target-type">\r\n							<i class="fs fs-{{fleet.resource.slotType}}"></i><br/>{{fleet.resource.slotType|removeDashes}}\r\n						</div>\r\n					</div>\r\n				</div>\r\n				<card card="ship.resource" ship="ship" fleet="fleet" drag-store="dragStore"></card>\r\n			</div><!--\r\n\r\n		 --><div class="card-container" ng-class="{\'zoom\':zoom}" ng-hide="ship.squadron" droppable can-drop="$item.type == \'captain\' && $item != ship.captain" drop="setShipCaptain(fleet,ship,$item)" drag-store="dragStore">\r\n				<div class="card-outer card-drop-target font-staw" ng-click="setSearchTypes([\'captain\'])">\r\n					<div class="card-drop-target-inner">\r\n						<div class="card-drop-target-type">\r\n							<i class="fs fs-captain"></i><br/>Captain\r\n						</div>\r\n					</div>\r\n				</div>\r\n				<card card="ship.captain" ship="ship" fleet="fleet" drag-store="dragStore"></card>\r\n			</div><!--\r\n\r\n		 --><div class="card-container" ng-class="{\'zoom\':zoom}" ng-hide="!ship.admiral && ( ship.squadron || ship.hideEmptySlots || fleetHasAdmiral(fleet) )"\r\n				droppable can-drop="$item.type == \'admiral\' && $item != ship.admiral" drop="setShipAdmiral(fleet,ship,$item)" drag-store="dragStore">\r\n				<div class="card-outer card-drop-target font-staw" ng-click="setSearchTypes([\'admiral\'])">\r\n					<div class="card-drop-target-inner">\r\n						<div class="card-drop-target-type">\r\n							<i class="fs fs-admiral"></i><br/>Admiral\r\n						</div>\r\n					</div>\r\n				</div>\r\n				<card card="ship.admiral" ship="ship" fleet="fleet" drag-store="dragStore"></card>\r\n			</div><!--\r\n\r\n			--><div class="card-container" ng-class="{\'zoom\':zoom}" ng-hide="!ship.ambassador && ( ship.squadron || ship.hideEmptySlots || fleetHasAmbassador(fleet) )"\r\n				 droppable can-drop="$item.type == \'ambassador\' && $item != ship.ambassador" drop="setShipAmbassador(fleet,ship,$item)" drag-store="dragStore">\r\n				 <div class="card-outer card-drop-target font-staw" ng-click="setSearchTypes([\'ambassador\'])">\r\n					 <div class="card-drop-target-inner">\r\n						 <div class="card-drop-target-type">\r\n							 <i class="fs fs-ambassador"></i><br/>Ambassador\r\n						 </div>\r\n					 </div>\r\n				 </div>\r\n				 <card card="ship.ambassador" ship="ship" fleet="fleet" drag-store="dragStore"></card>\r\n			 </div><!--\r\n\r\n		 --><div class="card-container" ng-class="{\'zoom\':zoom}" ng-mouseenter="hover = true" ng-mouseleave="hover = false"\r\n				ng-repeat="upgradeSlot in ship|upgradeSlots" ng-hide="!upgradeSlot.occupant && (ship.hideEmptySlots || (upgradeSlot|valueOf:\'hide\':ship:fleet))"\r\n				droppable can-drop="isUpgradeCompatible($item, upgradeSlot, ship, fleet)" drop="setUpgrade(fleet,ship,upgradeSlot,$item)" drag-store="dragStore">\r\n				<div class="card-outer card-drop-target font-staw" ng-click="setSearchTypes(upgradeSlot.type)">\r\n					<div class="card-drop-target-title" ng-class="{\'card-drop-target-title-hover\':hover || upgradeSlot.occupant == dragStore.item}" ng-show="upgradeSlot.source && upgradeSlot.source != \'ship\'">{{upgradeSlot.source}}<div ng-show="upgradeSlot.rules">{{upgradeSlot.rules}}</div></div>\r\n					<div class="card-drop-target-inner">\r\n						<div class="card-drop-target-type" ng-repeat="type in upgradeSlot|valueOf:\'type\':ship:fleet">\r\n							<i class="fs fs-{{type}}"></i><br/>{{type|removeDashes}}\r\n						</div>\r\n					</div>\r\n				</div>\r\n				<div class="card-drop-target-subtitle">{{upgradeSlot|valueOf:\'show\':ship:fleet}}</div>\r\n				<card card="upgradeSlot.occupant" ship="ship" fleet="fleet" drag-store="dragStore"></card>\r\n			</div>\r\n\r\n		</div>\r\n\r\n	</div>\r\n\r\n	<div class="fleet-ship-bottom" ng-show="$last && searchOptions.columns < 1 && !fleet.resource">\r\n		<div class="fleet-ship-bottom-left" ng-class="{\'fleet-ship-bottom-left-long\': fleet.ships.length > 0 || fleet.resource}"></div>\r\n	</div>\r\n\r\n</div>\r\n\r\n<div class="fleet-ship-container" ng-hide="loading || ( searchOptions.columns < 1 && !fleet.resource )">\r\n\r\n	<div class="fleet-ship-top">\r\n		<div class="fleet-ship-top-left" ng-class="{\'fleet-ship-top-left-first\': fleet.ships.length == 0}"></div>\r\n		<div class="fleet-ship-title font-staw">Fleet Total</div>\r\n		<div class="fleet-ship-top-spacer"></div>\r\n		<div class="fleet-ship-title fleet-ship-cost font-staw">{{ getFleetCost(fleet) }} SP</div>\r\n		<div class="fleet-ship-top-right"></div>\r\n	</div>\r\n\r\n	<div class="fleet-ship-middle">\r\n		<div class="fleet-ship-left"></div>\r\n\r\n		<div class="fleet-ship-inner">\r\n\r\n			<div class="card-container" ng-class="{\'zoom\':zoom}" ng-hide="searchOptions.columns < 1">\r\n				<div class="card-outer card-drop-target font-staw" ng-click="setSearchTypes([\'ship\'])"\r\n					droppable can-drop="$item.type == \'ship\'" drop="addFleetShip(fleet,$item)" drag-store="dragStore">\r\n					<div class="card-drop-target-title" ng-if="!isMobile">Click to search this card type</div>\r\n					<div class="card-drop-target-title" ng-if="isMobile">Tap to search this card type</div>\r\n					<div class="card-drop-target-inner">\r\n						<div class="card-drop-target-type">\r\n							<i class="fs fs-ship"></i><br/>Ship\r\n						</div>\r\n					</div>\r\n					<div ng-show="!isMobile" class="card-drop-target-subtitle">Drag here to add to fleet</div>\r\n					<div ng-show="isMobile && (!dragStore.item || dragStore.item.type != \'ship\')" class="card-drop-target-subtitle">Tap a ship card to select it</div>\r\n					<div ng-show="isMobile && dragStore.item && dragStore.item.type == \'ship\'" class="card-drop-target-subtitle">Tap here to add selected ship to fleet</div>\r\n				</div>\r\n			</div><!--\r\n\r\n			--><div class="card-container" ng-class="{\'zoom\':zoom}" droppable can-drop="$item.type == \'resource\' && $item != fleet.resource" drop="setFleetResource(fleet,$item)" drag-store="dragStore">\r\n				<div class="card-outer card-drop-target font-staw" ng-click="setSearchTypes([\'resource\'])">\r\n					<div class="card-drop-target-title"></div>\r\n					<div class="card-drop-target-inner">\r\n						<div class="card-drop-target-type">\r\n							<i class="fs fs-resource"></i><br/>Resource\r\n						</div>\r\n					</div>\r\n					<div class="card-drop-target-subtitle"></div>\r\n				</div>\r\n				<card card="fleet.resource" ship="ship" fleet="fleet" drag-store="dragStore"></card>\r\n			</div><!--\r\n\r\n			--><div class="card-container" ng-class="{\'zoom\':zoom}" ng-repeat="upgradeSlot in fleet.resource.upgradeSlots"\r\n				droppable can-drop="isUpgradeCompatible($item, upgradeSlot) && $item != upgradeSlot.occupant" drop="setUpgrade(fleet,fleet.resource,upgradeSlot,$item)" drag-store="dragStore">\r\n				<div class="card-outer card-drop-target font-staw" ng-click="setSearchTypes(upgradeSlot.type)">\r\n					<div class="card-drop-target-title">{{upgradeSlot.source}}<div ng-show="upgradeSlot.rules">{{upgradeSlot.rules}}</div></div>\r\n					<div class="card-drop-target-inner">\r\n						<div class="card-drop-target-type" ng-repeat="type in upgradeSlot.type">\r\n							<i class="fs fs-{{type}}"></i><br/>{{type|removeDashes}}\r\n						</div>\r\n					</div>\r\n					<div class="card-drop-target-subtitle"></div>\r\n				</div>\r\n				<card card="upgradeSlot.occupant" ship="ship" fleet="fleet" drag-store="dragStore"></card>\r\n			</div>\r\n\r\n		</div>\r\n\r\n	</div>\r\n\r\n	<div class="fleet-ship-bottom">\r\n		<div class="fleet-ship-bottom-left fleet-ship-bottom-left-long"></div>\r\n	</div>\r\n\r\n</div>\r\n'),n.put("fleet-export.html",'<div class="fleet-close-export" ng-show="searchOptions.showExport">\r\n	<button class="fleet-search-bigger" ng-click="searchOptions.showExport = false"><i class="fa fa-chevron-right"></i> Export</button>\r\n</div>\r\n\r\n<div class="export-container">\r\n	<div class="u-search-header"><div class="u-search-header-text">Copy Text Listing</div></div>\r\n	<label class="export-option"><input type="checkbox" ng-model="showSetNames">Include Expansion Names</label>\r\n	<!-- New checkbox here for the table-top simulator option. -->\r\n	<label class="export-option"><input type="radio" ng-model="exportType" value="traditional">Traditional Export</label>\r\n	<label class="export-option"><input type="radio" ng-model="exportType" value="tts">Table-Top Sim Export</label>\r\n	<!-- <label class="export-option"><input type="radio" ng-model="exportType" value="fleetSheet">Export JSON for Fleet Sheet</label> -->\r\n	<textarea class="export-text" ng-model="fleetText"></textarea>\r\n</div>\r\n'),n.put("fleet-list.html",'<div class="container-fluid">\r\n\r\n	<div class="row" >\r\n		<div class="col-md-4">\r\n		</div>\r\n	</div>\r\n\r\n</div>'),n.put("search-filter-group.html",'<div class="u-search-header" ng-click="showContent = !showContent"><div class="u-search-header-text">{{title}}</div></div>\r\n<div class="u-search-content" ng-show="showContent" ng-transclude></div>'),n.put("search.html",'<div class="u-search">\r\n\r\n	<div class="search-query-container">\r\n		<input class="u-search-query" ng-model="search.query" placeholder="Search" spellcheck="false" autocorrect="off">\r\n		<button ng-click="resetSearch()">Reset</button>\r\n		<button ng-click="showAdvanced = !showAdvanced">Advanced</button>\r\n	</div>\r\n\r\n	<div ng-show="showAdvanced && (!dragStore.item || dragStore.source == \'search\')">\r\n\r\n		<div class="u-search-size">\r\n			<button class="u-search-smaller" ng-click="modifySearchColumns(-1)"><i class="fa fa-chevron-left"></i></button>\r\n			<div class="u-search-size-text">Resize Search Results</div>\r\n			<button class="u-search-bigger" ng-click="modifySearchColumns(1)"><i class="fa fa-chevron-right"></i></button>\r\n		</div>\r\n\r\n		<search-filter-group title="Faction" open>\r\n			<span ng-repeat="(faction,data) in search.factions">\r\n				<label class="u-label"><input type="checkbox" ng-model="data.search" > <div class="u-faction card-faction-{{faction}}"></div> {{faction|removeDashes}}</label>\r\n			</span>\r\n		</search-filter-group>\r\n\r\n		<search-filter-group title="Type" open>\r\n			<span class="u-search-type" ng-repeat="(type,data) in search.types">\r\n				<label class="u-label"><input type="checkbox" ng-model="data.search" > <i class="fs fs-{{type}}"></i> {{type|removeDashes}}</label>\r\n			</span>\r\n		</search-filter-group>\r\n\r\n		<search-filter-group title="Uniqueness" open>\r\n			<span>\r\n				<label class="u-label"><input type="checkbox" ng-model="search.unique"> <i class="fs fs-unique"></i> Unique</label>\r\n			</span>\r\n			<span>\r\n				<label class="u-label"><input type="checkbox" ng-model="search.generic"> <i class="fs"></i> Generic</label>\r\n			</span>\r\n		</search-filter-group>\r\n\r\n		<search-filter-group title="Order By" open>\r\n			<div class="u-search-filter-comment">\r\n				Order results by <select ng-model="search.sortBy" ng-options="sortable.value as sortable.name for sortable in sortables"></select>\r\n				<select ng-model="search.ascending"><option value="true">Ascending</option><option value="false">Descending</option></select>\r\n				<div class="u-order-default" ng-show="search.sortBy != defaults.search.sortBy || search.ascending != defaults.search.ascending">\r\n					<button ng-click="defaults.search.sortBy = search.sortBy; defaults.search.ascending = search.ascending">Set as Default</button>\r\n					<div>Default order is saved in browser for future sessions.</div>\r\n				</div>\r\n			</div>\r\n		</search-filter-group>\r\n\r\n		<search-filter-group title="Custom Filter" open>\r\n			<div class="u-search-filter-comment" ng-init="search.filterOperator = \'<\'">\r\n				<select ng-model="search.filterField"><option value="">- No Filter -</option><option ng-repeat="sortable in sortables" value="{{sortable.value}}">{{sortable.name}}</option></select>\r\n				<select ng-model="search.filterOperator"><option value="<">&lt;</option><option value="<=">&lt;=</option><option value="=">=</option><option value=">=">&gt;=</option><option value=">">&gt;</option></select>\r\n				<input ng-model="search.filterValue" placeholder="Value"></input>\r\n			</div>\r\n			<div class="u-search-filter-comment">\r\n				Filter On Maneuver: <select ng-model="search.maneuverType"><option value="">Any</option><option ng-repeat="maneuver in maneuvers" value="{{maneuver.value}}">{{maneuver.name}}</option></select>\r\n				<select ng-model="search.maneuverDifficulty"><option value="">Any</option><option ng-repeat="difficulty in difficulty_list" value="{{difficulty.value}}">{{difficulty.name}}</option></select>\r\n			</div>\r\n		</search-filter-group>\r\n\r\n		<search-filter-group title="Owned Expansions">\r\n			<div class="u-search-filter-comment">\r\n				Expansion filter settings are stored in your browser for future sessions. Uncheck the expansions you don\'t own. New expansions are automatically checked. These settings are not affected by the "Reset" button.\r\n			</div>\r\n			<div class="u-search-filter-comment">\r\n				<label class="u-label"><input type="checkbox" ng-model="search.ignoreSetsFilter"> Temporarily show all cards</label>\r\n			</div>\r\n			<button ng-click="uncheckAllSets()">Uncheck all sets</button>\r\n			<button ng-click="checkAllSets()">Check all sets</button>\r\n			<button ng-click="exportSets()">Export Sets</button>\r\n			<div class="u-search-filter-comment">Import Sets...</div>\r\n			<input type="file" multiple onchange="angular.element(this).scope().importSets(this)">\r\n			<div ng-repeat="set in setList | orderBy:\'-releaseDate\'" class="u-search-set" ng-hide="search.ignoreSetsFilter">\r\n				<label class="u-label"><input type="checkbox" ng-model="search.sets[set.id].search"> {{set.parentSet}}: {{set.name}}</label>\r\n			</div>\r\n		</search-filter-group>\r\n\r\n	</div>\r\n\r\n</div>\r\n\r\n<div ng-init="resultLimit = 10>\r\n\r\n	<div class="u-loading" ng-show="loading">Loading cards...</div>\r\n\r\n	<div class="card-container" ng-show="dragStore.item && dragStore.source != \'search\'" droppable can-drop="true" drop="$emit(\'removeFromFleetDropped\',$item)" drag-store="dragStore">\r\n		<div class="card-outer card-drop-target font-staw">\r\n			<div class="card-drop-target-inner">\r\n				<div class="card-drop-target-type">\r\n					<i class="fs fs-captain"></i><br/>Remove From Fleet\r\n				</div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n\r\n	<div ng-hide="dragStore.item && dragStore.source != \'search\'">\r\n\r\n		<div class="card-container" ng-repeat="card in cards | cardFilter:search | sortBy:search.sortBy:search.ascending | limitTo:resultLimit*search.columns">\r\n			<card card="card" drag-store="dragStore" drag-source="search"></card>\r\n		</div>\r\n\r\n		<div>\r\n			<button class="u-show-more" ng-hide="loading" ng-click="resultLimit = resultLimit + 10">Show More</button>\r\n		</div>\r\n\r\n	</div>\r\n\r\n</div>\r\n'),n.put("card-faction.html",'<div class="card-outer card-faction font-staw" ng-class="{ \'dragging\': faction == dragStore.item }" draggable drag-item="faction" drag-store="dragStore" drag-source="dragSource">\r\n\r\n	<div class="card-faction-image card-faction-{{faction.factions[0]}}"></div>\r\n\r\n	<div class="card-faction-name">{{faction.name | uppercase}}</div>\r\n\r\n</div>'),n.put("card-resource.html",'<div class="card-outer card-resource font-staw" ng-class="{ \'dragging\': resource == dragStore.item }" draggable drag-item="resource" drag-store="dragStore" drag-source="dragSource">\r\n\r\n	<div class="card-resource-header">\r\n		<span class="card-title" ng-class="{\'card-title-long\': resource.name.length > 20}">{{resource.name | uppercase}}<span ng-hide="resource.hideCost"> ({{resource|valueOf:\'cost\':ship:fleet}} SP)</span></span>\r\n		\r\n	</div>\r\n	\r\n	<div class="card-resource-header pull-right">\r\n		<i ng-if="resource.opBanned" class="card-OP-banned-icon fs fs-opBanned"></i>\r\n	</div>\r\n	\r\n	<div class="card-text">\r\n		<div class="card-text-inner font-staw-alt" ng-bind-html="resource.text | icons"></div>\r\n	</div>\r\n\r\n</div>'),n.put("card-ship-class.html",'<div class="card-outer card-ship card-shipclass font-staw">\r\n\r\n	<div class="card-shipclass-arcs arc-faction-{{ship.factions[0]}}">\r\n		<div class="arc arc-fill arc-fore-90" ng-show="shipClass.frontArc == 90"></div>\r\n		<div class="arc arc-fill arc-fore-180" ng-show="shipClass.frontArc == 180"></div>\r\n		<div class="arc arc-rear-90" ng-show="shipClass.rearArc == 90"></div>\r\n		<div class="arc-hole"></div>\r\n		<div class="arc-name">{{getBaseTileName(ship)}}</div>\r\n		<div class="arc-stats">\r\n			<div class="arc-stat card-ship-stat-attack text-center">{{ship|valueOf:\'attack\':ship:fleet}}</div>\r\n			<div class="arc-stat card-ship-stat-agility text-center">{{ship|valueOf:\'agility\':ship:fleet}}</div>\r\n			<div class="arc-stat card-ship-stat-hull text-center">{{ship|valueOf:\'hull\':ship:fleet}}</div>\r\n			<div class="arc-stat card-ship-stat-shields text-center">{{ship|valueOf:\'shields\':ship:fleet}}</div>\r\n		</div>\r\n		<div class="arc-actions"><i ng-repeat="action in ship.actions" class="fs fs-{{action}}"></i></div>\r\n	</div>\r\n\r\n	<!-- <div class="card-image" ng-class="{\'card-image-large\': Object.keys(shipClass.maneuvers).length > 9}"></div> -->\r\n	<div ng-class="(shipClass.id == \'borg_cube\' || shipClass.id == \'kelvin_constitution_class\') ? \'card-image-large\' : \'card-image\'"></div>\r\n\r\n	<div class="card-corner-top-left pull-left">\r\n		<div class="card-corner-inner pull-right"></div>\r\n	</div>\r\n	<div class="card-corner-top-right pull-right">\r\n		<div class="card-corner-inner card-corner-inner-faction"></div>\r\n	</div>\r\n	<div class="card-title-container text-center">\r\n		<span class="card-shipclass-title" ng-class="{\'card-title-long\': shipClass.name.length >= 20 }">{{shipClass.name | uppercase}}</span>\r\n	</div>\r\n\r\n	<div ng-class="(shipClass.id == \'borg_cube\' || shipClass.id == \'kelvin_constitution_class\') ? \'card-border-left-tall pull-left\' : \'card-border-left pull-left\'"></div>\r\n\r\n	<div ng-class="(shipClass.id == \'borg_cube\' || shipClass.id == \'kelvin_constitution_class\') ? \'card-border-right-tall pull-right\' : \'card-border-right pull-right\'"></div>\r\n\r\n	<div ng-class="(shipClass.id == \'borg_cube\' || shipClass.id == \'kelvin_constitution_class\') ? \'card-class-maneuvers-tall\' : \'card-class-maneuvers\'">\r\n		<div class="card-maneuver-row" ng-repeat="speed in speeds track by $index">\r\n			<div class="card-maneuver-box" ng-class="{\'speed-reverse\': speed < 0}"><span ng-show="speed != 9">{{abs(speed)}}</span></div>\r\n			<div class="card-maneuver-box" ng-class="{\'card-maneuver-box-highlight\': shipClass.maneuvers[speed].turn || shipClass.maneuvers[speed][\'90-degree-rotate\']}">\r\n				<i class="fs fs-turn-left speed-{{shipClass.maneuvers[speed].turn}}" ng-show="shipClass.maneuvers[speed].turn"></i>\r\n				<i class="fs fs-90-rotate-left speed-{{shipClass.maneuvers[speed][\'90-degree-rotate\']}}" ng-show="shipClass.maneuvers[speed][\'90-degree-rotate\']"></i>\r\n			</div>\r\n			<div class="card-maneuver-box" ng-class="{\'card-maneuver-box-highlight\': shipClass.maneuvers[speed].bank || shipClass.maneuvers[speed].spin || shipClass.maneuvers[speed].flank || shipClass.maneuvers[speed][\'45-degree-rotate\']}">\r\n				<i class="fs fs-bank-left speed-{{shipClass.maneuvers[speed].bank}}" ng-show="shipClass.maneuvers[speed].bank"></i>\r\n				<i class="fs fs-spin-left speed-{{shipClass.maneuvers[speed].spin}}" ng-show="shipClass.maneuvers[speed].spin"></i>\r\n				<i class="fs fs-left-flank speed-{{shipClass.maneuvers[speed].flank}}" ng-show="shipClass.maneuvers[speed].flank"></i>\r\n				<i class="fs fs-45-rotate-left speed-{{shipClass.maneuvers[speed][\'45-degree-rotate\']}}" ng-show="shipClass.maneuvers[speed][\'45-degree-rotate\']"></i>\r\n			</div>\r\n			<div class="card-maneuver-box" ng-class="{\'card-maneuver-box-highlight\': shipClass.maneuvers[speed].straight || shipClass.maneuvers[speed].stop}">\r\n				<i class="fs speed-{{shipClass.maneuvers[speed].straight}}" ng-class="{\'fs-forward\': speed > 0, \'fs-reverse\': speed < 0}" ng-show="shipClass.maneuvers[speed].straight"></i>\r\n				<i class="fs fs-stop speed-{{shipClass.maneuvers[speed].stop}}" ng-show="shipClass.maneuvers[speed].stop"></i>\r\n			</div>\r\n			<div class="card-maneuver-box" ng-class="{\'card-maneuver-box-highlight\': shipClass.maneuvers[speed].bank || shipClass.maneuvers[speed].spin || shipClass.maneuvers[speed].flank || shipClass.maneuvers[speed][\'45-degree-rotate\']}">\r\n				<i class="fs fs-bank-right speed-{{shipClass.maneuvers[speed].bank}}" ng-show="shipClass.maneuvers[speed].bank"></i>\r\n				<i class="fs fs-spin-right speed-{{shipClass.maneuvers[speed].spin}}" ng-show="shipClass.maneuvers[speed].spin"></i>\r\n				<i class="fs fs-right-flank speed-{{shipClass.maneuvers[speed].flank}}" ng-show="shipClass.maneuvers[speed].flank"></i>\r\n				<i class="fs fs-45-rotate-right speed-{{shipClass.maneuvers[speed][\'45-degree-rotate\']}}" ng-show="shipClass.maneuvers[speed][\'45-degree-rotate\']"></i>\r\n			</div>\r\n			<div class="card-maneuver-box" ng-class="{\'card-maneuver-box-highlight\': shipClass.maneuvers[speed].turn || shipClass.maneuvers[speed][\'90-degree-rotate\']}">\r\n				<i class="fs fs-turn-right speed-{{shipClass.maneuvers[speed].turn}}" ng-show="shipClass.maneuvers[speed].turn"></i>\r\n				<i class="fs fs-90-rotate-right speed-{{shipClass.maneuvers[speed][\'90-degree-rotate\']}}" ng-show="shipClass.maneuvers[speed][\'90-degree-rotate\']"></i>\r\n			</div>\r\n			<div class="card-maneuver-box" ng-class="{\'card-maneuver-box-highlight\': shipClass.maneuvers[speed].about}">\r\n				<i class="fs fs-come-about speed-{{shipClass.maneuvers[speed].about}}" ng-show="shipClass.maneuvers[speed].about"></i>\r\n			</div>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="card-corner-bottom-left pull-left">\r\n		<div class="card-corner-inner"></div>\r\n	</div>\r\n\r\n	<div class="card-corner-bottom-right pull-right">\r\n		<div class="card-corner-inner"></div>\r\n	</div>\r\n\r\n	<div class="card-border-bottom"></div>\r\n\r\n	<div style="clear: both"></div>\r\n\r\n</div>\r\n'),n.put("card-ship.html",'<div class="card-outer card-ship font-staw" ng-class="{ \'card-unique\': ship.unique, \'card-mirror\': ship.mirror, \'dragging\': ship == dragStore.item }" draggable drag-item="ship" drag-store="dragStore" drag-source="dragSource">\r\n\r\n	<div class="card-image"></div>\r\n\r\n	<div class="card-corner-top-left pull-left"><i ng-if="ship.unique" class="card-unique-icon fs fs-unique pull-left"></i>\r\n		<div class="card-corner-inner pull-right"></div>\r\n	</div>\r\n	<div class="card-corner-top-right pull-right"><i ng-repeat="faction in ship|valueOf:\'factions\':ship:fleet" class="card-ship-faction card-faction-{{faction}} card-faction-{{$index}} fs fs-empty" ng-class="{\'card-factions-multiple\': (ship|valueOf:\'factions\':ship:fleet).length > 1}"></i>\r\n		<div class="card-corner-inner card-corner-inner-faction"></div>\r\n	</div>\r\n	<div class="card-title-container text-center">\r\n		<span class="card-title" ng-class="{\'card-title-long\': ship.name.length >= 20 }">{{ship.name | uppercase}}</span>\r\n	</div>\r\n\r\n	<div class="card-ship-stats pull-left">\r\n		<div class="card-ship-stat card-ship-stat-attack text-right" tooltip-show="fleet" tooltip="ship|valueOf:\'attack\':ship:fleet:false:{modifiers:true}" tooltip-position="e"><span class="card-skill-plus" ng-show="ship.isShipModifier">+</span>{{ship|valueOf:\'attack\':ship:fleet}}</div>\r\n		<div class="card-ship-stat card-ship-stat-agility text-right" tooltip-show="fleet" tooltip="ship|valueOf:\'agility\':ship:fleet:false:{modifiers:true}" tooltip-position="e"><span class="card-skill-plus" ng-show="ship.isShipModifier">+</span>{{ship|valueOf:\'agility\':ship:fleet}}</div>\r\n		<div class="card-ship-stat card-ship-stat-hull text-right" tooltip-show="fleet" tooltip="ship|valueOf:\'hull\':ship:fleet:false:{modifiers:true}" tooltip-position="e"><span class="card-skill-plus" ng-show="ship.isShipModifier">+</span>{{ship|valueOf:\'hull\':ship:fleet}}</div>\r\n		<div class="card-ship-stat card-ship-stat-shields text-right" tooltip-show="fleet" tooltip="ship|valueOf:\'shields\':ship:fleet:false:{modifiers:true}" tooltip-position="e"><span class="card-skill-plus" ng-show="ship.isShipModifier">+</span>{{ship|valueOf:\'shields\':ship:fleet}}</div>\r\n	</div>\r\n\r\n	<div class="card-border-right pull-right"></div>\r\n\r\n	<div class="card-ship-silhouette pull-left"><i ng-if="ship.faq" class="card-faq-icon fs fs-faq pull-left"></i></div>\r\n\r\n	<div class="card-ship-class-container text-center">\r\n		<span class="card-ship-class" ng-class="{\'card-ship-class-long\': ship.class.length >= 25 }">{{ship.class | uppercase}}</span>\r\n	</div>\r\n\r\n	<div class="card-text font-staw-alt"><div class="card-text-inner" ng-bind-html="ship.text | icons" ng-class="{\'card-text-inner-long\': ship.text.length > 230 }"></div></div>\r\n\r\n	<div class="card-ship-action-bar text-center">\r\n		<i ng-repeat="action in ship.actions" class="fs fs-{{action}}"></i>\r\n	</div>\r\n\r\n	<div class="card-corner-bottom-right pull-right">\r\n		<div class="card-corner-inner"></div>\r\n	</div>\r\n\r\n	<div class="card-ship-cost pull-right">{{ship|valueOf:\'cost\':ship:fleet}}</div>\r\n\r\n	<div class="card-ship-upgrade-bar">\r\n		<i ng-repeat="upgrade in ship.upgrades track by $index" class="fs fs-{{upgrade.type[0]}}" ng-class="{\'card-ship-upgrade-occupied\': upgrade.occupant}"></i>\r\n	</div>\r\n	<div style="clear: both"></div>\r\n\r\n</div>\r\n'),n.put("card-token.html",'<div class="card-outer card-token font-staw">\r\n\r\n	<div class="card-token-header">\r\n		<span class="card-title" ng-class="{\'card-title-long\': token.name.length > 20}">{{token.name | uppercase}}</span>\r\n	</div>\r\n\r\n	<div class="card-text">\r\n		<div class="card-text-inner font-staw-alt" ng-bind-html="token.text | icons"></div>\r\n	</div>\r\n\r\n</div>'),n.put("card-upgrade.html",'<div class="card-outer card-upgrade font-staw" ng-class="{ \'card-unique\': upgrade.unique, \'card-OnePerShip\': upgrade.OnePerShip, \'card-factionFederation\': upgrade.factionFederation, \'card-FrontArc\': upgrade.FrontArc, \'card-RearArc\': upgrade.RearArc, \'card-Hull\': upgrade.Hull, \'card-mirror\': upgrade.mirror, \'dragging\': upgrade == dragStore.item }" draggable drag-item="upgrade" drag-store="dragStore" drag-source="dragSource">\r\n\r\n	<div class="card-image"></div>\r\n\r\n\r\n\r\n	<div class="card-corner-top-left pull-left">\r\n		<i ng-if="upgrade.unique" class="card-unique-icon fs fs-unique pull-left"></i>\r\n		<i ng-if="upgrade.OnePerShip" class="card-OnePerShip-icon fs fs-OnePerShip pull-left"></i>\r\n		<i ng-if="upgrade.specialization" class="card-specialization-icon fs fs-specialization pull-left"></i>\r\n		<div class="card-corner-inner pull-right"></div>\r\n	</div>\r\n\r\n	<div class="card-title-container text-left">\r\n		<span ng-if="upgrade.showType" class="card-captain pull-right">{{upgrade.type|uppercase|removeDashes}}</span>\r\n		<span ng-if="upgrade|valueOf:\'attack\':ship:fleet" class="card-weapon-attack pull-right" tooltip-show="ship" tooltip="upgrade|valueOf:\'attack\':ship:fleet:false:{modifiers:true}">{{upgrade|valueOf:\'attack\':ship:fleet}}</span>\r\n		<span class="card-title"\r\n			ng-class="{ \'card-title-long\': upgrade.name.length >= 24 || (upgrade.showType && upgrade.name.length + upgrade.type.length >= 24) || (upgrade.attack && upgrade.name.length >= 20),\r\n						\'card-title-super-long\': upgrade.name.length >= 31 || upgrade.showType && upgrade.name.length + upgrade.type.length >= 31,\r\n			}">{{upgrade.name | uppercase}}</span>\r\n	</div>\r\n\r\n	<div class="card-border-left pull-left">\r\n		<i ng-if="upgrade.captainFederation" class="card-captainFederation-icon fs fs-captainFederation"></i>\r\n		<i ng-if="upgrade.captainBajoren" class="card-captainBajoren-icon fs fs-captainBajoren"></i>\r\n		<i ng-if="upgrade.captainVulcan" class="card-captainVulcan-icon fs fs-captainVulcan"></i>\r\n		<i ng-if="upgrade.captainKlingon"  class="card-captainKlingon-icon fs fs-captainKlingon"></i>\r\n		<i ng-if="upgrade.captainRomulan" class="card-captainRomulan-icon fs fs-captainRomulan"></i>\r\n		<i ng-if="upgrade.captainDominion" class="card-captainDominion-icon fs fs-captainDominion"></i>\r\n		<i ng-if="upgrade.captainIndependent" class="card-captainIndependent-icon fs fs-captainIndependent"></i>\r\n		<i ng-if="upgrade.captainFerengi" class="card-captainFerengi-icon fs fs-captainFerengi"></i>\r\n		<i ng-if="upgrade.captainKazon" class="card-captainKazon-icon fs fs-captainKazon"></i>\r\n		<i ng-if="upgrade.captainXindi" class="card-captainFerengi-icon fs fs-captainFerengi"></i>\r\n		<i ng-if="upgrade.captainBorg" class="card-captainBorg-icon fs fs-captainBorg"></i>\r\n		<i ng-if="upgrade.captain8472" class="card-captain8472-icon fs fs-captain8472"></i>\r\n		<i ng-if="upgrade.captainMU" class="card-captainMU-icon fs fs-captainMU"></i>\r\n\r\n		<i ng-if="upgrade.shipFederation" class="card-shipFederation-icon fs fs-card-shipFederation"></i>\r\n		<i ng-if="upgrade.shipBajoren" class="card-shipBajoren-icon fs fs-card-shipBajoren"></i>\r\n		<i ng-if="upgrade.shipVulcan" class="card-shipVulcan-icon fs fs-card-shipVulcan"></i>\r\n		<i ng-if="upgrade.shipKlingon" class="card-shipKlingon-icon fs fs-shipKlingon"></i>\r\n		<i ng-if="upgrade.shipRomulan" class="card-shipRomulan-icon fs fs-shipRomulan"></i>\r\n		<i ng-if="upgrade.shipDominion" class="card-shipDominion-icon fs fs-shipDominion"></i>\r\n		<i ng-if="upgrade.shipIndependent" class="card-shipIndependent-icon fs fs-shipIndependent"></i>\r\n		<i ng-if="upgrade.shipFerengi" class="card-shipFerengi-icon fs fs-shipFerengi"></i>\r\n		<i ng-if="upgrade.shipKazon" class="card-shipKazon-icon fs fs-shipKazon"></i>\r\n		<i ng-if="upgrade.shipXindi" class="card-shipXindi-icon fs fs-shipXindi"></i>\r\n		<i ng-if="upgrade.shipBorg" class="card-shipBorg-icon fs fs-shipBorg"></i>\r\n		<i ng-if="upgrade.ship8472" class="card-ship8472-icon fs fs-ship8472"></i>\r\n		<i ng-if="upgrade.shipMU" class="card-shipMU-icon fs fs-shipMU"></i>\r\n\r\n		<i ng-if="upgrade.costFederation" class="card-costFederation-icon">{{upgrade|valueOf:\'costFederation\':ship:fleet}}</i>\r\n		<i ng-if="upgrade.costBajoren" class="card-costBajoren-icon">{{upgrade|valueOf:\'costFederation\':ship:fleet}}</i>\r\n		<i ng-if="upgrade.costVulcan" class="card-costVulcan-icon">{{upgrade|valueOf:\'costVulcan\':ship:fleet}}</i>\r\n		<i ng-if="upgrade.costKlingon" class="card-costKlingon-icon">{{upgrade|valueOf:\'costKlingon\':ship:fleet}}</i>\r\n		<i ng-if="upgrade.costRomulan" class="card-costRomulan-icon">{{upgrade|valueOf:\'costRomulan\':ship:fleet}}</i>\r\n		<i ng-if="upgrade.costDominion" class="card-costDominion-icon">{{upgrade|valueOf:\'costDominion\':ship:fleet}}</i>\r\n		<i ng-if="upgrade.costIndependent" class="card-costIndependent-icon">{{upgrade|valueOf:\'costIndependent\':ship:fleet}}</i>\r\n		<i ng-if="upgrade.costFerengi" class="card-costFerengi-icon">{{upgrade|valueOf:\'costFerengi\':ship:fleet}}</i>\r\n		<i ng-if="upgrade.costKazon" class="card-costKazon-icon">{{upgrade|valueOf:\'costKazon\':ship:fleet}}</i>\r\n		<i ng-if="upgrade.costXindi" class="card-costXindi-icon">{{upgrade|valueOf:\'costXindi\':ship:fleet}}</i>\r\n		<i ng-if="upgrade.costBorg" class="card-costBorg-icon">{{upgrade|valueOf:\'costBorg\':ship:fleet}}</i>\r\n		<i ng-if="upgrade.cost8472" class="card-cost8472-icon">{{upgrade|valueOf:\'cost8472\':ship:fleet}}</i>\r\n		<i ng-if="upgrade.costMU" class="card-costMU-icon">{{upgrade|valueOf:\'costMU\':ship:fleet}}</i>\r\n\r\n		<i ng-if="upgrade.attackConstraint" class="card-attackConstraint-icon">{{upgrade|valueOf:\'attackConstraint\':ship:fleet}}</i>\r\n		<i ng-if="upgrade.hullConstraint" class="card-hullConstraint-icon">{{upgrade|valueOf:\'hullConstraint\':ship:fleet}}</i>\r\n		<i ng-if="upgrade.FrontArc" class="card-FrontArc-icon fs fs-FrontArc"></i>\r\n		<i ng-if="upgrade.RearArc" class="card-RearArc-icon fs fs-RearArc"></i>\r\n		<i ng-if="upgrade.arc360" class="card-360Arc-icon fs fs-360Arc"></i>\r\n		<i ng-if="upgrade.shipLimit" class="card-shipLimit-icon fs fs-shipLimit"></i>\r\n		<i ng-if="upgrade.faq" class="card-faq-icon fs fs-faq"></i>\r\n		<i ng-if="upgrade.opBanned" class="card-OP-banned-icon fs fs-opBanned"></i>\r\n\r\n	</div>\r\n\r\n	<div class="card-text">\r\n		<div ng-if="upgrade.range" class="card-weapon-range pull-right">{{upgrade|valueOf:\'range\':ship:fleet}}</div>\r\n		<div class="card-text-inner font-staw-alt" ng-bind-html="upgrade.text | icons" ng-class="{\'card-text-inner-long\': upgrade.text.length > 300, \'card-text-inner-super-long\': upgrade.text.length > 530, \'text-left\': upgrade.range }"></div>\r\n	</div>\r\n\r\n	<div class="card-upgrade-cost pull-right"><div ng-repeat="faction in upgrade|valueOf:\'factions\':ship:fleet" class="card-upgrade-faction card-faction-{{ (upgrade|valueOf:\'factions\':ship:fleet).length - $index}}"><div class="card-upgrade-faction-black"></div><div class="card-upgrade-faction-icon card-faction-{{faction}}"></div></div><div class="card-upgrade-cost-value" ng-class="{\'card-upgrade-cost-free\': \'{{upgrade|valueOf:\'free\':ship:fleet}}\' }" tooltip-show="ship" tooltip="upgrade|valueOf:\'cost\':ship:fleet:false:{modifiers:true}">{{upgrade|valueOf:\'cost\':ship:fleet}}</div></div>\r\n\r\n	<div ng-if="upgrade.type == \'captain\' || upgrade.type == \'admiral\' || (upgrade|valueOf:\'skill\':ship:fleet)" class="card-skill-container pull-left">\r\n		<div class="card-skill" tooltip-show="ship" tooltip="upgrade|valueOf:\'skill\':ship:fleet:false:{modifiers:true}" tooltip-position="nw-alt"><span class="card-skill-plus" ng-show="upgrade.isSkillModifier && upgrade.skill >= 0">+</span>{{upgrade|valueOf:\'skill\':ship:fleet}}</div>\r\n	</div>\r\n\r\n	<div ng-if="!(upgrade|valueOf:\'skill\':ship:fleet) && upgrade.type != \'captain\' && upgrade.type != \'admiral\' " class="card-upgrade-type pull-left fs fs-{{upgrade.type}}"></div>\r\n\r\n	<div class="card-border-bottom">\r\n		<i ng-if="upgrade.talents" ng-repeat="talent in range(upgrade.talents) track by $index" class="fs fs-talent"></i>\r\n		<i ng-repeat="slot in upgrade.upgradeSlots track by $index" ng-if="slot.showOnCard" class="fs fs-{{slot.type[0]}}" ng-class="{\'card-upgrades-long\': upgrade.upgradeSlots.length > 2}"></i>\r\n	</div>\r\n\r\n<i ng-if="upgrade.alliance" class="card-alliance-icon fs fs-alliance">\r\n\r\n	<div style="clear: both"></div>\r\n\r\n</div>\r\n'),n.put("card.html",'<div ng-if="card" ng-switch on="card.type">\r\n	<card-ship 			ng-switch-when="ship" ship="card" drag-store="dragStore" drag-source="dragSource" fleet="fleet"></card-ship>\r\n	<card-ship 			ng-switch-when="flagship" ship="card" drag-store="dragStore" drag-source="dragSource" fleet="fleet"></card-ship>\r\n	<card-ship-class	ng-switch-when="ship-class" ship-class="card" ship="ship" fleet="fleet"></card-ship-class>\r\n	<card-resource 		ng-switch-when="resource" resource="card" drag-store="dragStore" drag-source="dragSource" ship="ship" fleet="fleet"></card-resource>\r\n	<card-token 		ng-switch-when="token" token="card" drag-store="dragStore" drag-source="dragSource" ship="ship" fleet="fleet"></card-token>\r\n	<card-faction 		ng-switch-when="faction" faction="card" drag-store="dragStore" drag-source="dragSource" ship="ship" fleet="fleet"></card-faction>\r\n	<card-upgrade 		ng-switch-default upgrade="card" drag-store="dragStore" drag-source="dragSource" ship="ship" fleet="fleet"></card-upgrade>\r\n</div>')}]);
