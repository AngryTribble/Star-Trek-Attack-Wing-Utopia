var module;function wrapInterceptors(n,a,t){a=a.type?"["+a.type+"] "+a.name:a;(n instanceof Function||!n.length)&&(n=[n]),$.each(n,(function(n,i){i instanceof Function?t.push({fn:i,priority:50,source:a}):i.fn?(i.priority=i.priority||50,i.source=i.source||a,t.push(i)):console.log("Invalid interceptor",i)}))}(module=angular.module("utopia-card",["utopia-tooltip","utopia-card-ship","utopia-card-ship-class","utopia-card-upgrade","utopia-card-resource","utopia-dragdrop","utopia-valueof"])).directive("card",(function(){return{scope:{card:"=",ship:"=",fleet:"=",dragStore:"=",dragSource:"@"},restrict:"E",templateUrl:"card.html"}})),module.filter("icons",(function(){return function(n){return n.replace(/\[([^\]]*)\]/g,"<i class='fs fs-$1'></i>").replace(/\n/g,"<br/>")}})),(module=angular.module("utopia-card-faction",[])).directive("cardFaction",(function(){return{scope:{faction:"=",dragStore:"=",dragSource:"="},templateUrl:"card-faction.html",controller:["$scope",function(n){}]}})),(module=angular.module("utopia-card-loader",["utopia-card-rules","utopia-card-ship","utopia-card-upgrade","utopia-card-resource","utopia-card-faction","utopia-card-token"])).factory("cardLoader",["$http","$filter","cardRules","$factions",function(n,a,t,i){var c=a("valueOf");return function(e,o,r,u,s){function p(n,a){var t=!1;return $.each(a,(function(a,i){if(n.id==i.id&&n.type==i.type)return t=!0,!1})),t}var f={canJoinFleet:!0,intercept:{ship:{},fleet:{}}};var l={intercept:{ship:{},fleet:{}},canEquip:!0,canEquipCaptain:!0,canEquipFaction:!0,showType:!0};var h={intercept:{ship:{},fleet:{}},canEquip:!0,canEquipAdmiral:!0,canEquipFaction:!0,isSkillModifier:!0,showType:!0};var F={intercept:{ship:{},fleet:{}},canEquip:!0,canEquipAmbassador:!0,canEquipFaction:!0,isSkillModifier:!0,showType:!0};var d={intercept:{ship:{},fleet:{}},canEquip:!0,canEquipFaction:!0};var y={intercept:{ship:{},fleet:{}},canEquip:!0,canEquipFaction:!0};n.get("data/data.json").success((function(n){var g=[];$.each(n.sets||[],(function(n,a){"copy"==a.type?g.push(a):function(n){o[n.id]?console.log("Duplicate set",n.id,n.name):o[n.id]=n}(a)})),$.each(n.ships||[],(function(n,a){"copy"==a.type?g.push(a):function(n){if(p(n,e))console.log("Duplicate card definition ignored",n.id);else{n.mirror=i.hasFaction(n,"mirror-universe");for(var a=0;a<n.upgrades.length;a++)"string"==typeof n.upgrades[a]&&(n.upgrades[a]={type:[n.upgrades[a]],source:"ship"});$.extend(!0,n,f),n.squadron&&(n.canJoinFleet=function(n,a,t){var i=0,c=0;return $.each(t.ships,(function(n,a){a.squadron?c++:a.hull>=4&&i++})),i>c}),t[n.type+":"+n.id]&&$.extend(!0,n,t[n.type+":"+n.id]),$.each(n.upgradeSlots||[],(function(a,t){t.source||(t.source=n.name)})),n.intercept.ship.cost?n.intercept.ship.cost=[n.intercept.ship.cost]:n.intercept.ship.cost=[],n.intercept.ship.cost.push({source:"Faction Penalty",priority:1,fn:function(n,a,t,e){if(!i.match(n,a,a,t)){var o=c(n,"factionPenalty",a,t);return(e instanceof Function?e(n,a,t,0):e)+o}return e}}),e.push(n)}}(a)})),$.each(n.shipClasses||[],(function(n,a){"copy"==a.type?g.push(a):function(n){r[n.id]?console.log("Duplicate ship class",n.id,n.name,r[n.id].name):r[n.id]=n}(a)})),$.each(n.captains||[],(function(n,a){"copy"==a.type?g.push(a):function(n){if(p(n,e))console.log("Duplicate card definition ignored",n.id);else{$.extend(!0,n,l),null==n.factionPenalty&&(n.factionPenalty=1),n.mirror=i.hasFaction(n,"mirror-universe"),n.upgradeSlots=[];for(var a=0;a<n.talents;a++)n.upgradeSlots.push({type:["talent"],source:n.name});t[n.type+":"+n.id]&&$.extend(!0,n,t[n.type+":"+n.id]),$.each(n.upgradeSlots||[],(function(a,t){t.source||(t.source=n.name)})),e.push(n)}}(a)})),$.each(n.admirals||[],(function(n,a){"copy"==a.type?g.push(a):function(n){if(p(n,e))console.log("Duplicate card definition ignored",n.id);else{$.extend(!0,n,h),null==n.factionPenalty&&(n.factionPenalty=3),n.mirror=i.hasFaction(n,"mirror-universe"),n.upgradeSlots=[];for(var a=0;a<n.talents;a++)n.upgradeSlots.push({type:["talent"],source:n.name});n.intercept.ship.skill=function(a,t,i,c){return a==t.captain&&(c=(c instanceof Function?c(a,t,i,0):c)+n.skill),c},t[n.type+":"+n.id]&&$.extend(!0,n,t[n.type+":"+n.id]),$.each(n.upgradeSlots||[],(function(a,t){t.source||(t.source=n.name)})),e.push(n)}}(a)})),$.each(n.ambassadors||[],(function(n,a){"copy"==a.type?g.push(a):function(n){p(n,e)?console.log("Duplicate card definition ignored",n.id):($.extend(!0,n,F),null==n.factionPenalty&&(n.factionPenalty=0),n.mirror=i.hasFaction(n,"mirror-universe"),t[n.type+":"+n.id]&&$.extend(!0,n,t[n.type+":"+n.id]),$.each(n.upgradeSlots||[],(function(a,t){t.source||(t.source=n.name)})),e.push(n))}(a)})),$.each(n.upgrades||[],(function(n,a){"copy"==a.type?g.push(a):function(n){p(n,e)?console.log("Duplicate card definition ignored",n.id):($.extend(!0,n,d),null==n.factionPenalty&&(n.factionPenalty=1),n.mirror=i.hasFaction(n,"mirror-universe"),t[n.type+":"+n.id]&&$.extend(!0,n,t[n.type+":"+n.id]),$.each(n.upgradeSlots||[],(function(a,t){t.source||(t.source=n.name)})),e.push(n))}(a)})),$.each(n.resources||[],(function(n,a){"copy"==a.type?g.push(a):function(n){$.extend(!0,n,y),t[n.type+":"+n.id]&&$.extend(!0,n,t[n.type+":"+n.id]),e.push(n)}(a)})),$.each(n.others||[],(function(n,i){"copy"==i.type?g.push(i):function(n){if("fleet-captain"==n.type){for(var i=0;i<n.talentAdd;i++)n.upgradeSlots.push({type:["talent"],source:"Fleet Captain",rules:"Free talent if Captain has an empty talent slot",showOnCard:!0,intercept:{ship:{cost:{priority:-1,fn:function(n,t,i,c){if(!t.captain)return c;var e=a("upgradeSlots")(t.captain),o=!1;return $.each(e,(function(n,a){a.type.indexOf("talent")>=0&&!a.occupant&&(o=!0)})),o?0:c}}}}});for(i=0;i<n.techAdd;i++)n.upgradeSlots.push({type:["tech"],source:"Fleet Captain",showOnCard:!0});for(i=0;i<n.weaponAdd;i++)n.upgradeSlots.push({type:["weapon"],source:"Fleet Captain",showOnCard:!0});for(i=0;i<n.crewAdd;i++)n.upgradeSlots.push({type:["crew"],source:"Fleet Captain",showOnCard:!0});n.intercept.ship.skill=function(a,t,i,c){return a==t.captain&&(c=(c instanceof Function?c(a,t,i,0):c)+n.skill),c}}if("flagship"==n.type){var c=n;c.intercept.ship={attack:function(n,a,t,i){return n==a&&"flagship"!=a.type?(i instanceof Function?i(n,a,t,0):i)+c.attack:i},agility:function(n,a,t,i){return n==a&&"flagship"!=a.type?(i instanceof Function?i(n,a,t,0):i)+c.agility:i},hull:function(n,a,t,i){return n==a&&"flagship"!=a.type?(i instanceof Function?i(n,a,t,0):i)+c.hull:i},shields:function(n,a,t,i){return n==a&&"flagship"!=a.type?(i instanceof Function?i(n,a,t,0):i)+c.shields:i}}}if("token"==n.type){if(u[n.id])return void console.log("Duplicate token",n.id,n.name);u[n.id]=n}t[n.type+":"+n.id]&&$.extend(!0,n,t[n.type+":"+n.id]),e.push(n)}(i)})),function(n){$.each(n||[],(function(n,a){$.each(e,(function(n,t){if(t.id==a.of)return t.set=t.set.concat(a.set),!1}))}))}(g),$.each(e,(function(n,a){"ship"==a.type&&(a.classId&&r[a.classId]?a.classData=r[a.classId]:$.each(r,(function(n,t){if(t.name==a.class)return a.classId=n,a.classData=t,!1})),a.classId&&a.classData&&r[a.classId]||console.log("No class for ship",a.id,a.name,a.class,a.classId)),a.hasTokenInfo&&u[a.tokenId]&&(a.tokenData=u[a.tokenId])})),s&&s()}))}}]),(module=angular.module("utopia-card-resource",[])).directive("cardResource",(function(){return{scope:{resource:"=",ship:"=",fleet:"=",dragStore:"=",dragSource:"="},templateUrl:"card-resource.html",controller:["$scope",function(n){}]}})),(module=angular.module("utopia-card-rules",["utopia-valueof"])).filter("shipCardNamed",["$filter",function(n){var a=n("upgradeSlots");return function(n,t){if(n.name==t)return n;if(n.captain&&n.captain.name==t)return n.captain;var i=!1;return $.each(a(n),(function(n,a){if(a.occupant&&a.occupant.name==t)return i=a.occupant,!1})),i}}]),module.filter("fleetCardNamed",["$filter",function(n){var a=n("shipCardNamed");return function(n,t){if(!n)return!1;var i=!1;return $.each(n.ships,(function(n,c){if(i=a(c,t))return!1})),i}}]),module.factory("$factions",["$filter",function(n){var a=n("valueOf"),t={hasFaction:function(n,t,i,c){return!!n&&$.inArray(t,a(n,"factions",i,c))>=0},match:function(n,t,i,c){var e=!1;return $.each(a(n,"factions",i,c),(function(n,o){if($.each(a(t,"factions",i,c),(function(n,a){if(o==a)return e=!0,!1})),e)return!1})),e},list:["Federation","Klingon","Vulcan","Romulan","Bajoran","Dominion","Independent","Borg","Ferengi","Species 8472","Kazon","Mirror Universe","Xindi","Q Continuum"]};return t.listCodified=$.map(t.list,(function(n){return n.toLowerCase().replace(/ /g,"-")})),t}]),module.factory("cardRules",["$filter","$factions",function(n,a){var t=n("valueOf"),c=function(a){return function(t,i,c){var e=!1,o=n("upgradeSlots")(i);return $.each(o,(function(n,i){i.occupant&&i.occupant!=t&&i.occupant.name==a&&(e=!0)})),!e}},e=["crew","weapon","tech","talent","question","borg"],o=function(n){return $.inArray(n.type,e)>=0},r=function(n,a,t,i){return i instanceof Function?i(n,a,t):i},u=a.hasFaction,s=function(n,a){for(var t=[a],i=1;i<n;i++)t.push(angular.copy(a));return t},p=function(a,t){var i=["weapon"];return $.each(n("upgradeSlots")(t),(function(n,t){if(t.occupant&&t.occupant.name==a.source)return i=t.type,!1})),i},f=function(a,t,i){var c=!1;if(t.type==a)c=!0;else if("question"==t.type&&t.countsAsUpgrade)for(var e=n("upgradeSlots")(i),o=0;o<e.length;o++)if(e[o].occupant&&e[o].occupant.id==t.id&&$.inArray(a,e[o].type)>-1){c=!0;break}return c};return{"captain:Cap101":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"captain:Cap112":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"federation",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"captain:Cap115":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"federation",t,i)?0:1}},"captain:Cap111":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"captain:Cap114":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"independent",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"captain:Cap113":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"independent",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"captain:Cap116":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"independent",t,i)?0:1}},"ship:S362":{intercept:{ship:{cost:function(n,a,t,i){return"Ablative Hull Armor"==n.name||"Regenerative Shields"==n.name||"Multi-Vector Assault Mode"==n.name?-2:i}}}},"talent:E208":{canEquipFaction:function(n,a,t){return a.captain&&("Kor"==a.captain.name||"Koloth"==a.captain.name||"Kang"==a.captain.name)},intercept:{fleet:{skill:function(n,a,t,i){return n!=a.captain||"Kor"!=n.name&&"Kang"!=n.name&&"Koloth"!=n.name?i:r(n,a,t,i)+1}}}},"captain:Cap004":{upgradeSlots:[{type:["talent"],rules:"May equip Dahar Master Elite Talent for 0 SP",intercept:{ship:{cost:function(n,a,t,i){return"Dahar Master"==n.name?0:i}}}}]},"ship:S336":{upgradeSlots:[{type:["tech"],rules:"Klingon Upgrade, 4 SP cost or less",canEquip:function(n){return"klingon"==n.factions&&n.cost<=4},intercept:{ship:{cost:function(){return 0}}}}]},"weapon:W217":{attack:0,intercept:{self:{attack:function(n,a,i,c){return a?t(a,"attack",a,i):c}}},canEquipFaction:function(n,a,t){return a.hull<=3}},"weapon:W216":{attack:0,intercept:{self:{attack:function(n,a,i,c){return a?t(a,"attack",a,i):c}}},canEquipFaction:function(n,a,t){return u(a,"klingon",a,t)}},"talent:E209":{canEquipFaction:function(n,a,t){return u(a.captain,"klingon",a,t)}},"tech:T273":{upgradeSlots:[{type:["tech"]}]},"admiral:A037":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:3}},"ship:S342":{intercept:{ship:{cost:function(n,t,i,c){return(a.hasFaction(n,"federation",t,i)||a.hasFaction(n,"bajoran",t,i)||a.hasFaction(n,"vulcan",t,i))&&"weapon"==n.type?r(n,t,i,c)-1:c}}}},"captain:Cap007":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"captain:Cap009":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"captain:Cap010":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"captain:Cap006":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"captain:Cap008":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1},upgradeSlots:s(1,{type:["talent"],rules:"No Faction Penalty for Klingon Elite Talent",intercept:{ship:{factionPenalty:{priority:100,fn:function(n,a,t,i){return"klingon"==n.factions?0:i}}}}})},"weapon:W215":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1},upgradeSlots:[{type:["weapon"],rules:"Torpedo Upgrade with Printed Cost 5 or less.",faceDown:!0,canEquip:function(n){return"W204"==n.id||"W192"==n.id||"W191"==n.id||"W183"==n.id||"W177"==n.id||"W161"==n.id||"W160"==n.id||"W158"==n.id||"W157"==n.id||"W008"==n.id||"W004"==n.id||"W003"==n.id||"W002"==n.id||"W009"==n.id||"W154"==n.id||"W152"==n.id||"W145"==n.id||"W142"==n.id||"W141"==n.id||"W137"==n.id||"W128"==n.id||"W122"==n.id||"W120"==n.id||"W119"==n.id||"W118"==n.id||"W117"==n.id||"W116"==n.id||"W114"==n.id||"W112"==n.id||"W105"==n.id||"W100"==n.id||"W088"==n.id||"W082"==n.id||"W081"==n.id||"W079"==n.id||"W078"==n.id||"W074"==n.id||"W072"==n.id||"W067"==n.id||"W059"==n.id||"W050"==n.id||"W039"==n.id||"W038"==n.id||"W031"==n.id||"W195"==n.id||"W016"==n.id||"W119"==n.id},intercept:{ship:{cost:function(){return 0}}}}]},"tech:T272":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"tech:T271":{canEquip:function(n,a,t){return a.class.indexOf("Defiant Class")>=0},factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"weapon:W215":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1},upgradeSlots:[{type:["weapon"],rules:"Torpedo, 5 SP of less",faceDown:!0,intercept:{ship:{canEquip:function(n,a,i){return t(n,"cost",a,i)<=5},free:function(){return!0}}}}]},"tech:T270":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1},canEquipFaction:function(n,a,t){return u(a,"federation",a,t)&&a.hull>=5},intercept:{ship:{shields:function(n,a,t,i){return n==a?r(n,a,t,i)+2:i}}}},"weapon:W214":{canEquip:function(n,a,t){return a.class.indexOf("Akira Class")>=0},factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"weapon:W213":{canEquip:function(n,a,t){return a.class.indexOf("Defiant Class")>=0},factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:C374":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:C373":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:C372":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1},upgradeSlots:[{type:["crew"]}]},"crew:C371":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:C370":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"weapon:W204":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1},attack:0,intercept:{self:{attack:function(n,a,i,c){return a?t(a,"attack",a,i)+1:c}}}},"talent:E202":{canEquip:c("Battle-Hardened")},"talent:E200":{canEquip:c("Calculating")},"weapon:W201":{canEquip:c("Full Spread")},"weapon:W207":{canEquip:c("Enhanced Targeting")},"weapon:W205":{canEquip:c("Overcharged Phasers")},"weapon:W203":{canEquip:c("Dorsal Phaser Array")},"tech:T255":{canEquip:c("Detection Grid")},"tech:T253":{canEquip:c("Reinforced Shielding")},"crew:C362":{canEquip:c("Commander")},"crew:C360":{canEquip:c("Tactical Officer")},"crew:C361":{canEquip:c("Helmsman")},"crew:C358":{canEquip:c("Science Officer")},"crew:C359":{canEquip:c("Operations Officer")},"captain:Cap118":{intercept:{ship:{cost:function(n,a,t,i){var c=0;return"ship"==n.type&&(c=30),r(n,a,t,i)-c}}}},"captain:Cap119":{intercept:{ship:{cost:function(n,a,t,i){var c=0;return"ship"==n.type&&(c=30),r(n,a,t,i)-c}}}},"captain:Cap121":{upgradeSlots:[{},{type:["tech","weapon","crew"]}],intercept:{ship:{cost:function(n,a,t,i){var c=0;return"ship"==n.type&&(c=30),r(n,a,t,i)-c}}}},"captain:Cap122":{upgradeSlots:[{},{type:["tech","weapon","crew"]}],intercept:{ship:{cost:function(n,a,t,i){var c=0;return"ship"==n.type&&(c=30),r(n,a,t,i)-c}}}},"captain:Cap123":{upgradeSlots:[{},{},{type:["tech","weapon","crew"]}],intercept:{ship:{cost:function(n,a,t,i){var c=0;return"ship"==n.type&&(c=30),r(n,a,t,i)-c}}}},"captain:Cap124":{upgradeSlots:[{},{},{type:["tech","weapon","crew"]}],intercept:{ship:{cost:function(n,a,t,i){var c=0;return"ship"==n.type&&(c=30),r(n,a,t,i)-c}}}},"captain:Cap125":{upgradeSlots:[{},{},{type:["tech","weapon","crew"]},{type:["tech","weapon","crew"]}],intercept:{ship:{cost:function(n,a,t,i){var c=0;return"ship"==n.type&&(c=30),r(n,a,t,i)-c}}}},"captain:Cap126":{upgradeSlots:[{},{},{type:["tech","weapon","crew"]},{type:["tech","weapon","crew"]}],intercept:{ship:{cost:function(n,a,t,i){var c=0;return"ship"==n.type&&(c=30),r(n,a,t,i)-c}}}},"captain:Cap127":{upgradeSlots:[{},{},{},{type:["tech","weapon","crew"]},{type:["tech","weapon","crew"]}],intercept:{ship:{cost:function(n,a,t,i){var c=0;return"ship"==n.type&&(c=30),r(n,a,t,i)-c}}}},"captain:Cap128":{upgradeSlots:[{},{},{},{type:["tech","weapon","crew"]},{type:["tech","weapon","crew"]}],intercept:{ship:{cost:function(n,a,t,i){var c=0;return"ship"==n.type&&(c=30),r(n,a,t,i)-c}}}},"tech:T253":{canEquip:c("Reinforced Shielding"),intercept:{ship:{shields:function(n,a,t,i){return n==a?r(n,a,t,i)+2:i}}}},"captain:Cap646":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"captain:Cap906":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"talent:E132":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:3002":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:3003":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:3004":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:3005":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"weapon:W122":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"weapon:W121":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"weapon:W120":{intercept:{self:{attack:function(n,a,t,i){return a&&"Vor'cha Class"==a.class?r(n,a,t,i)+1:i}}}},"captain:Cap641":{intercept:{ship:{cost:function(n,a,t,i){var c=i;return f("weapon",n,a)&&(c=r(n,a,t,i)-1),c}}}},"weapon:W111":{intercept:{self:{cost:function(n,a,t,i){return a&&a.class.indexOf("Breen")<0?r(n,a,t,i)+5:i}}}},"weapon:W114":{intercept:{self:{attack:function(n,a,t,i){return a&&"Negh'var Class"==a.class?r(n,a,t,i)+1:i}}}},"crew:C191":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"crew:C193":{intercept:{self:{cost:function(n,a,t,i){return a&&"Romulan Science Vessel"!=a.class?r(n,a,t,i)+5:i}}}},"tech:T247":{canEquip:function(n,a,t){return"Romulan Science Vessel"==a.class}},"captain:Cap644":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1},intercept:{ship:{cost:function(n,a,t,i){return f("crew",n,a)?r(n,a,t,i)-1:i}}}},"captain:Cap905":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1},upgradeSlots:s(2,{type:["talent"],rules:"Fed Talents Cost Exactly 3 SP",faceDown:!0,intercept:{ship:{cost:function(n,a,t,i){return u(n,"federation",a,t)||u(n,"bajoran",a,t)||u(n,"vulcan",a,t)?3:i}}}})},"talent:E128":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"talent:E127":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"talent:E126":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:C200":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:C199":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:C198":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:C197":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:C196":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"weapon:W118":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"captain:Cap217":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"captain:Cap814":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1},intercept:{ship:{factionPenalty:function(n,a,t,i){return o(n)?0:i}}}},"talent:E130":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"talent:E129":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"crew:C204":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:C203":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:C202":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"crew:C201":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"captain:Cap645":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1},intercept:{ship:{factionPenalty:function(n,a,t,i){return"captain"==n.type||"talent"==n.type?0:i}}}},"captain:Cap531":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"independent",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"talent:E122":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"independent",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"crew:C186":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"independent",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"weapon:W110":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"independent",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"tech:T243":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"independent",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"captain:Cap325":{intercept:{ship:{cost:function(t,i,c,e){var o=!1,u=0;return $.each(n("upgradeSlots")(i),(function(n,t){if(t.occupant&&a.hasFaction(t.occupant,"dominion",i,c)){var e=r(t.occupant,i,c,t.occupant.cost);e>u&&(o=t.occupant,u=e)}})),t==o&&(e=u-2),e}}}},"tech:T236":{canEquip:function(n,a,t){return a&&a.class.indexOf("Jem'Hadar")>=0}},"weapon:W103":{intercept:{self:{cost:function(n,a,t,i){return a&&a.class.indexOf("Jem'Hadar")<0?r(n,a,t,i)+5:i}}}},"crew:C178":{canEquip:function(n,a,t){return a&&a.class.indexOf("Jem'Hadar")>=0}},"crew:C177":{canEquip:function(n,a,t){return a&&a.class.indexOf("Jem'Hadar")>=0}},"crew:C176":{canEquip:function(n,a,t){return a&&a.class.indexOf("Jem'Hadar")>=0}},"captain:Cap326":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"federation",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"captain:Cap639":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"weapon:W107":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"tech:T240":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1},intercept:{self:{cost:function(n,a,t,i){return a&&"U.S.S. Defiant"!=a.name?r(n,a,t,i)+5:i}}}},"crew:C183":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"talent:E119":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"talent:E118":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:C182":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:C181":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:C175":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"weapon:W102":{intercept:{self:{attack:function(n,a,t,i){return a&&a.class.indexOf("Keldon Class")>=0?r(n,a,t,i)+1:i}}}},"tech:T233":{intercept:{self:{cost:function(n,a,t,i){return a&&a.class.indexOf("Keldon Class")<0?r(n,a,t,i)+5:i}}}},"captain:Cap323":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1},upgradeSlots:[{type:["tech"]}]},"captain:Cap636":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"talent:E115":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:C171":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:C170":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:C169":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"tech:T232":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"tech:T231":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"captain:Cap430":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"talent:E113":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:C167":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"weapon:W100":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"tech:T229":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"talent:E111":{canEquipFaction:function(n,t,i){return t.captain&&a.hasFaction(t.captain,"klingon",t,i)}},"tech:T225":{canEquip:function(n,a,t){return"Raptor Class"==a.class}},"tech:T224":{canEquip:function(n,a,t){return"Raptor Class"==a.class}},"captain:Cap717":{upgradeSlots:[{}].concat(s(2,{type:["crew"],rules:"-1 SP if Dominion",intercept:{ship:{cost:function(n,t,i,c){return a.hasFaction(n,"dominion",t,i)?r(n,t,i,c)-1:c}}}}))},"crew:C159":{canEquip:function(n,a,t){return a&&a.class.indexOf("Jem'Hadar")>=0}},"crew:C157":{intercept:{self:{cost:function(n,a,t,i){return a&&a.class.indexOf("Jem'Hadar")<0?r(n,a,t,i)+5:i}}}},"weapon:W097":{intercept:{self:{attack:function(n,a,t,i){return a&&"Jem'Hadar Battleship"==a.class?r(n,a,t,i)+2:i}}}},"weapon:W096":{intercept:{self:{cost:function(n,a,t,i){return a&&a.class.indexOf("Jem'Hadar")<0?r(n,a,t,i)+5:i}}}},"captain:Cap215":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"captain:Cap429":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:C165":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:C164":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:C163":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"tech:T227":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"tech:T226":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"tech:T228":{upgradeSlots:[{type:["weapon"]},{type:["weapon"]}]},"captain:Cap525":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"federation",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"captain:Cap524":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"federation",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1},upgradeSlots:[{},{type:["tech"],rules:"Costs exactly 3 SP",intercept:{ship:{cost:function(n,t,i,c){return a.match(n,t,t,i)?a.match(n,t,t,i)?3:c:4}}}}]},"talent:E107":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"federation",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"talent:E106":{canEquipFaction:function(n,t,i){return t.captain&&a.hasFaction(t.captain,"bajoran",t,i)}},"crew:C156":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"federation",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:C155":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"federation",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"weapon:W094":{canEquip:function(n,t,i){return a.hasFaction(t,"borg",t,i)}},"captain:Cap214":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"independent",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"captain:Cap427":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"independent",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"crew:C152":{canEquip:function(n,t,i){return a.hasFaction(t,"kazon",t,i)}},"tech:T217":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"independent",t,i)||a.hasFaction(t,"xindi",t,i)?0:1},intercept:{self:{cost:function(n,t,i,c){return t&&!a.hasFaction(t,"kazon",t,i)?r(n,t,i,c)+5:c}}}},"crew:C150":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"independent",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"crew:C146":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"independent",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"weapon:W091":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"independent",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"tech:T221":{canEquip:function(n,t,i){return a.hasFaction(t,"species-8472",t,i)}},"tech:T219":{canEquip:function(n,t,i){return a.hasFaction(t,"species-8472",t,i)}},"tech:T216":{canEquip:function(n,t,i){return a.hasFaction(t,"species-8472",t,i)}},"talent:E104":{intercept:{self:{cost:function(n,t,i,c){return t&&!a.hasFaction(t,"species-8472",t,i)?r(n,t,i,c)+5:c}}}},"weapon:W095":{canEquip:function(n,t,i){return a.hasFaction(t,"species-8472",t,i)}},"weapon:W093":{intercept:{self:{attack:function(n,a,t,i){return a&&"Species 8472 Bioship"==a.class?r(n,a,t,i)+2:i}}}},"weapon:W092":{canEquip:function(n,t,i){return a.hasFaction(t,"species-8472",t,i)}},"captain:Cap523":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"captain:Cap812":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"tech:T222":{canEquip:function(n,a,t){return"U.S.S. Voyager"==a.name}},"crew:C154":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1},name:"B'Elanna Torres",upgradeSlots:[{type:["weapon"]},{type:["tech"]}]},"tech:T220":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:C153":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"talent:E105":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:C148":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:C147":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:C144":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"tech:T215":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"weapon:W090":{canEquip:function(n,a,t){return"U.S.S. Voyager"==a.name}},"crew:C145":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"talent:E102":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"captain:Cap426":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"talent:E103":{canEquipFaction:function(n,a,t){return a.captain&&("Loskene"==a.captain.name||a.captain.name.indexOf("Tholian")>=0)}},"weapon:W089":{canEquip:function(n,a,t){return"Tholian Vessel"==a.class}},"weapon:W088":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"talent:E097":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"captain:Cap425":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"tech:T209":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"crew:C138":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"tech:T208":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"talent:E098":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"captain:Cap322":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"federation",t,i)?0:1},upgradeSlots:[{type:["crew"]}]},"captain:Cap715":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"federation",t,i)?0:1}},"crew:C143":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"federation",t,i)?0:1}},"crew:C142":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"federation",t,i)?0:1}},"tech:T214":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"federation",t,i)?0:1}},"tech:T213":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"federation",t,i)?0:1}},"talent:E101":{canEquipFaction:function(n,t,i){return t.captain&&a.hasFaction(t,"vulcan",t,i)&&a.hasFaction(t.captain,"vulcan",t,i)},upgradeSlots:s(2,{type:["tech","crew"]})},"weapon:W087":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"federation",t,i)?0:1}},"weapon:W086":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"federation",t,i)?0:1}},"captain:Cap321":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"federation",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"captain:Cap714":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"federation",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:C141":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"federation",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:C140":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"federation",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"tech:T212":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"federation",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1},canEquip:function(n,a,t){return!!(a&&a.classData&&a.classData.maneuvers&&a.classData.maneuvers.max)&&a.classData.maneuvers.max<4}},"tech:T211":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"federation",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1},intercept:{self:{cost:function(n,a,t,i){return a&&"Bajoran Interceptor"!=a.class?r(n,a,t,i)+5:i}}}},"talent:E100":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"federation",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"weapon:W085":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"federation",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1},canEquip:function(n,a,t){return a.hull<=3},intercept:{self:{cost:function(n,a,t,i){return a&&"Bajoran Interceptor"!=a.class?r(n,a,t,i)+5:i}}}},"ship:S139":{intercept:{ship:{cost:function(n,a,t,i){return"Borg Ablative Hull Armor"==n.name?r(n,a,t,i)-3:i}}}},"talent:E099":{canEquipFaction:function(n,t,i){return t.captain&&a.hasFaction(t.captain,"borg",t,i)}},"weapon:W084":{intercept:{self:{attack:function(n,a,t,i){return a&&"Borg Tactical Cube"==a.class?r(n,a,t,i)+3:i}}}},"weapon:W083":{canEquipFaction:function(n,t,i){return a.hasFaction(t,"borg",t,i)}},"talent:E093":{canEquip:function(n,a,t){return a.hull<=3}},"tech:T204":{canEquip:c("Ion Thrusters")},"captain:Cap633":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"crew:C135":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"crew:C134":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1},upgradeSlots:[{type:["weapon"]}],intercept:{ship:{cost:{priority:100,fn:function(n,a,t,i){return f("weapon",n,a)&&"Torpedo Fusillade"!=n.name&&"W057"!=n.id&&"Aft Phaser Emitters"!=n.name&&"W156"!=n.id&&"W199"!=n.id&&(i=r(n,a,t,i))<=5&&(i-=2),i}}}}},"talent:E094":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"weapon:W080":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"captain:Cap712":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"talent:E092":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:C132":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:C131":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"weapon:W078":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"captain:Cap522":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"federation",t,i)?0:1},intercept:{ship:{cost:function(n,t,i,c){return(a.hasFaction(n,"federation",t,i)||a.hasFaction(n,"bajoran",t,i)||a.hasFaction(n,"vulcan",t,i))&&"tech"==n.type?r(n,t,i,c)-2:c}}}},"tech:T201":{canEquip:function(n,a,t){return"Suurok Class"==a.class},intercept:{ship:{attack:function(n,a,t,i){return n==a?r(n,a,t,i)+1:i},hull:function(n,a,t,i){return n==a?r(n,a,t,i)+1:i}}}},"tech:T200":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"federation",t,i)?0:1}},"talent:E086":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"federation",t,i)?0:1}},"crew:C116":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"federation",t,i)?0:1}},"talent:E087":{canEquipFaction:function(n,t,i){return t.captain&&a.hasFaction(t.captain,"dominion",t,i)}},"weapon:W075":{canEquip:function(n,a,t){return"Jem'Hadar Battleship"==a.class||"Jem'Hadar Battleship "==a.class||"Jem'Hadar Battle Cruiser"==a.class}},"captain:Cap320":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"captain:Cap631":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"captain:Cap809":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"admiral:A026":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:3}},"talent:E091":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:C130":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:C129":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:C128":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:C127":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"talent:E090":{canEquipFaction:function(n,t,i){return a.hasFaction(t,"federation",t,i)||a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)}},"crew:C126":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:C125":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:C124":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"captain:Cap424":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1},intercept:{ship:{cost:function(n,a,t,i){return f("crew",n,a)?r(n,a,t,i)-1:i},factionPenalty:function(n,t,i,c){return o(n)&&a.hasFaction(n,"borg",t,i)?0:c}}}},"captain:Cap711":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1},upgradeSlots:[{},{type:["crew"]}],intercept:{ship:{canEquipFaction:{priority:100,fn:function(n,a,t,i){return"talent"==n.type||i}},factionPenalty:{priority:100,fn:function(n,a,t,i){return"talent"==n.type?0:i}}}}},"crew:C123":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"crew:C122":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"crew:C121":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"crew:C120":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"talent:E089":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"talent:E088":{canEquipFaction:function(n,t,i){return t.captain&&a.hasFaction(t.captain,"borg",t,i)}},"borg:B012":{canEquipFaction:function(n,t,i){return a.hasFaction(t,"borg",t,i)}},"weapon:W077":{intercept:{self:{attack:function(n,t,i,c){return t&&a.hasFaction(t,"borg",t,i)?r(n,t,i,c)+1:c}}}},"weapon:W076":{intercept:{self:{cost:function(n,t,i,c){return t&&!a.hasFaction(t,"borg",t,i)?r(n,t,i,c)+5:c}}}},"captain:Cap319":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"federation",t,i)||a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"tech:T099":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1},name:"Multi-Adaptive Shields",canEquipFaction:function(n,t,i){return a.hasFaction(t,"federation",t,i)||a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)}},"tech:T098":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1},intercept:{self:{cost:function(n,a,t,i){return a&&"U.S.S. Raven"!=a.name?r(n,a,t,i)+5:i}}}},"talent:E085":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"crew:C115":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"captain:Cap710":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:C110":{upgradeSlots:[{type:["tech"]}]},"crew:C114":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"independent",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1},text:"At the start of the game, place 1 non-Borg [tech] or [weapon] Upgrade with a cost of 5 or less face down beneath this card. At any time, you may discard Quark to flip the Upgrade that is beneath this card face up and deploy it to your ship, even if it exceeds your ship's restrictions.",upgradeSlots:[{type:["weapon","tech"],rules:"Non-Borg, 5SP or less",faceDown:!0,intercept:{ship:{canEquip:function(n,a,i){return t(n,"cost",a,i)<=5},canEquipFaction:function(n,t,i){return!a.hasFaction(n,"borg",t,i)},free:function(){return!0}}}}]},"crew:C113":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"crew:C112":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"federation",t,i)||a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)||a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"tech:T097":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"federation",t,i)||a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"crew:C108":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:C109":{upgradeSlots:[{type:["talent"],rules:"No Faction Penalty",intercept:{ship:{factionPenalty:function(){return 0}}}}],factionPenalty:0},"ship:S106":{class:"Galaxy Class",classId:"galaxy__class_mu"},"ship:S107":{class:"Galaxy Class",classId:"galaxy__class_mu"},"ship:S108":{class:"Galaxy Class",classId:"galaxy__class_mu"},"ship:S105":{class:"Galaxy Class",classId:"galaxy__class_mu"},"weapon:W070":{intercept:{self:{cost:function(n,a,t,i){return a&&"Galaxy Class"!=a.class&&"Intrepid Class"!=a.class&&"Sovereign Class"!=a.class?r(n,a,t,i)+5:i}}}},"captain:Cap629":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1},upgradeSlots:[{},{type:["crew"]}]},"tech:T091":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:C097":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"talent:E082":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"weapon:W170":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1},upgradeSlots:[{type:["weapon"]}]},"captain:Cap421":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"federation",t,i)?0:1}},"captain:Cap520":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"federation",t,i)?0:1}},"admiral:A023":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"federation",t,i)?0:3}},"captain:Cap630":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"federation",t,i)?0:1},upgradeSlots:[{},{type:["crew"]}]},"crew:C101":{canEquipFaction:function(n,t,i){return a.hasFaction(t,"vulcan",t,i)}},"tech:T095":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"federation",t,i)?0:1},upgradeSlots:[{type:["weapon"]}],canEquip:function(n,a,t){return"Suurok Class"==a.class&&c("Combat Vessel Variant")(n,a,t)},intercept:{ship:{attack:function(n,a,t,i){return n==a?r(n,a,t,i)+1:i},hull:function(n,a,t,i){return n==a?r(n,a,t,i)+1:i},canEquip:function(n,a,t){return"Combat Vessel Variant"!=n.name}}}},"tech:T094":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"federation",t,i)?0:1}},"talent:E083":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"federation",t,i)?0:1}},"ship:S115":{upgradeSlots:[{type:["tech"],rules:"Free EHP Only",canEquip:function(n){return"Enhanced Hull Plating"==n.name},intercept:{ship:{cost:function(){return 0}}}}]},"captain:Cap318":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"captain:Cap422":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"admiral:A024":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:3}},"captain:Cap521":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1},upgradeSlots:[{},{type:["crew"]}]},"tech:T096":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1},canEquip:c("Enhanced Hull Plating"),canEquipFaction:function(n,t,i){return a.hasFaction(t,"federation",t,i)||a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)}},"crew:C107":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1},upgradeSlots:[{type:["tech"]}]},"crew:C106":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:C105":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:C104":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:C103":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:C102":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"talent:E084":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"ship:S113":{intercept:{ship:{canEquip:function(n,a,i,c){return!(f("borg",n,a)&&t(n,"cost",a,i)>5)&&c}}}},"ship:S111":{intercept:{ship:{canEquip:function(n,a,i,c){return!(f("borg",n,a)&&t(n,"cost",a,i)>5)&&c}}}},"captain:Cap317":{canEquip:function(a,t,i){return!n("fleetCardNamed")(i,"Hugh")},intercept:{fleet:{canEquip:function(n,a,t,i){return"Hugh"!=n.name&&i},canEquipCaptain:function(n,a,t,i){return"Hugh"!=n.name&&i}}}},"crew:C100":{canEquip:function(a,t,i){return!n("fleetCardNamed")(i,"Hugh")},intercept:{fleet:{canEquip:function(n,a,t,i){return"Hugh"!=n.name&&i},canEquipCaptain:function(n,a,t,i){return"Hugh"!=n.name&&i}}}},"borg:B011":{canEquip:c("Scavenged Parts")},"weapon:W071":{canEquipFaction:function(n,t,i){return a.hasFaction(t,"borg")}},"captain:Cap628":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"independent",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"tech:T090":{canEquipFaction:function(n,t,i){return a.hasFaction(t,"ferengi",t,i)}},"talen:E080":{canEquipFaction:function(n,t,i){return t.captain&&a.hasFaction(t.captain,"ferengi",t,i)&&a.hasFaction(t,"ferengi",t,i)}},"crew:C095":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"independent",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"weapon:W067":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"independent",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"tech:T089":{intercept:{self:{cost:function(n,t,i,c){return t&&!a.hasFaction(t,"mirror-universe",t,i)?r(n,t,i,c)+5:c}}}},"captain:Cap315":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"independent",t,i)||a.hasFaction(t,"xindi",t,i)?0:1},upgradeSlots:[{type:["weapon"]}],intercept:{ship:{cost:function(n,t,i,c){return f("weapon",n,t)&&a.hasFaction(n,"kazon",t,i)?r(n,t,i,c)-1:c}}}},"crew:C093":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"independent",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"tech:T088":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"independent",t,i)||a.hasFaction(t,"xindi",t,i)?0:1},canEquip:c("Tractor Beam")},"weapon:W064":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"independent",t,i)||a.hasFaction(t,"xindi",t,i)?0:1},intercept:{self:{cost:function(n,a,t,i){return"Predator Class"!=a.class?r(n,a,t,i)+4:i}}}},"weapon:W063":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"independent",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"ship:S099":{intercept:{ship:{canEquip:function(n,a,i,c){return!(f("borg",n,a)&&t(n,"cost",a,i)>5)&&c}}}},"weapon:W062":{name:"Proton Beam",intercept:{self:{cost:function(n,t,i,c){return t&&!a.hasFaction(t,"borg",t,i)?r(n,t,i,c)+5:c}}}},"captain:Cap627":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"federation",t,i)?0:1}},"talent:E079":{canEquipFaction:function(n,t,i){return t.captain&&a.hasFaction(t.captain,"vulcan",t,i)&&a.hasFaction(t,"vulcan",t,i)}},"crew:C091":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"federation",t,i)?0:1}},"tech:T086":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"federation",t,i)?0:1}},"weapon:W061":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"federation",t,i)?0:1}},"borg:B007":{canEquip:c("Hive Mind")},"talent:E078":{canEquipFaction:function(n,t,i){return t.captain&&!a.hasFaction(t.captain,"borg",t,i)&&!a.hasFaction(t,"borg",t,i)},upgradeSlots:[{type:["borg"]}]},"captain:Cap420":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"admiral:A021":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:3}},"captain:Cap807":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1},upgradeSlots:[{},{type:["crew","tech","weapon","talent"]}]},"tech:T085":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1},canEquip:c("Advanced Shields")},"talent:E077":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"talent:E076":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:C080":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:C089":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1},upgradeSlots:[{type:["crew"]}]},"crew:C088":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1},upgradeSlots:[{type:["tech"]}]},"crew:C084":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:C083":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"weapon:W058":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1},intercept:{self:{attack:function(n,a,t,i){return a&&"Sovereign Class"==a.class?r(n,a,t,i)+1:i}}}},"weapon:W057":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1},attack:0,canEquip:function(n,t,i){return t&&(a.hasFaction(t,"federation",t,i)||a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i))&&t.hull>=4},intercept:{self:{attack:function(n,a,i,c){return a?t(a,"attack",a,i):c},cost:function(n,a,i,c){return a?r(n,a,i,c)+t(a,"attack",a,i)+1:c}}}},"borg:B006":{canEquip:c("Transwarp Signal"),canEquipFaction:function(n,t,i){return a.hasFaction(t,"borg",t,i)}},"borg:B005":{canEquip:c("Borg Shield Matrix")},"weapon:W056":{intercept:{self:{cost:function(n,t,i,c){return t&&!a.hasFaction(t,"borg",t,i)?r(n,t,i,c)+5:c}}}},"captain:Cap518":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1},upgradeSlots:[{type:["tech","weapon","crew"]}],intercept:{ship:{cost:function(n,t,i,c){return(a.hasFaction(t,"independent",t,i)||a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i))&&o(n)?r(n,t,i,c)-1:c}}}},"captain:Cap626":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1},upgradeSlots:[{},{type:["weapon","crew"]}]},"crew:C087":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"crew:C086":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"crew:C082":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"crew:C081":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"talent:E073":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"talent:E072":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"weapon:W060":{canEquip:function(n,a,t){return a.hull<=3},factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"weapon:W059":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"ship:S087":{canJoinFleet:function(n,a,t){var i=!0;return $.each(t.ships,(function(n,a){if("Assimilated Vessel 80279"==a.name)return i=!1,!1})),i},intercept:{fleet:{canJoinFleet:function(n,a,t){return"Assimilated Vessel 80279"!=n.name}}}},"borg:T083":{canEquip:c("Data Node")},"talent:E071":{canEquipFaction:function(n,t,i){return t.captain&&a.hasFaction(t.captain,"klingon",t,i)}},"talent:E063":{upgradeSlots:s(4,{type:["talent"],rules:"Romulan Talent Only",faceDown:!0,intercept:{ship:{cost:function(){return 0},factionPenalty:function(){return 0},canEquip:function(n,t,i,c){return!!a.hasFaction(n,"romulan",t,i)&&c}}}}),canEquip:function(n,a,t){return a.captain&&"Shinzon"==a.captain.name},factionPenalty:0},"tech:T080":{canEquip:function(n,a,t){return"Reman Warbird"==a.class}},"tech:T079":{intercept:{self:{cost:function(n,a,t,i){return a&&"Reman Warbird"!=a.class?r(n,a,t,i)+5:i}}}},"weapon:W054":{canEquip:function(n,a,t){return"Reman Warbird"==a.class}},"weapon:W053":{intercept:{self:{attack:function(n,a,t,i){return a&&"Reman Warbird"==a.class?r(n,a,t,i)+2:i}}}},"tech:T081":{canEquip:function(n,a,t){return"Klingon Bird-of-Prey"==a.class}},"talent:E068":{canEquipFaction:function(n,t,i){return t.captain&&a.hasFaction(t.captain,"klingon",t,i)}},"ship:S084":{class:"Defiant Class",classId:"defiant_class_mirror"},"ship:S080":{class:"Defiant Class",classId:"defiant_class_mirror"},"captain:Cap516":{upgradeSlots:[{},{type:["tech"]}]},"crew:C078":{upgradeSlots:[{type:["tech"]}]},"captain:Cap902":{upgradeSlots:[{},{type:["borg"]}]},"borg:E070":{intercept:{self:{cost:function(n,t,i,c){return t&&!a.hasFaction(t,"borg",t,i)?r(n,t,i,c)+5:c}}}},"borg:B002":{canEquip:c("Interplexing Beacon")},"ship:S070":{canJoinFleet:function(n,a,t){var i=!0;return $.each(t.ships,(function(n,a){if("Assimilated Vessel 64758"==a.name)return i=!1,!1})),i},intercept:{fleet:{canJoinFleet:function(n,a,t){return"Assimilated Vessel 64758"!=n.name}}}},"talent:E060":{intercept:{self:{cost:function(n,a,t,i){return a&&a.captain&&a.captain.skill>5?r(n,a,t,i)+5:i}}}},"captain:Cap901":{canEquipCaptain:function(a,t,i){return!n("fleetCardNamed")(i,"Jean-Luc Picard")},intercept:{fleet:{canEquip:function(n,a,t,i){return"Jean-Luc Picard"!=n.name&&i},canEquipCaptain:function(n,a,t,i){return"Jean-Luc Picard"!=n.name&&i}}}},"squadron:D016":{canEquip:c("Cover Fire")},"squadron:D015":{canEquip:c("Flanking Attack")},"squadron:D013":{canEquip:c("Support Ship")},"squadron:D011":{canEquip:c("Aft Disruptor Wave Cannons")},"squadron:D010":{canEquip:c("Galor Class Phaser Banks")},"ship:S067":{class:"Negh'var Class",classId:"negh_var_class_mirror"},"ship:S066":{class:"Negh'var Class",classId:"negh_var_class_mirror"},"crew:C067":{intercept:{ship:{skill:function(n,t,i,c){return n==t.captain&&a.hasFaction(t,"mirror-universe",t,i)&&(c=r(n,t,i,c)+2),c}}}},"tech:T078":{intercept:{self:{cost:function(n,a,t,i){return a&&"Regent's Flagship"!=a.name?r(n,a,t,i)+5:i}}}},"weapon:W050":{intercept:{self:{attack:function(n,a,t,i){return a&&"Negh'var Class"==a.class?r(n,a,t,i)+1:i}}}},"captain:Cap706":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"crew:C072":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"crew:C071":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"crew:C070":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"crew:C069":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"weapon:W052":{canEquip:function(n,a,t){return a.class.indexOf("Vidiian")>=0}},"weapon:W051":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"talent:E061":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"crew:C063":{talents:1,factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)||a.hasFaction(t,"klingon",t,i)?0:1},upgradeSlots:[{type:["talent"]}]},"tech:T069":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"klingon",t,i)?0:1}},"weapon:W047":{canEquip:c("Phaser Array Retrofit")},"captain:Cap622":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"captain:Cap806":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"tech:T076":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1},canEquip:c("Monotanium Armor Plating")},"tech:T075":{canEquip:function(n,a,t){return a.class.indexOf("Hirogen")>=0}},"talent:E056":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1},canEquip:function(n,a,t){return a.class.indexOf("Hirogen")>=0},intercept:{self:{cost:function(n,a,t,i){return a&&a.captain&&"Karr"!=a.captain.name&&a.captain.name.indexOf("Hirogen")<0?r(n,a,t,i)+5:i}}}},"talent:E055":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"talent:E054":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"weapon:W049":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1},intercept:{self:{cost:function(n,a,t,i){return a&&a.class.indexOf("Hirogen")<0?r(n,a,t,i)+5:i}}}},"crew:C062":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1},upgradeSlots:[{type:["weapon"]}]},"squadron:D009":{canEquip:c("Defensive Maneuvers")},"squadron:D008":{canEquip:c("Support Ship")},"squadron:D006":{canEquip:c("Attack Wave")},"squadron:D004":{canEquip:c("Attack Formation")},"squadron:D002":{canEquip:c("Cover Fire")},"squadron:D001":{canEquip:c("Coordinated Attack")},"ship:S061":{intercept:{ship:{canEquipCaptain:function(n,a,t){return"Gareb"==n.name||"Jhamel"==n.name||"Romulan Drone Pilot"==n.name}}}},"ship:S266":{intercept:{ship:{canEquipCaptain:function(n,a,t){return"Gareb"==n.name||"Jhamel"==n.name||"Romulan Drone Pilot"==n.name}}}},"captain:Cap105":{upgradeSlots:[{type:["captain"],rules:"Captain to place under Gareb",intercept:{ship:{cost:function(){return 0},onEquip:function(n,a,t){n.upgradeSlots=[];for(var i=0;i<n.talents;i++)n.upgradeSlots.push({type:["talent"],source:"Gareb"});n.unique=!1,n.text="(Place underneath Gareb)",n.name=n.name+" (Gareb)"},canEquip:function(){return!0},canEquipFaction:function(){return!0},factionPenalty:function(){return 0}}}}],skill:function(n,a,t){return n.upgradeSlots[0].occupant?n.upgradeSlots[0].occupant.skill:0},cost:function(n,a,t){var i=0;return n.upgradeSlots[0].occupant&&(i=n.upgradeSlots[0].occupant.cost-3),i},canEquipCaptain:function(n,a,t){return"Romulan Drone Ship"==a.class}},"captain:Cap104":{canEquipCaptain:function(n,a,t){return"Romulan Drone Ship"==a.class}},"captain:Cap621":{upgradeSlots:[{},{type:["tech"]}]},"tech:T074":{intercept:{self:{cost:function(n,a,t,i){return a&&"Romulan Drone Ship"!=a.class?r(n,a,t,i)+5:i}}}},"tech:T073":{canEquip:function(n,a,t){return"Romulan Drone Ship"==a.class}},"tech:T072":{canEquip:function(n,a,t){return"Romulan Drone Ship"==a.class}},"weapon:T071":{name:"Triphasic Emitters",range:!1,upgradeSlots:[{type:["weapon"],rules:"Non-Borg, 5SP or less",intercept:{ship:{free:function(){return!0},canEquip:function(n,a,i,c){return!(0==n.printedValue||u(n,"borg",a,i)||t(n,"cost",a,i)>5)&&c}}}}]},"talent:E051":{canEquipFaction:function(n,a,t){return a.class.indexOf("Tholian")>=0&&a.captain&&("Loskene"==a.captain.name||a.captain.name.indexOf("Tholian")>=0)}},"weapon:W045":{intercept:{self:{cost:function(n,a,t,i){return a&&a.class.indexOf("Tholian")<0?r(n,a,t,i)+5:i}}}},"captain:Cap618":{canEquipCaptain:function(n,t,i){return a.hasFaction(t,"romulan",t,i)}},"admiral:A017":{canEquipAdmiral:function(n,t,i){return a.hasFaction(t,"romulan",t,i)}},"crew:C059":{canEquip:c("Romulan Helmsman")},"talent:E049":{canEquipFaction:function(n,t,i){return a.hasFaction(t,"romulan",t,i)&&t.captain&&a.hasFaction(t.captain,"romulan",t,i)}},"crew:C057":{canEquipFaction:function(n,t,i){return a.hasFaction(t,"romulan",t,i)}},"crew:C058":{intercept:{ship:{skill:function(n,a,t,i){return n==a.captain?r(n,a,t,i)+1:i}}}},"weapon:W044":{intercept:{self:{cost:function(n,t,i,c){return t&&!a.hasFaction(t,"romulan",t,i)?r(n,t,i,c)+5:c}}}},"captain:Cap513":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"independent",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"captain:Cap619":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"independent",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"crew:C061":{canEquipFaction:function(n,t,i){return a.hasFaction(t,"kazon",t,i)}},"crew:C060":{canEquipFaction:function(n,t,i){return a.hasFaction(t,"kazon",t,i)}},"weapon:W046":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"independent",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"captain:Cap412":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"talent:T058":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1},canEquipFaction:function(n,t,i){return a.hasFaction(t,"federation",t,i)||a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)}},"crew:C047":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"tech:T057":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1},type:"question",isSlotCompatible:function(n){return $.inArray("tech",n)>=0||$.inArray("weapon",n)>=0||$.inArray("crew",n)>=0},upgradeSlots:[{type:["tech"]}],intercept:{ship:{shields:function(n,a,t,i){return n==a?r(n,a,t,i)+1:i}}},canEquip:c("Systems Upgrade"),canEquipFaction:function(n,t,i){return a.hasFaction(t,"federation",t,i)||a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)}},"weapon:W034":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1},canEquip:function(n,a,t){return a.attack<=3&&c("Type 8 Phaser Array")(n,a,t)}},"talent:E046":{canEquipFaction:function(n,t,i){return a.hasFaction(t,"dominion",t,i)}},"weapon:W041":{canEquip:function(n,a,t){return a.hull>=4},canEquipFaction:function(n,t,i){return a.hasFaction(t,"dominion",t,i)}},"captain:Cap312":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1},upgradeSlots:[{type:["talent"],rules:"Salvage Only",canEquip:function(n){return"Salvage"==n.name}}]},"captain:Cap511":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"tech:T207":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"talent:E048":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"crew:C056":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"tech:T068":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1},canEquip:function(n,a,t){return a.hull<=3&&c("Improved Deflector Screens")(n,a,t)}},"weapon:W042":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1},intercept:{self:{cost:function(n,a,t,i){return a&&"Gorn Raider"!=a.class?r(n,a,t,i)+4:i}}}},"crew:C051":{cost:function(a,i,c){if(!i)return 3;var e=0;return $.each(n("upgradeSlots")(i),(function(n,o){if(o.occupant&&o.occupant!=a&&"talent"==o.occupant.type){var r=t(o.occupant,"cost",i,c);if(r>0)return o.occupant,e=r,!1}})),e>0?2:3}},"tech:T066":{canEquip:function(n,a,t){return c("Agony Booth")(n,a,t)}},"talent:E045":{canEquip:function(n,a,t){return"I.S.S. Enterprise"==a.name}},"ship:S051":{upgradeSlots:[{type:["crew","tech"],rules:"This Upgrade costs -2 SP",intercept:{ship:{cost:function(n,a,t,i){return r(n,a,t,i)-2}}}}]},"captain:Cap310":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:C050":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"talent:E044":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"tech:T065":{canEquip:function(n,a,t){return a.class.indexOf("Shuttlecraft")>=0},canEquipFaction:function(n,t,i){return a.hasFaction(t,"federation",t,i)}},"tech:T064":{canEquip:function(n,a,t){return a.class.indexOf("Shuttlecraft")>=0&&c("Warp Drive")(n,a,t)},canEquipFaction:function(n,t,i){return a.hasFaction(t,"federation",t,i)}},"ship:S047":{intercept:{ship:{cost:function(n,a,t,i){return f("tech",n,a)?r(n,a,t,i)-1:i}}}},"captain:Cap208":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"captain:Cap308":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"admiral:A013":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:3}},"crew:C273":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1},intercept:{ship:{skill:function(n,a,t,i){return n==a.captain?r(n,a,t,i)+3:i}}}},"tech:T056":{canEquip:function(n,a,t){return a.hull<=3},canEquipFaction:function(n,t,i){return a.hasFaction(t,"federation",t,i)||a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)}},"tech:T055":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1},intercept:{self:{cost:function(n,a,t,i){return a&&"Oberth Class"!=a.class?r(n,a,t,i)+5:i}}}},"tech:T054":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:C046":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:C045":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:C044":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1},canEquipFaction:function(n,a,t){return u(a,"federation",a,t)||u(a,"bajoran",a,t)||u(a,"vulcan",a,t)},canEquip:function(n,a,t){return a.hull<=3}},"crew:C043":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1},upgradeSlots:[{type:["tech"]}]},"captain:Cap415":{intercept:{ship:{factionPenalty:function(n,a,t,i){return o(n)?0:i}}}},"crew:C049":{canEquip:c("Orion Tactical Officer")},"crew:C048":{canEquip:c("Andorian Helmsman")},"tech:T062":{canEquip:c("Enhanced Hull Plating"),canEquipFaction:function(n,t,i){return a.hasFaction(t,"mirror-universe",t,i)&&t.hull<=4}},"captain:Cap413":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"captain:Cap805":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1},upgradeSlots:[{},{type:["tech"]}]},"talent:E042":{canEquipFaction:function(n,a,t){return"Krenim Weapon Ship"==a.class&&a.captain&&("Annorax"==a.captain.name||"Obrist"==a.captain.name||a.captain.name.indexOf("Krenim")>=0)}},"tech:T061":{canEquip:function(n,a,t){return"Krenim Weapon Ship"==a.class}},"tech:T060":{canEquip:function(n,a,t){return"Krenim Weapon Ship"==a.class}},"tech:T059":{canEquip:function(n,a,t){return"Krenim Weapon Ship"==a.class}},"weapon:W036":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1},intercept:{self:{cost:function(n,a,t,i){return a&&"Krenim Weapon Ship"!=a.class?r(n,a,t,i)+6:i}}}},"weapon:W035":{canEquip:function(n,a,t){return"Krenim Weapon Ship"==a.class}},"captain:Cap410":{upgradeSlots:[{type:["talent"],rules:"Mauk-to'Vor Only at 3SP",canEquip:function(n,a,t){return"Mauk-to'Vor"==n.name},intercept:{ship:{cost:function(){return 3}}}}],factionPenalty:function(){return 0}},"crew:C041":{canEquip:c("Klingon Stealth Team"),canEquipFaction:function(n,t,i){return a.hasFaction(t,"klingon",t,i)}},"talent:E039":{canEquipFaction:function(n,t,i){return a.hasFaction(t,"klingon",t,i)&&a.hasFaction(t.captain,"klingon",t,i)}},"weapon:W033":{canEquip:c("Ambush Attack")},"captain:Cap804":{upgradeSlots:[{},{type:["crew"]}]},"crew:C038":{canEquipFaction:function(n,t,i){return a.hasFaction(t,"klingon",t,i)}},"tech:T049":{intercept:{self:{cost:function(n,t,i,c){return t&&!a.hasFaction(t,"klingon",t,i)?r(n,t,i,c)+5:c}}}},"talent:E038":{canEquip:function(n,t,i){return a.hasFaction(t,"klingon",t,i)&&(!t.captain||a.hasFaction(t.captain,"klingon",t,i))},intercept:{ship:{canEquipCaptain:function(n,t,i){return a.hasFaction(n,"klingon",t,i)}}}},"captain:Cap207":{canEquipFaction:function(n,t,i){return a.hasFaction(t,"bajoran",t,i)}},"admiral:A012":{canEquipAdmiral:function(n,t,i){return a.hasFaction(t,"bajoran",t,i)}},"captain:Cap411":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"federation",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"captain:Cap616":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"federation",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1},upgradeSlots:[{},{type:["crew"]}]},"talent:E041":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"federation",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"tech:T053":{type:"question",isSlotCompatible:function(n){return $.inArray("tech",n)>=0||$.inArray("weapon",n)>=0||$.inArray("crew",n)>=0},canEquip:function(n,a,t){return"Bajoran Scout Ship"==a.class&&c("Assault Vessel Upgrade")(n,a,t)},intercept:{ship:{attack:function(n,a,t,i){return n==a?r(n,a,t,i)+1:i},shields:function(n,a,t,i){return n==a?r(n,a,t,i)+1:i}}}},"crew:C042":{canEquipFaction:function(n,t,i){return a.hasFaction(t,"bajoran",t,i)}},"talent:E040":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"federation",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"captain:Cap206":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:C040":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"tech:T051":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"tech:T050":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:C039":{canEquip:function(t,i,c){if(i.captain&&!a.hasFaction(i.captain,"romulan",i,c))return!1;var e=!0;return $.each(n("upgradeSlots")(i),(function(n,t){t.occupant&&"crew"==t.occupant.type&&!a.hasFaction(t.occupant,"romulan",i,c)&&(e=!1)})),e},intercept:{ship:{canEquip:function(n,t,i,c){return!("crew"==n.type&&!a.hasFaction(n,"romulan",t,i))&&c},canEquipCaptain:function(n,t,i,c){return!!a.hasFaction(n,"romulan",t,i)&&c},cost:function(n,t,i,c){return"tech"!=n.type&&"weapon"!=n.type||a.hasFaction(n,"borg",t,i)||(c=r(n,t,i,c)-1),c},factionPenalty:function(n,t,i,c){return"captain"==n.type||o(n)&&a.hasFaction(n,"romulan",t,i)?0:c}}}},"tech:T048":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1},intercept:{self:{cost:function(n,a,t,i){return a&&"U.S.S. Prometheus"!=a.name?r(n,a,t,i)+4:i}}},canEquip:c("Regenerative Shielding")},"tech:T047":{canEquip:function(n,a,t){return"Prometheus Class"==a.class}},"weapon:W031":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1},intercept:{self:{attack:function(n,a,t,i){return a&&"Prometheus Class"==a.class?r(n,a,t,i)+1:i}}}},"weapon:W030":{canEquip:function(n,a,t){return"Prometheus Class"==a.class}},"tech:T015":{canEquip:c("Inverse Tachyon Pulse")},"captain:Cap305":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"independent",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"captain:Cap406":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"independent",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"talent:E025":{canEquipFaction:function(n,t,i){return a.hasFaction(t,"ferengi",t,i)&&a.hasFaction(t.captain,"ferengi",t,i)}},"talent:E024":{canEquipFaction:function(n,t,i){return a.hasFaction(t,"ferengi",t,i)&&a.hasFaction(t.captain,"ferengi",t,i)}},"weapon:W016":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"independent",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"weapon:W015":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"independent",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"crew:C025":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"independent",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1},canEquip:c("Tactical Officer")},"tech:T022":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"independent",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"tech:T021":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"independent",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"tech:T020":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"independent",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1},canEquip:c("Ferengi Probe")},"captain:Cap306":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1},intercept:{self:{skill:function(n,a,t,i){return a&&"Dauntless Class"==a.class?r(n,a,t,i)+5:i}}}},"tech:T033":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1},skill:0,upgradeSlots:[{type:["tech"]}],intercept:{self:{skill:function(n,a,t,i){return a&&!a.captain?2:i}}}},"tech:T032":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"tech:T031":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"tech:T030":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1},intercept:{self:{cost:function(n,a,t,i){return a&&"Dauntless Class"!=a.class?r(n,a,t,i)+5:i}}}},"tech:T029":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1},canEquip:c("Navigational Deflector")},"tech:T028":{canEquip:function(n,a,t){return"Dauntless Class"==a.class}},"tech:E030":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"talent:E029":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"question:Q001":{type:"question",isSlotCompatible:function(n){return $.inArray("tech",n)>=0||$.inArray("weapon",n)>=0||$.inArray("crew",n)>=0||$.inArray("talent",n)>=0}},"weapon:W010":{canEquip:function(n,a,t){return"D'deridex Class"==a.class&&c("Additional Phaser Array")(n,a,t)}},"tech:T004":{intercept:{self:{cost:function(n,a,t,i){return a&&"D'deridex Class"!=a.class?r(n,a,t,i)+3:i}}}},"talent:E001":{canEquipFaction:function(n,t,i){return a.hasFaction(t,"romulan",t,i)&&t.captain&&a.hasFaction(t.captain,"romulan",t,i)}},"crew:C002":{intercept:{self:{cost:function(n,a,t,i){return a&&!u(a,"romulan",a,t)?r(n,a,t,i)+2:i}}},canEquip:c("Bridge Officer")},"captain:Cap504":{upgradeSlots:[{type:["talent"],rules:"Klingon Talents Only",canEquip:function(n,a,t){return u(n,"klingon",a,t)}}],intercept:{ship:{cost:function(n,a,t,i){return o(n)&&u(n,"klingon",a,t)&&(i=r(n,a,t,i)-1),i},factionPenalty:function(n,a,t,i){return o(n)&&!u(n,"klingon",a,t)&&(i=2*r(n,a,t,i)),i}}}},"talent:E002":{canEquipFaction:function(n,a,t){return u(a,"klingon",a,t)&&u(a.captain,"klingon",a,t)}},"crew:C004":{intercept:{self:{cost:function(n,a,t,i){return a&&!u(a,"klingon",a,t)?r(n,a,t,i)+3:i}}},canEquip:c("Tactical Officer")},"tech:T001":{upgradeSlots:s(2,{type:["crew"],rules:"Non-Borg, Combined cost 5 or less",faceDown:!0,canEquip:function(a,i,c,e){if(u(a,"borg",i,c))return!1;var o=0;return $.each(n("upgradeSlots")(i),(function(n,a){e!=a&&a.occupant&&"Cryogenic Stasis"==a.source&&(o=t(a.occupant,"cost",i,c))})),o+t(a,"cost",i,c)<=5},intercept:{ship:{free:function(){return!0}}}})},"captain:Cap401":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"admiral:A002":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:3}},"captain:Cap505":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"admiral:A003":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:3}},"talent:E006":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"talent:E005":{canEquipFaction:function(n,a,t){return u(a,"federation",a,t)&&a.captain&&u(a.captain,"federation",a,t)},canEquipFaction:function(n,t,i){return a.hasFaction(t,"federation",t,i)&&a.hasFaction(t.captain,"federation",t,i)||a.hasFaction(t,"bajoran",t,i)&&a.hasFaction(t.captain,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)&&a.hasFaction(t.captain,"vulcan",t,i)}},"talent:E004":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"weapon:W009":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"weapon:W008":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:C006":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"weapon:W007":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"tech:T003":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"captain:Cap614":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"admiral:A010":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:3}},"talent:E033":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"crew:C033":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"federation",t,i)||a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)||a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"weapon:W025":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1},intercept:{self:{cost:function(n,a,t,i){return a&&"Intrepid Class"!=a.class?r(n,a,t,i)+4:i}}}},"tech:T042":{canEquip:function(n,a,t){return"Intrepid Class"==a.class&&c("Variable Geometry Pylons")(n,a,t)}},"ship:S013":{intercept:{ship:{factionPenalty:function(n,a,t,i){return"crew"==n.type||"tech"==n.type?0:i}}}},"captain:Cap201":{canEquipCaptain:function(n,a,t){return u(a,"ferengi",a,t)}},"admiral:A005":{canEquipAdmiral:function(n,a,t){return u(a,"ferengi",a,t)}},"captain:Cap304":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"independent",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"captain:Cap404":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"independent",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1},upgradeSlots:[{type:["talent"],rules:"Grand Nagus Only",canEquip:function(n){return"Grand Nagus"==n.name}}]},"talent:E016":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"independent",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"talent:E015":{canEquipFaction:function(n,a,t){return u(a,"ferengi",a,t)&&u(a.captain,"ferengi",a,t)}},"crew:C016":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"crew:C015":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"independent",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"crew:C014":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"independent",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"tech:T013":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"independent",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1},upgradeSlots:s(2,{type:["crew","tech"],rules:"Combined cost 4SP or less",canEquip:function(a,i,c,e){var o=0;return $.each(n("upgradeSlots")(i),(function(n,a){e!=a&&a.occupant&&"Cargo Hold"==a.source&&(o=t(a.occupant,"cost",i,c))})),o+t(a,"cost",i,c)<=4}}),canEquip:function(n,a,t){return!!u(a,"ferengi",a,t)&&c("Cargo Hold")(n,a,t)}},"tech:T012":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"independent",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1},canEquip:c("Inversion Wave")},"weapon:W024":{canEquip:function(n,a,t){return"Species 8472 Bioship"==a.class}},"weapon:W023":{canEquip:function(n,a,t){return"Species 8472 Bioship"==a.class}},"tech:T041":{canEquip:function(n,a,t){return"Species 8472 Bioship"==a.class&&c("Biological Technology")(n,a,t)}},"tech:T040":{canEquip:function(n,a,t){return"Species 8472 Bioship"==a.class&&c("Biogenic Field")(n,a,t)}},"tech:T039":{canEquip:function(n,a,t){return"Species 8472 Bioship"==a.class}},"tech:T038":{canEquip:c("Fluidic Space"),intercept:{self:{cost:function(n,a,t,i){return a&&!u(a,"species-8472",a,t)?r(n,a,t,i)+5:i}}}},"captain:Cap203":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"admiral:A007":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:3}},"captain:Cap605":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"talent:E018":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:C019":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:C018":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"tech:T014":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1},canEquip:c("High Energy Sensor Sweep")},"weapon:W012":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1},upgradeSlots:s(2,{type:["weapon"]}),canEquip:c("Arsenal")},"question:Q002":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1},isSlotCompatible:function(n){return $.inArray("tech",n)>=0||$.inArray("weapon",n)>=0||$.inArray("crew",n)>=0},intercept:{self:{cost:function(n,a,t,i){return!a||u(a,"federation",a,t)||u(a,"bajoran",a,t)||u(a,"vulcan",a,t)?i:r(n,a,t,i)+5}}},canEquip:function(n,a,t){return(!a.classData||!a.classData.rearArc)&&a.hull>=4}},"captain:Cap204":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"admiral:A009":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:3}},"talent:E026":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:C026":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"weapon:W017":{canEquip:function(n,a,t){return!(a&&!u(a,"federation",a,t)&&!u(a,"bajoran",a,t)&&!u(a,"vulcan",a,t))&&c("Dual Phaser Banks")(n,a,t)},intercept:{self:{cost:function(n,a,t,i){return a&&"Constitution Class"!=a.class&&"Constitution Refit Class"!=a.class?r(n,a,t,i)+3:i}}}},"question:Q003":{isSlotCompatible:function(n){return $.inArray("weapon",n)>=0||$.inArray("crew",n)>=0},intercept:{self:{cost:function(n,a,t,i){return a&&!u(a,"federation",a,t)?r(n,a,t,i)+5:i}}},canEquip:function(n,a,t){return("Constitution Class"==a.class||"Constitution Refit Class"==a.class)&&c("Astrogator")(n,a,t)}},"captain:Cap303":{upgradeSlots:[{type:["talent"],rules:"Secret Research Only",canEquip:function(n,a,t){return"Secret Research"==n.name}}]},"talent:E009":{intercept:{self:{cost:function(n,a,t,i){return a&&"Romulan Science Vessel"!=a.class?r(n,a,t,i)+5:i}}}},"tech:T008":{canEquip:function(n,a,t){return a&&"Romulan Science Vessel"==a.class}},"tech:T007":{intercept:{self:{cost:function(n,a,t,i){return a&&"Romulan Science Vessel"!=a.class?r(n,a,t,i)+5:i}}}},"tech:T006":{intercept:{self:{cost:function(n,a,t,i){return a&&"Romulan Science Vessel"!=a.class?r(n,a,t,i)+5:i}}},canEquip:c("Signal Amplifier")},"tech:T010":{canEquip:c("Warp Core Ejection System")},"tech:T009":{canEquip:function(n,a,t){return a&&"Romulan Science Vessel"==a.class}},"captain:Cap701":{intercept:{ship:{cost:function(n,a,t,i){return o(n)&&u(n,"klingon",a,t)?r(n,a,t,i)-1:i}}}},"talent:E013":{canEquipFaction:function(n,a,t){return u(a,"klingon",a,t)&&u(a.captain,"klingon",a,t)}},"crew:C012":{intercept:{self:{factionPenalty:function(n,a,t,i){return u(a,"klingon",a,t)?0:i}}}},"crew:C013":{intercept:{ship:{skill:function(n,a,t,i){return n==a.captain?r(n,a,t,i)+(u(n,"klingon",a,t)?3:1):i}}}},"captain:Cap407":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"captain:Cap507":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1},upgradeSlots:[{type:["tech"],rules:"Costs -1 SP",intercept:{ship:{cost:function(n,a,t,i){return r(n,a,t,i)-1}}}}]},"crew:C031":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:C030":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:C029":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"tech:T027":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1},canEquip:c("Parametallic Hull Plating"),intercept:{self:{cost:function(n,a,t,i){return!a||u(a,"federation",a,t)||u(a,"bajoran",a,t)||u(a,"vulcan",a,t)?i:r(n,a,t,i)+3}}}},"tech:T026":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1},canEquip:c("Immersion Shielding"),intercept:{self:{cost:function(n,a,t,i){return!a||u(a,"federation",a,t)||u(a,"bajoran",a,t)||u(a,"vulcan",a,t)?i:r(n,a,t,i)+3}},ship:{shields:function(n,a,t,i){return n==a?r(n,a,t,i)+1:i}}}},"tech:T025":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1},canEquip:c("Unimatrix Shielding"),intercept:{self:{cost:function(n,a,t,i){return!a||u(a,"federation",a,t)||u(a,"bajoran",a,t)||u(a,"vulcan",a,t)?i:r(n,a,t,i)+4}},ship:{shields:function(n,a,t,i){return n==a?r(n,a,t,i)+2:i}}}},"weapon:W020":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"weapon:W019":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1},intercept:{self:{range:function(n,a,t,i){return a&&a.class.indexOf("Shuttlecraft")>=0?"1 - 2":i}}}},"captain:Cap724":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"talent:E134":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:C217":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1},upgradeSlots:s(3,{type:["tech"],rules:"FEDERATION TECH UPGRADES, 4SP OR LESS",faceDown:!0,intercept:{ship:{cost:function(){return 0},factionPenalty:function(){return 0},canEquip:function(n,i,c,e){return console.log(!a.hasFaction(n,"federation",i,c),t(n,"cost",i,c)>4),!!(a.hasFaction(n,"federation",i,c)&&t(n,"cost",i,c)<5)&&e}}}})},"crew:C216":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:C215":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1},intercept:{ship:{cost:{priority:100,fn:function(n,a,t,i){return f("tech",n,a)&&(i=r(n,a,t,i),i-=1),i}}}}},"tech:T104":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1},canEquip:function(n,a,t){return c("Navigational Station")(n,a,t)}},"tech:T104":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"weapon:W123":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"captain:Cap535":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"independent",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"crew:C228":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"independent",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"crew:C228":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"independent",t,i)||a.hasFaction(t,"xindi",t,i)?0:1},canEquip:function(n,a,t){return c("Kazon Gurad")(n,a,t)}},"weapon:W129":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"independent",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"weapon:W128":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"independent",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"weapon:W127":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"independent",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"question:Q004":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"independent",t,i)||a.hasFaction(t,"xindi",t,i)?0:1},type:"question",isSlotCompatible:function(n){return $.inArray("tech",n)>=0||$.inArray("weapon",n)>=0||$.inArray("crew",n)>=0},canEquipFaction:function(n,t,i){return console.log(t),!a.hasFaction(t,"borg",t,i)},canEquip:function(n,a,t){return c("Unremarkable Species")(n,a,t)},intercept:{self:{cost:function(n,a,t,i){return a&&!u(a,"kazon",a,t)?r(n,a,t,i)+5:i}}},upgradeSlots:[{type:function(n,a){return p(n,a)}}]},"squadron:D023":{canEquip:function(n,a,t){return c("Cover Fire")(n,a,t)}},"squadron:D021":{canEquip:function(n,a,t){return c("Torpedo Attack")(n,a,t)}},"squadron:D018":{canEquip:function(n,a,t){return c("Support Ship")(n,a,t)}},"captain:Cap307":{upgradeSlots:[{type:["talent"],rules:"Tal Shiar Only",canEquip:function(n){return"Tal Shiar"==n.name}}]},"talent:E034":{canEquipFaction:function(n,a,t){return u(a.captain,"romulan",a,t)}},"captain:Cap205":{canEquipCaptain:function(n,a,t){return u(a,"species-8472",a,t)}},"weapon:W022":{canEquip:function(n,a,t){return!!u(a,"species-8472",a,t)&&c("Energy Weapon")(n,a,t)}},"tech:T037":{canEquip:function(n,a,t){return!!u(a,"species-8472",a,t)&&c("Neuro Peptides")(n,a,t)}},"tech:T036":{canEquip:function(n,a,t){return u(a,"species-8472",a,t)}},"tech:T035":{canEquip:function(n,a,t){return!!u(a,"species-8472",a,t)&&c("Resistant Hull")(n,a,t)}},"weapon:W029":{canEquip:c("Aft Weapons Array"),intercept:{self:{cost:function(n,a,t,i){return a&&"Cardassian Galor Class"!=a.class?r(n,a,t,i)+5:i}}}},"tech:T046":{canEquip:c("High Energy Subspace Field"),intercept:{self:{cost:function(n,a,t,i){return a&&!u(a,"dominion",a,t)?r(n,a,t,i)+5:i}}}},"captain:Cap405":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"talent:E023":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:C024":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"tech:T019":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"weapon:W014":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1},canEquip:function(n,a,i){return!(t(a,"attack",a,i)>3)&&c("Upgraded Phasers")(n,a,i)},intercept:{self:{cost:function(n,a,t,i){return!a||u(a,"federation",a,t)||u(a,"bajoran",a,t)||u(a,"vulcan",a,t)?i:r(n,a,t,i)+5}}}},"tech:T002":{canEquip:c("Reactor Core")},"tech:T034":{canEquip:c("Targeting Systems")},"crew:C032":{intercept:{self:{cost:function(n,a,t,i){return a&&!u(a,"klingon",a,t)?r(n,a,t,i)+5:i}}}},"captain:Cap611":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"federation",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"talent:E027":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"federation",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1},canEquip:function(n,a,i){return t(a,"hull",a,i)<=3}},"crew:C027":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"federation",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1},canEquip:function(n,a,t){return u(a,"federation",a,t)||u(a,"bajoran",a,t)||u(a,"vulcan",a,t)}},"weapon:W018":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"federation",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1},canEquip:function(n,a,i){return t(a,"hull",a,i)<=3},intercept:{self:{cost:function(n,a,t,i){return a&&"Bajoran Interceptor"!=a.class?r(n,a,t,i)+5:i}}}},"tech:T023":{canEquip:function(n,a,t){return"Bajoran Interceptor"==a.class&&c("Navigational Sensors")(n,a,t)}},"captain:Cap610":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"independent",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"weapon:W064":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"independent",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"talent:E022":{canEquipFaction:function(n,a,t){return u(a,"kazon",a,t)&&u(a.captain,"kazon",a,t)}},"crew:C023":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"independent",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"tech:T018":{canEquipFaction:function(n,a,t){return u(a,"kazon",a,t)}},"captain:Cap403":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"federation",t,i)?0:1}},"talent:E010":{canEquipFaction:function(n,a,t){return u(a,"vulcan",a,t)&&u(a.captain,"vulcan",a,t)}},"crew:C008":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"federation",t,i)?0:1},intercept:{self:{cost:function(n,a,t,i){return a&&!u(a,"vulcan",a,t)?r(n,a,t,i)+4:i}}}},"weapon:W011":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"federation",t,i)?0:1}},"tech:T011":{canEquip:function(n,a,t){return!!u(a,"vulcan",a,t)&&c("Power Distribution Net")(n,a,t)}},"captain:Cap608":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"independent",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"talent:E021":{canEquipFaction:function(n,a,t){return u(a,"ferengi",a,t)&&u(a.captain,"ferengi",a,t)}},"crew:C022":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"independent",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"weapon:W013":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"independent",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"tech:T017":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"independent",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"captain:Cap815":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"talent:E137":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:C227":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:C226":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:C225":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:C224":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:C223":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"tech:T112":{canEquip:function(n,a,t){return c("Counter Measures")(n,a,t)},intercept:{self:{cost:function(n,a,t,i){return a&&"Cardassian ATR-4107"!=a.class?r(n,a,t,i)+5:i}}}},"question:Q005":{isSlotCompatible:function(n){return $.inArray("tech",n)>=0||$.inArray("weapon",n)>=0||$.inArray("crew",n)>=0},upgradeSlots:[{type:function(n,a){return p(n,a)}},{type:["crew"]}],canEquip:function(n,a,t){return c("Maintenance Crew")(n,a,t)}},"question:Q021":{canEquipFaction:function(n,a,t){return u(a,"kazon",a,t)&&u(a.captain,"kazon",a,t)},isSlotCompatible:function(n){return $.inArray("tech",n)>=0||$.inArray("weapon",n)>=0||$.inArray("crew",n)>=0},upgradeSlots:[{type:function(n,a){return p(n,a)}},{type:["tech"]}],intercept:{ship:{skill:function(n,a,t,i){return n==a.captain?r(n,a,t,i)+2:i}}}},"captain:Cap219":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"federation",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1},upgradeSlots:s(2,{type:["talent"],rules:"Bajoran upgrades",faceDown:!0,intercept:{ship:{canEquip:function(n,t,i,c){return!!a.hasFaction(n,"bajoran",t,i)&&c}}}})},"talent:E140":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"federation",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"talent:E139":{canEquipFaction:function(n,t,i){return t.captain&&a.hasFaction(t.captain,"bajoran",t,i)&&a.hasFaction(t,"bajoran",t,i)}},"talent:E138":{canEquipFaction:function(n,t,i){return t.captain&&a.hasFaction(t.captain,"bajoran",t,i)&&a.hasFaction(t,"bajoran",t,i)}},"tech:T110":{canEquip:function(n,a,t){return c("TACHYON EDDIES")(n,a,t)},canEquipFaction:function(n,a,t){return a&&"BAJORAN SOLAR SAILOR"==a.class}},"tech:T109":{canEquip:function(n,a,t){return c("MAINSAILS")(n,a,t)},canEquipFaction:function(n,a,t){return a&&"BAJORAN SOLAR SAILOR"==a.class}},"tech:T108":{canEquipFaction:function(n,a,t){return a&&"BAJORAN SOLAR SAILOR"==a.class}},"captain:Cap612":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"independent",t,i)?0:1}},"talent:E028":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"independent",t,i)?0:1}},"crew:C028":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"independent",t,i)?0:1}},"weapon:W019":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"independent",t,i)?0:1},intercept:{self:{cost:function(n,a,t,i){return a&&!u(a,"xindi",a,t)?r(n,a,t,i)+5:i}}}},"tech:T024":{canEquip:function(n,a,t){return!!u(a,"xindi",a,t)&&c("Phase Deflector Pulse")(n,a,t)}},"captain:Cap508":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"independent",t,i)?0:1}},"talent:E036":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"independent",t,i)?0:1},upgradeSlots:s(2,{type:["weapon"]})},"crew:C036":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"independent",t,i)?0:1}},"weapon:W028":{canEquipFaction:function(n,a,t){return u(a,"xindi",a,t)}},"tech:T045":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"independent",t,i)?0:1}},"captain:Cap537":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"independent",t,i)?0:1}},"talent:E144":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"independent",t,i)?0:1}},"crew:C237":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"independent",t,i)?0:1}},"weapon:W141":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"independent",t,i)?0:1},attack:function(n,a,t,i){return a&&"Xindi Reptilian Warship"==a.class?r(n,a,t,i)+1:i}},"tech:T122":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"independent",t,i)?0:1}},"captain:temporal_cold_war_vosk":{factionPenalty:function(n,a,t,i){return"talent"==n.type?0:i}},"tech:T126":{intercept:{self:{cost:function(n,t,i,c){return t&&!a.hasFaction(t,"mirror-universe",t,i)?r(n,t,i,c)+4:c}}}},"tech:T103":{canEquip:function(n,a,t){return c("Distress Signal")(n,a,t)}},"tech:T102":{canEquip:function(n,a,t){return c("Gravition Field Generator")(n,a,t)}},"tech:T101":{canEquip:function(n,a,t){return c("Self Destruct Sequence")(n,a,t)}},"captain:Cap434":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1},upgradeSlots:[{},{type:["crew"]}]},"talent:E136":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1},canEquipFaction:function(n,a,t){return u(a,"federation",a,t)&&u(a.captain,"federation",a,t)||u(a,"bajoran",a,t)&&u(a.captain,"bajoran",a,t)||u(a,"vulcan",a,t)&&u(a.captain,"vulcan",a,t)||u(a,"federation",a,t)&&u(a.captain,"bajoran",a,t)||u(a,"federation",a,t)&&u(a.captain,"vulcan",a,t)||u(a,"vulcan",a,t)&&u(a.captain,"federation",a,t)||u(a,"vulcan",a,t)&&u(a.captain,"bajoran",a,t)||u(a,"bajoran",a,t)&&u(a.captain,"federation",a,t)||u(a,"bajoran",a,t)&&u(a.captain,"vulcan",a,t)}},"crew:C222":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:C221":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:C220":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:C219":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"weapon:W126":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"captain:Cap647:":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"talent:E135":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"crew:C218":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"weapon:W125":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"weapon:W124":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"tech:T107":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"tech:T106":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"captain:Cap816":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"independent",t,i)?0:1}},"talent:E142":{canEquip:function(n,a,t){return a&&"Xindi Weapon"==a.class}},"crew:C230":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"independent",t,i)?0:1},intercept:{ship:{cost:function(n,t,i,c){return f("weapon",n,t)&&a.hasFaction(n,"xindi",t,i)?r(n,t,i,c)-1:c}}}},"weapon:W136":{canEquip:function(n,a,t){return a&&"Xindi Weapon"==a.class}},"weapon:W135":{canEquip:function(n,a,t){return a&&"Xindi Weapon"==a.class}},"tech:T117":{canEquip:function(n,t,i){return a.hasFaction(t,"xindi",t,i)}},"tech:T116":{canEquip:function(n,a,t){return a&&"Xindi Weapon"==a.class}},"captain:Cap329":{intercept:{ship:{cost:function(i,c,e,o){var r=0,u=0;return $.each(e.ships,(function(n,t){a.hasFaction(t,"romulan",t,e)&&(u+=1)})),u<2?o:($.each(n("upgradeSlots")(c),(function(n,o){if(o.occupant&&o.occupant!=i&&"talent"==o.occupant.type&&a.hasFaction(o.occupant,"romulan",c,e)){var u=t(o.occupant,"cost",c,e);if(u>0)return o.occupant,r=u,!1}})),r>0?o-1:o)}}}},"weapon:W134":{canEquip:function(n,a,t){return c("CHARGING WEAPONS")(n,a,t)}},"tech:T115":{canEquip:function(n,a,t){return c("SELF REPAIR TECHNOLOGY")(n,a,t)},canEquipFaction:function(n,t,i){return a.hasFaction(t,"romulan",t,i)}},"weapon:W139":{canEquip:function(n,a,t){return c("Stand By Torpedoes")(n,a,t)}},"crew:C234":{intercept:{self:{canEquip:function(n,a,t){if(a&&a.classData&&a.classData.maneuvers)for(i=1;i<a.classData.maneuvers.max;i++)if(void 0!==a.classData.maneuvers[i].about)return!0;return!1}},ship:{cost:function(n,t,i,c){return t&&!a.hasFaction(t,"klingon",t,i)?r(n,t,i,c)+5:c}}}},"crew:C233":{canEquip:function(n,a,t){return c("Klingon Navigator")(n,a,t)}},"tech:T121":{intercept:{self:{cost:function(n,t,i,c){return t&&!a.hasFaction(t,"romulan",t,i)?r(n,t,i,c)+5:c},canEquip:function(n,a,t){return c("Prototype Cloaking Device")(n,a,t)}}}},"crew:C235":{upgradeSlots:s(1,{type:["tech"],intercept:{ship:{cost:function(n,a,t,i){return(i=r(n,a,t,i)-1)<1&&(i=1),i},canEquip:function(n,t,i,c){return!!a.hasFaction(n,"romulan",t,i)&&c}}}})},"crew:C236":{intercept:{self:{canEquip:function(n,a,t){return!!c("Reman Bodyguards")(n,a,t)||!(!c("Reman Bodyguards")(n,a,t)||!a.captain||"Vrax"!=a.captain.name)},cost:function(n,a,t,i){return a&&a.captain&&"Vrax"==a.captain.name?r(n,a,t,i)-2:i}}}},"weapon:W140":{canEquip:function(n,a,t){return c("Disruptor Banks")(n,a,t)}},"captain:Cap536":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:C231":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"weapon:W138":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"weapon:W137":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"tech:T118":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"tech:T119":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"captain:Cap332":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"talent:E145":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1},canEquip:function(n,a,t){return a&&!!~a.actions.indexOf("battlestations")}},"crew:C238":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"question:Q007":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1},isSlotCompatible:function(n){return $.inArray("tech",n)>=0||$.inArray("weapon",n)>=0},canEquip:function(n,a,t){return c("Auxiliary Control Room")(n,a,t)}},"question:Q006":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1},isSlotCompatible:function(n){return $.inArray("tech",n)>=0||$.inArray("weapon",n)>=0||$.inArray("crew",n)>=0},canEquip:function(n,a,t){return c("Automated Distress Beacon")(n,a,t)}},"captain:Cap725":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1},intercept:{ship:{factionPenalty:function(n,a,t,i){return o(n)?0:i},cost:function(a,t,i,c){var e=!1;if("ship"!=a.type){var o=[],u=n("upgradeSlots")(t);if($.each(u,(function(n,a){!a.occupant||5!=a.occupant.cost&&6!=a.occupant.cost||o.push(a)})),o.length){o.length>3&&(o.sort((function(n,a){return a.occupant.cost-n.occupant.cost})),o=o.slice(0,3));for(var s=0;s<o.length;s++)if(a.id==o[s].occupant.id){e=!0;break}}}return e?4:r(a,t,i,c)}}}},"talent:E148":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"talent:E147":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"crew:C240":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"weapon:W143":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"captain:Cap539":{upgradeSlots:[{type:["talent"],rules:"Klingon only",canEquip:function(n,t,i,c){return a.hasFaction(n,"klingon",t,i)}}]},"tech:T124":{canEquip:function(n,a,t){return c("Emergency Power")(n,a,t)}},"weapon:W142":{intercept:{self:{attack:function(n,a,t,i){return a&&"Vor'cha Class"==a.class?r(n,a,t,i)+1:i}}}},"talent:E151":{canEquip:function(n,a,t){return a&&"D7 Class"==a.class}},"crew:C243":{canEquip:function(n,a,t){return c("Romulan Technical Officer")(n,a,t)}},"tech:T127":{canEquip:function(n,a,t){return c("Impulse Drive")(n,a,t)}},"talent:E153":{rules:"Borg Queen only",canEquip:function(n,a,t){return a.captain&&"Borg Queen"==a.captain.name}},"borg:B017":{rules:"Borg Cube only",canEquip:function(n,a,t){return a&&"Borg Cube"==a.class}},"question:Q008":{canEquip:c("Borg Support Vehicle Token"),factionPenalty:function(n,a,t){return n&&"Borg Support Vehicle Token"==n.name?0:1},isSlotCompatible:function(n){return $.inArray("tech",n)>=0||$.inArray("weapon",n)>=0||$.inArray("crew",n)>=0||$.inArray("borg",n)>=0},canEquip:function(n,a,t){return a.hull<=7},upgradeSlots:[{type:function(n,a){return p(n,a)}}],intercept:{ship:{cost:function(n,a,t,i){var c=0;return"ship"==n.type&&"Borg Sphere"==a.class?c=15:"ship"==n.type&&(c=10),i-c}}}},"tech:T128":{rules:"Borg ship only",canEquipFaction:function(n,t,i){return a.hasFaction(t,"borg",t,i)}},"captain:Cap727":{upgradeSlots:[{},{type:["crew"]}]},"captain:Cap821":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1},intercept:{ship:{cost:function(n,t,i,c){return f("crew",n,t)&&a.hasFaction(n,"federation",t,i)||a.hasFaction(n,"bajoran",t,i)||a.hasFaction(n,"vulcan",t,i)?r(n,t,i,c)-1:c}}}},"crew:C252":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:C249":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:C248":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1},upgradeSlots:[{type:["tech","weapon"]}]},"crew:C247":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"captain:Cap907":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:C251":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:C250":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"weapon:W146":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1},upgradeSlots:[{type:["weapon"],rules:"Photon Torpedoes Only",canEquip:function(n){return n.name.indexOf("Photon Torpedoes")>=0}}]},"tech:T129":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"captain:Cap436":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"talent:E155":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"weapon:W149":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1},canEquip:function(n,a,t){return c("Additional Phaser Arrays")(n,a,t)}},"weapon:W148":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"tech:T132":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"tech:T131":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1},canEquip:function(n,a,t){return c("High-Capacty Deflector Shield Grid")(n,a,t)}},"question:Q017":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1},isSlotCompatible:function(n){return $.inArray("weapon",n)>=0||$.inArray("crew",n)>=0},upgradeSlots:[{type:["tech"]}]},"captain:Cap649":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"talent:E154":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"weapon:W147":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"tech:T130":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"question:Q009":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1},isSlotCompatible:function(n){return $.inArray("tech",n)>=0||$.inArray("weapon",n)>=0||$.inArray("crew",n)>=0},upgradeSlots:[{type:function(n,a){return p(n,a)}}],canEquip:function(n,a,t){return c("Delta Shift")(n,a,t)}},"captain:Cap220":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:C257":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"tech:T137":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1},rules:"Only one per ship",canEquip:c("Holo-Communicator")},"tech:T136":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1},rules:"Only one per ship",canEquip:c("Full Reverse")},"tech:T135":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1},rules:"Only one per ship",canEquip:c("Deflector Control")},"tech:T134":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1},rules:"Only one per ship",canEquip:c("Resonance Burst")},"weapon:W151":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"tech:T133":{canEquip:function(n,a,t){return c("Control Central")(n,a,t)}},"weapon:W150":{canEquip:function(n,a,t){return c("Main Batteries")(n,a,t)},upgradeSlots:[{type:["weapon"]}]},"captain:Cap333":{canEquip:function(n,a,t){return"Kuvah'Magh"==n.name},intercept:{ship:{cost:function(n,a,t,i){return"Kuvah'Magh"==n.name?r(n,a,t,i)-2:i}}}},"captain:Cap728":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"independent",t,i)?0:1}},"talent:E161":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"independent",t,i)?0:1},upgradeSlots:[{}].concat(s(1,{type:["weapon"],rules:"-2 SP if Xindi",intercept:{ship:{cost:function(n,t,i,c){return a.hasFaction(n,"xindi",t,i)?r(n,t,i,c)-2:c}}}}))},"talent:E160":{canEquipFaction:function(n,a,t){return u(a,"xindi",a,t)&&u(a.captain,"xindi",a,t)}},"crew:C259":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"independent",t,i)?0:1},intercept:{self:{cost:function(n,a,t,i){return a&&a.class.indexOf("Xindi")<0?r(n,a,t,i)+5:i},canEquip:function(n,a,t){return c("Insecetoid Raiding Party")(n,a,t)}}}},"weapon:W153":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"independent",t,i)?0:1},intercept:{self:{cost:function(n,a,t,i){return a&&a.class.indexOf("Xindi")<0?r(n,a,t,i)+5:i}}}},"weapon:W152":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"independent",t,i)?0:1}},"tech:T139":{canEquip:function(n,t,i){return a.hasFaction(t,"xindi",t,i)&&c("Hatchery")},upgradeSlots:[{type:["crew"],source:"Face-down Xindi (free)",intercept:{ship:{cost:function(n,a,t,i){return 0,0},canEquip:function(n,t,i,c){return!!a.hasFaction(n,"xindi",t,i)&&c}}}},{type:["crew"]}]},"tech:T140":{rules:"Only one per ship",canEquip:c("Auxiliary Power to Shields")},"question:Q016":{isSlotCompatible:function(n){return $.inArray("tech",n)>=0||$.inArray("weapon",n)>=0||$.inArray("crew",n)>=0||$.inArray("talent",n)>=0},rules:"Only one per ship",canEquip:c("Course Change")},"crew:C262":{upgradeSlots:[{type:["talent"]}],canEquip:function(n,a,t){return a.captain&&"Cap439"==a.captain.id},intercept:{ship:{skill:function(n,a,t,i){return n==a.captain?r(n,a,t,i)+4:i}}}},"crew:C261":{upgradeSlots:[{type:["talent"]}],canEquip:function(n,a,t){return a.captain&&"Cap438"==a.captain.id},intercept:{ship:{skill:function(n,a,t,i){return n==a.captain?r(n,a,t,i)+4:i}}}},"tech:T141":{rules:"Only one per ship",canEquip:c("Aft Shields")},"captain:Cap542":{intercept:{ship:{type:function(n,a,t,i){return $.inArray("tech",i)>=0||$.inArray("weapon",i)>=0||$.inArray("crew",i)>=0?i.concat(["ship-resource"]):i}}}},"ship-resource:Rs01":{upgradeSlots:[{type:["talent","tech","weapon","crew"]}]},"talent:E166":{canEquipFaction:function(n,a,t){return(u(a,"romulan",a,t)||u(a,"klingon",a,t))&&(u(a.captain,"romulan",a,t)||u(a.captain,"klingon",a,t))}},"tech:T142":{rules:"Only one per ship",canEquip:c("Tachyon Pulse")},"captain:Cap221":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"independent",t,i)?0:1}},"captain:Cap440":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"independent",t,i)?0:1}},"admiral:A029":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"independent",t,i)?0:3}},"weapon:W154":{intercept:{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"independent",t,i)?0:1},self:{attack:function(n,a,t,i){return a&&"Xindi Aquatic Cruiser"==a.class?r(n,a,t,i)+1:i}}}},"tech:T145":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"independent",t,i)?0:1},canEquip:c("Biometric Hologram"),canEquipFaction:function(n,t,i){return t.captain&&a.hasFaction(t,"xindi",t,i)&&a.hasFaction(t.captain,"xindi",t,i)}},"tech:T144":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"independent",t,i)?0:1},intercept:{self:{cost:function(n,a,t,i){return a&&a.class.indexOf("Xindi")<0?r(n,a,t,i)+5:i}}}},"tech:T143":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"independent",t,i)?0:1},intercept:{self:{cost:function(n,a,t,i){return a&&a.class.indexOf("Xindi")<0?r(n,a,t,i)+4:i}}}},"crew:C265":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"independent",t,i)?0:1}},"talent:E167":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"independent",t,i)?0:1},canEquipFaction:function(n,t,i){return t.captain&&a.hasFaction(t,"xindi",t,i)&&a.hasFaction(t.captain,"xindi",t,i)}},"captain:Cap803":{intercept:{ship:{cost:{priority:100,fn:function(a,t,i,c){var e=0;if("ship"==a.type)e=2;else{var o=[],u=n("upgradeSlots")(t);if($.each(u,(function(n,a){a.occupant&&o.push(a)})),o.length){o.length>3&&(o.sort((function(n,a){return a.occupant.cost-n.occupant.cost})),o=o.slice(0,3));for(var s=0;s<o.length;s++)if(a.id==o[s].occupant.id){e=1;break}}}return r(a,t,i,c)-e}}}}},"talent:E168":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"tech:T146":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1},rules:"Only one per ship",canEquip:c("Transporter")},"weapon:W155":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1},attack:0,canEquip:function(n,t,i){return a.hasFaction(t,"federation",t,i)||a.hasFaction(t,"bajoran",t,i)||t.hull>=4},intercept:{self:{attack:function(n,a,i,c){return a?t(a,"attack",a,i)-1:c},cost:function(n,a,i,c){return a?r(n,a,i,c)+t(a,"attack",a,i):c}}}},"crew:C266":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1},upgradeSlots:[{type:["weapon"]},{type:["weapon"]}]},"captain:Cap441":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"independent",t,i)?0:1}},"captain:Cap801":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"independent",t,i)?0:1},intercept:{ship:{type:function(n,a,t,i){return $.inArray("tech",i)>=0||$.inArray("crew",i)>=0?i.concat(["weapon"]):i},cost:function(n,a,t,i){return f("weapon",n,a)?r(n,a,t,i)-1:i}}}},"talent:E169":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"independent",t,i)?0:1}},"weapon:W157":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"independent",t,i)?0:1},self:{attack:function(n,a,t,i){return a&&"Xindi Reptilian Warship"==a.class?r(n,a,t,i)+1:i}}},"weapon:W156":{attack:0,canEquip:function(n,t,i){return a.hasFaction(t,"xindi",t,i)},intercept:{self:{attack:function(n,a,i,c){return a?t(a,"attack",a,i)+1:c},cost:function(n,a,i,c){return a?r(n,a,i,c)+t(a,"attack",a,i):c}}}},"crew:C267":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"independent",t,i)?0:1},upgradeSlots:[{type:["tech"]}],canEquipFaction:function(n,t,i){return a.hasFaction(t,"xindi",t,i)},canEquip:c("Reptilian Analysis Team")},"tech:T148":{canEquip:function(n,a,t){return"Xindi Reptilian Warship"==a.class}},"tech:T147":{canEquip:c("Sensor Encoders"),canEquip:function(n,a,t){return"Xindi Reptilian Warship"==a.class}},"weapon:W158":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"captain:Cap408":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"talent:E170":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"tech:T149":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1},canEquip:c("Impulse Thrusters")},"weapon:W159":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:C271":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"captain:Cap335":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1},upgradeSlots:[{type:["talent"],rules:"Captain's Discretion",canEquip:function(n,a,t,i){return"Captain's Discretion"==n.name&&i}}]},"talent:E171":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:C276":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:C275":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:C274":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"tech:T152":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1},upgradeSlots:[{type:["crew"]}],canEquip:c("Comm Station")},"tech:T1511":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1},canEquip:c("Close-Range Scan")},"tech:T150":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1},name:"Genesis Effect",range:!1,upgradeSlots:[{type:["crew"],rules:"Crew, 5SP or less",intercept:{ship:{free:function(){return!0},canEquip:function(n,a,i,c){return!(t(n,"cost",a,i)>5)&&c}}}}]},"crew:C273":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1},intercept:{ship:{skill:function(n,a,t,i){return n==a.captain?r(n,a,t,i)+3:i}}}},"talent:E172":{upgradeSlots:s(3,{type:["talent"],rules:"Klingon Talent Only",faceDown:!0,intercept:{ship:{cost:function(){return 0},factionPenalty:function(){return 0},canEquip:function(n,t,i,c){return!!a.hasFaction(n,"klingon",t,i)&&c}}}})},"crew:C278":{upgradeSlots:[{type:["crew"]}]},"tech:T154":{canEquip:c("Dispersive Armor")},"question:Q010":{isSlotCompatible:function(n){return $.inArray("tech",n)>=0||$.inArray("weapon",n)>=0}},"crew:C280":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"question:Q011":{isSlotCompatible:function(n){return $.inArray("tech",n)>=0||$.inArray("weapon",n)>=0||$.inArray("crew",n)>=0},canEquip:c("Captured"),upgradeSlots:[{type:function(n,a){return p(n,a)}}],intercept:{ship:{factions:function(n,a,t,i){return n==a&&i.indexOf("independent")<0?i.concat(["independent"]):i}}}},"weapon:W162":{canEquip:c("Plasma Pulse")},"crew:C279":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"tech:T155":{canEquip:function(n,a,t){return a.hull>=4}},"tech:T157":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"ship:S267":{intercept:{ship:{canEquipCaptain:function(n,a,t){return"Gareb"==n.name||"Jhamel"==n.name||"Romulan Drone Pilot"==n.name}}}},"ship:S266":{intercept:{ship:{canEquipCaptain:function(n,a,t){return"Gareb"==n.name||"Jhamel"==n.name||"Romulan Drone Pilot"==n.name}}}},"captain:Cap336":{canEquipCaptain:function(n,a,t){return"Romulan Drone Ship"==a.class}},"weapon:W166":{name:"Triphasic Emitters",range:!1,upgradeSlots:[{type:["weapon"],rules:"Non-Borg, 5SP or less",intercept:{ship:{free:function(){return!0},canEquip:function(n,a,i,c){return!(0==n.printedValue||u(n,"borg",a,i)||t(n,"cost",a,i)>5)&&c}}}}]},"tech:T160":{canEquip:function(n,a,t){return"Romulan Drone Ship"==a.class},canEquip:c("Repair Protocol")},"weapon:W165":{canEquip:c("Tellarite Disruptor Banks"),factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"tech:T159":{canEquip:function(n,a,t){return"Romulan Drone Ship"==a.class},canEquip:c("Evasive Protocol")},"tech:T158":{canEquip:function(n,a,t){return"Romulan Drone Ship"==a.class},canEquip:c("Disguise Protocol")},"captain:Cap818":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"captain:Cap655":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"captain:Cap656":{upgradeSlots:s(1,{type:["talent"],rules:"Klingon And Romulan Talents Cost Exactly 3 SP",faceDown:!0,intercept:{ship:{cost:{priority:100,fn:function(n,a,t,i){return u(n,"klingon",a,t)||u(n,"romulan",a,t)?3:i}},factionPenalty:function(n,a,t,i){return u(n,"klingon",a,t)||u(n,"romulan",a,t)?0:i}}}})},"captain:Cap443":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"talent:E175":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"talent:E176":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"talent:E174":{canEquipFaction:function(n,t,i){return t.captain&&a.hasFaction(t.captain,"klingon",t,i)}},"tech:T163":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"weapon:W170":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1},canEquip:c("Tactical Station"),upgradeSlots:[{type:["weapon"]}]},"weapon:W169":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1},attack:0,intercept:{self:{attack:function(n,a,i,c){return a?t(a,"attack",a,i)+1:c}}}},"weapon:W167":{attack:0,intercept:{self:{attack:function(n,a,i,c){return a?t(a,"attack",a,i):c},cost:function(n,a,i,c){return a?r(n,a,i,c)+t(a,"attack",a,i):c}}}},"crew:C283":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:C282":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:C281":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:C290":{canEquip:function(n,t,i){return a.hasFaction(t,"klingon",t,i)}},"crew:C285":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:C284":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"captain:Cap817":{upgradeSlots:[{},{type:["tech"]}]},"talent:E177":{canEquipFaction:function(n,t,i){return t.captain&&a.hasFaction(t.captain,"romulan",t,i)}},"tech:T248":{canEquip:c("Interphase Generator")},"tech:T165":{canEquip:function(n,a,t){return c("Reinforced Shields")&&a.hull>=5}},"tech:T166":{canEquip:function(n,a,t){return c("Auxiliary Power Core")&&a.hull>=4},intercept:{self:{cost:function(n,t,i,c){return t&&!a.hasFaction(t,"romulan",t,i)?r(n,t,i,c)+2:c}}}},"weapon:W171":{canEquip:function(n,a,t){return c("Additional Weapons Array")&&"D'deridex Class"==a.class}},"talent:E180":{canEquipFaction:function(n,t,i){return t.captain&&a.hasFaction(t.captain,"dominion",t,i)&&t.hull>=5}},"crew:C297":{canEquip:function(n,t,i){return a.hasFaction(t,"dominion",t,i)}},"crew:C298":{upgradeSlots:[{type:["tech"]}]},"weapon:W178":{canEquip:function(n,a,t){return"Jem'Hadar Battleship "==a.class}},"weapon:W176":{canEquip:function(n,a,t){return c("Phased Polaron Beams")&&"Jem'Hadar Attack Ship"==a.class}},"weapon:W174":{canEquip:function(n,a,t){return"Jem'Hadar Attack Ship"==a.class}},"weapon:W175":{canEquip:c("Minesweeper")},"tech:T169":{canEquip:function(n,a,t){return c("Suicide Attack")&&"Jem'Hadar Attack Ship"==a.class}},"tech:T168":{canEquip:function(n,t,i){return a.hasFaction(t,"dominion",t,i)}},"captain:Cap730":{intercept:{ship:{factionPenalty:function(n,t,i,c){return a.hasFaction(n,"ferengi",t,i)?0:c},cost:function(n,a,t,i){return o(n)&&u(n,"ferengi",a,t)&&(i=r(n,a,t,i)-1),i}}}},"captain:Cap532":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"independent",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"talent:E181":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"independent",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1},canEquipFaction:function(n,t,i){return t.captain&&a.hasFaction(t.captain,"ferengi",t,i)}},"crew:C303":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"independent",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"crew:C302":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"independent",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"crew:C301":{canEquipFaction:function(n,t,i){return t.captain&&a.hasFaction(t.captain,"ferengi",t,i)}},"weapon:W180":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"independent",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"tech:T170":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"independent",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1},canEquip:c("Metaphasic Shields"),intercept:{ship:{shields:function(n,a,t,i){return n==a?r(n,a,t,i)+1:i}}}},"talent:E182":{canEquip:c("Neural Transponder"),canEquipFaction:function(n,t,i){return t.captain&&a.hasFaction(t.captain,"borg",t,i)}},"crew:C305":{upgradeSlots:[{type:["crew"]}],canEquip:c("Neonatal Borg"),intercept:{ship:{type:function(n,a,t,i){return $.inArray("tech",i)>=0||$.inArray("borg",i)>=0&&"borg"==a.hasFaction?i.concat(["crew"]):i}}}},"weapon:W181":{attack:0,intercept:{self:{attack:function(n,a,i,c){return a?t(a,"attack",a,i):c}}}},"weapon:W179":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"captain:Cap819":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"independent",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"captain:Cap657":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"independent",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"captain:Cap446":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"independent",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1},upgradeSlots:[{type:["talent"]},{type:["crew"],faceDown:!0,rules:"Cost of 3sp or less",intercept:{ship:{cost:function(){return 0},canEquip:function(n,i,c,e){return(t(n,"cost",i,c)<=4&&a.hasFaction(i,"federation",i,c)||a.hasFaction(i,"klingon",i,c)||a.hasFaction(i,"romulan",i,c)||a.hasFaction(i,"dominion",i,c)||a.hasFaction(i,"borg",i,c)||a.hasFaction(i,"bajoran",i,c)||a.hasFaction(i,"vulcan",i,c)||a.hasFaction(i,"mirror-universe",i,c)||!!(t(n,"cost",i,c)<=3||a.hasFaction(i,"independent",i,c)||a.hasFaction(i,"ferengi",i,c)||a.hasFaction(i,"kazon",i,c)||a.hasFaction(i,"xindi",i,c)))&&e}}}},{type:["crew"],faceDown:!0,rules:"Cost of 3sp or less",intercept:{ship:{cost:function(){return 0},canEquip:function(n,i,c,e){return(t(n,"cost",i,c)<=4&&a.hasFaction(i,"federation",i,c)||a.hasFaction(i,"klingon",i,c)||a.hasFaction(i,"romulan",i,c)||a.hasFaction(i,"dominion",i,c)||a.hasFaction(i,"borg",i,c)||a.hasFaction(i,"bajoran",i,c)||a.hasFaction(i,"vulcan",i,c)||a.hasFaction(i,"mirror-universe",i,c)||!!(t(n,"cost",i,c)<=3||a.hasFaction(i,"independent",i,c)||a.hasFaction(i,"ferengi",i,c)||a.hasFaction(i,"kazon",i,c)||a.hasFaction(i,"xindi",i,c)))&&e}}}}]},"captain:Cap223":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"independent",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1},upgradeSlots:[{type:["talent"],rules:"Grand Nagus Only",canEquip:function(n){return"Grand Nagus"==n.name}},{type:["talent"],rules:"The Rules of Acquisition Only",canEquip:function(n){return"The Rules Of Acquisition"==n.name}}]},"admiral:A033":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"independent",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:3},upgradeSlots:[{type:["talent"],rules:"Grand Nagus Only",canEquip:function(n){return"Grand Nagus"==n.name}},{type:["talent"],rules:"The Rules of Acquisition Only",canEquip:function(n){return"The Rules Of Acquisition"==n.name}}]},"talent:E183":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"independent",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1},canEquipFaction:function(n,t,i){return t.captain&&a.hasFaction(t.captain,"ferengi",t,i)}},"tech:T172":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"independent",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1},canEquip:c("Kemocite")},"tech:T171":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"weapon:W184":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"independent",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"weapon:W182":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"weapon:W183":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"independent",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1},attack:0,intercept:{self:{attack:function(n,a,i,c){return a?t(a,"attack",a,i):c}}}},"crew:C310":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"independent",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1},canEquipFaction:function(n,t,i){return t.captain&&a.hasFaction(t.captain,"ferengi",t,i)}},"crew:C309":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"independent",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1},canEquipFaction:function(n,t,i){return t.captain&&a.hasFaction(t.captain,"ferengi",t,i)}},"crew:C311":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"independent",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"crew:C313":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"independent",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"crew:C308":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)?0:1}},"question:Q019":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1},type:"question",isSlotCompatible:function(n){return $.inArray("tech",n)>=0||$.inArray("crew",n)>=0}},"question:Q020":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"mirror",t,i)?0:1},type:"question",isSlotCompatible:function(n){return $.inArray("tech",n)>=0||$.inArray("crew",n)>=0||$.inArray("weapon",n)>=0}},"question:Q012":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1},type:"question",isSlotCompatible:function(n){return $.inArray("tech",n)>=0||$.inArray("weapon",n)>=0}},"captain:Cap732":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"captain:Cap447":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"talent:E184":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1},canEquipFaction:function(n,a,t){return a.captain&&("S'Sesslak"==a.captain.name||"Lahr"==a.captain.name||a.captain.name.indexOf("Gorn")>=0)},canEquip:function(n,a,t){return"Gorn Raider"==a.class}},"crew:C316":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"crew:C314":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1},intercept:{ship:{skill:function(n,a,t,i){return n==a.captain?r(n,a,t,i)+1:i}}}},"crew:C315":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"question:Q013":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1},canEquip:function(n,t,i){return c("Meridor - Gorn Ale")(n,t,i)&&a.hasFaction(t,"independent",t,i)||c("Meridor - Gorn Ale")(n,t,i)&&a.hasFaction(t,"ferengi",t,i)||c("Meridor - Gorn Ale")(n,t,i)&&a.hasFaction(t,"kazon",t,i)||c("Meridor - Gorn Ale")(n,t,i)&&a.hasFaction(t,"xindi",t,i)},isSlotCompatible:function(n){return $.inArray("tech",n)>=0||$.inArray("weapon",n)>=0||$.inArray("crew",n)>=0},upgradeSlots:[{type:function(n,a){return p(n,a)}}]},"weapon:W186":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"weapon:W185":{canEquip:function(n,a,t){return"Gorn Raider"==a.class&&c("Disruptor Bombardment")}},"tech:T173":{canEquip:function(n,a,t){return"Gorn Raider"==a.class&&c("Gorn Sensors")}},"tech:T174":{canEquip:function(n,a,t){return"Gorn Raider"==a.class&&c("Enhanced Durability")},upgradeSlots:[{type:["tech"]}],intercept:{ship:{shields:function(n,a,t,i){return n==a?r(n,a,t,i)+1:i},agility:function(n,a,t,i){return n==a?r(n,a,t,i)+1:i}}}},"talent:E186":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"federation",t,i)?0:1}},"weapon:W187":{canEquip:c("Tactical Command Reticle"),canEquipFaction:function(n,t,i){return a.hasFaction(t,"dominion",t,i)},upgradeSlots:[{type:["weapon"]}]},"squadron:D032":{upgradeSlots:[{type:["squadron"]}]},"squadron:D029":{canEquip:c("Defensive Maneuver Beta")},"squadron:D028":{canEquip:c("Defensive Maneuver Theta")},"squadron:D027":{canEquip:c("Flanking Maneuver Delta")},"squadron:D031":{canEquip:c("Flanking Maneuver Epsilon")},"squadron:D026":{canEquip:c("Flanking Attack Omega")},"captain:Cap545":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"captain:Cap339":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"talent:E187":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1},canEquipFaction:function(n,a,t){return a.captain&&("Idrin"==a.captain.name||"Karr"==a.captain.name||a.captain.name.indexOf("Hirogen")>=0)}},"talent:E188":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"crew:C320":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1},canEquip:c("Beta Hirogen"),intercept:{ship:{skill:function(n,a,t,i){return n==a.captain?r(n,a,t,i)+1:i}}}},"crew:C321":{canEquip:function(n,a,t){return"Hirogen Warship"==a.class}},"weapon:W188":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1},intercept:{self:{cost:function(n,a,t,i){return a&&a.class.indexOf("Hirogen")<0?r(n,a,t,i)+5:i}}}},"tech:T178":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1},canEquip:c("Tractor Beam")},"tech:T177":{canEquip:function(n,a,t){return c("Stealth Mode")&&"Hirogen Warship"==a.class}},"question:Q014":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)||a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1},isSlotCompatible:function(n){return $.inArray("tech",n)>=0||$.inArray("weapon",n)>=0}},"ship:S313":{upgradeSlots:[{type:["tech"],rules:"Free Inertial Compensators Only",canEquip:function(n){return"Inertial Compensators"==n.name},intercept:{ship:{cost:function(){return 0}}}}]},"ship:S316":{intercept:{ship:{type:function(n,a,t,i){return a.captain&&$.inArray(i,a.captain)>=0?i.concat(["crew"]):i}}},upgradeSlots:[{type:["crew"],rules:"Replace's Captain",intercept:{ship:{skill:function(n,a,t,i){return n.cost+3}}}}]},"captain:Cap658":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"federation",t,i)||a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"captain:Cap609":{canEquipCaptain:function(n,a,t){return"Dauntless Class"==a.class}},"captain:Cap336":{canEquipCaptain:function(n,a,t){return"Romulan Drone Ship"==a.class}},"captain:Cap448":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"captain:Cap501":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"talent:E192":{canEquip:function(n,t,i){return t.captain&&(a.hasFaction(t.captain,"independent",t,i)||a.hasFaction(t.captain,"ferengi",t,i)||a.hasFaction(t.captain,"kazon",t,i)||a.hasFaction(t.captain,"xindi",t,i))&&"Maquis Raider"==t.class}},"talent:E191":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1},canEquipFaction:function(n,a,t){return a.captain&&("Telev"==a.captain.name||"Thy'Lek Shran"==a.captain.name||a.captain.name.indexOf("Andorian")>=0)}},"talent:E190":{canEquipFaction:function(n,a,t){return a.captain&&a.captain.name.indexOf("Vidiian")>=0},canEquip:function(n,a,t){return"Vidiian Battle Cruiser"==a.class}},"crew:C340":{canEquip:function(n,a,t){return"Andorian Battle Cruiser"==a.class}},"crew:C338":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"crew:C339":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"crew:C337":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},"weapon:W193":{canEquip:function(n,a,t){return"Vidiian Battle Cruiser"==a.class}},"weapon:W194":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1},canEquip:function(n,a,t){return a.attack<=2}},"tech:T184":{canEquip:function(n,a,t){return c("Enhanced Shield Emitters")&&"Andorian Battle Cruiser"==a.class},intercept:{ship:{shields:function(n,a,t,i){return n==a?r(n,a,t,i)+2:i}}}},"tech:T251":{canEquip:function(n,a,t){return c("Particle Synthesis")&&"Dauntless Class"==a.class}},"tech:T182":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1},intercept:{self:{canEquip:function(n,a,t){if(a&&a.hull<=3&&a.classData&&a.classData.maneuvers)for(i=1;i<a.classData.maneuvers.max;i++)if(void 0!==a.classData.maneuvers[i].about)return!0;return!1}}}},"tech:T183":{canEquip:function(n,a,t){return c("Class 4 Cloaking Device")&&"Maquis Raider"==a.class}},"question:Q015":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1},canEquip:function(n,t,i){return c("Repurposed Cargo Hold")(n,t,i)&&a.hasFaction(t,"independent",t,i)||c("Repurposed Cargo Hold")(n,t,i)&&a.hasFaction(t,"ferengi",t,i)||c("Repurposed Cargo Hold")(n,t,i)&&a.hasFaction(t,"kazon",t,i)||c("Repurposed Cargo Hold")(n,t,i)&&a.hasFaction(t,"xindi",t,i)},isSlotCompatible:function(n){return $.inArray("tech",n)>=0||$.inArray("weapon",n)>=0||$.inArray("crew",n)>=0},upgradeSlots:[{type:["tech","weapon"]}]},"captain:Cap820":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1},upgradeSlots:[{},{type:["crew"]}]},"admiral:A034":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:3},upgradeSlots:[{},{type:["crew"]}]},"captain:Cap733":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"captain:Cap502":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"captain:Cap601":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"talent:E189":{canEquipFaction:function(n,t,i){return t.captain&&a.hasFaction(t.captain,"klingon",t,i)}},"crew:C336":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1},upgradeSlots:[{type:["talent"]}]},"crew:C335":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1},upgradeSlots:[{type:["talent"]}]},"crew:C334":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:C333":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:C332":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:C331":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:C330":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1},upgradeSlots:[{type:["crew"],faceDown:!0,intercept:{ship:{canEquip:function(n,a,i){return t(n,"cost",a,i)<=4},free:function(){return!0}}}}]},"crew:C329":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:C328":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:C327":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:C326":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:C322":{canEquip:function(n,t,i){return a.hasFaction(t,"klingon",t,i)}},"crew:C323":{canEquip:function(n,t,i){return a.hasFaction(t,"klingon",t,i)&&c("Klingon First Officer")}},"crew:C324":{canEquip:function(n,t,i){return a.hasFaction(t,"klingon",t,i)}},"crew:C325":{canEquip:function(n,t,i){return a.hasFaction(t,"klingon",t,i)}},"weapon:W189":{canEquip:function(n,a,t){return"Constitution Class (Kelvin)"==a.class&&c("Full Spread Phasers")}},"weapon:W192":{canEquip:function(n,a,t){return"Constitution Class (Kelvin)"==a.class},attack:0,intercept:{self:{attack:function(n,a,i,c){return a?t(a,"attack",a,i)+1:c}}}},"weapon:W191":{attack:0,intercept:{self:{attack:function(n,a,i,c){return a?t(a,"attack",a,i)+1:c}}}},"weapon:W190":{canEquip:function(n,a,t){return"Warbird Class"==a.class}},"tech:T179":{canEquip:function(n,t,i){return a.hasFaction(t,"klingon",t,i)&&c("Klingon Cloaking Device")}},"tech:T180":{canEquip:function(n,a,t){return c("Future Technology")},upgradeSlots:[{type:["tech"],faceDown:!0,intercept:{ship:{canEquip:function(n,a,i){return t(n,"cost",a,i)<=4},free:function(){return!0}}}}],intercept:{ship:{factionPenalty:function(n,t,i,c){return"tech"==n.type&&a.hasFaction(n,"romulan",t,i)||"weapon"==n.type&&a.hasFaction(n,"romulan",t,i)||"tech"==n.type&&a.hasFaction(n,"borg",t,i)||"weapon"==n.type&&a.hasFaction(n,"borg",t,i)?0:c}}}},"captain:Cap822":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"captain:Cap825":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1},intercept:{self:{skill:function(n,a,t,i){return"Constitution Class"==a.class?r(n,a,t,i)+1:i}}}},"talent:E197":{canEquipFaction:function(n,t,i){return t.captain&&a.hasFaction(t.captain,"klingon",t,i)}},"talent:E196":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1},canEquipFaction:function(n,t,i){return t.captain&&a.hasFaction(t.captain,"federation",t,i)}},"crew:C345":{canEquip:function(n,t,i){return a.hasFaction(t,"klingon",t,i)}},"crew:C356":{canEquip:function(n,t,i){return a.hasFaction(t,"klingon",t,i)}},"crew:C348":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:C347":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:C353":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:C354":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:C349":{intercept:{ship:{factionPenalty:function(n,a,t,i){return"C349"==n.id?0:i}}}},"weapon:W197":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1},intercept:{self:{attack:function(n,a,i,c){return t(a,"attack",a,i)}}}},"weapon:W196":{canEquip:c("Magnetic Pulse"),intercept:{self:{attack:function(n,a,i,c){return t(a,"attack",a,i)}}}},"ship:S318":{class:"Galaxy Class",classId:"galaxy__class_mu",intercept:{ship:{factionPenalty:function(n,a,t,i){return n?0:i},factions:function(n,a,t,i){return n==a&&i.indexOf("mirror-universe")<0?i.concat(["mirror-universe"]):i},cost:function(n,a,t,i){return f("tech",n,a)?r(n,a,t,i)-1:i}}}},"captain:Cap911":{canEquipFaction:function(n,t,i){return a.hasFaction(n,"borg",t,i)}},"captain:Cap910":{canEquipCaptain:function(a,t,i){return!n("fleetCardNamed")(i,"Jean-Luc Picard")},canEquipFaction:function(n,t,i){return a.hasFaction(n,"borg",t,i)},upgradeSlots:[{type:["talent"]},{type:["crew"]},{type:["crew"]}],intercept:{fleet:{canEquip:function(n,a,t,i){return"Jean-Luc Picard"!=n.name&&i},canEquipCaptain:function(n,a,t,i){return"Jean-Luc Picard"!=n.name&&i}},ship:{factionPenalty:{priority:100,fn:function(n,a,t,i){return"crew"==n.type?0:i}}}}},"captain:Cap824":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:C350":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"crew:C352":{canEquipFaction:function(n,a,t){return u(a,"borg",a,t)}},"crew:C345":{intercept:{ship:{skill:function(n,a,t,i){return n==a.captain?r(n,a,t,i)+(u(n,"borg",a,t)?3:1):i}}}},"crew:C351":{upgradeSlots:[{type:["borg"]}],intercept:{ship:{cost:{priority:100,fn:function(n,a,t,i){return f("borg",n,a)&&(i=r(n,a,t,i),i-=1),i}}}}},"crew:C357":{upgradeSlots:[{type:["borg"],rules:"-1SP for each Empty Slot",intercept:{ship:{cost:function(a,t,i,c){var e=0;$.inArray(t.upgrades);return $.each(n("upgradeSlots")(t),(function(n,a){null==a.occupant&&"talent"!==a.type&&(e+=1)})),(c-=e)<0&&(c=0),c}}}}]},"tech:T252":{intercept:{ship:{factionPenalty:function(n,a,t,i){return"T252"==n.id?0:i}}},upgradeSlots:[{type:["borg"]}]},"weapon:W200":{canEquipFaction:function(n,t,i){return a.hasFaction(t,"borg",t,i)},intercept:{self:{attack:function(n,a,i,c){return a?t(a,"attack",a,i):c}}}},"weapon:W199":{canEquipFaction:function(n,t,i){return a.hasFaction(t,"borg",t,i)},intercept:{self:{attack:function(n,a,i,c){return a?t(a,"attack",a,i):c},cost:function(n,a,i,c){return a?t(a,"attack",a,i):c}}}},"borg:B020":{canEquipFaction:function(n,t,i){return a.hasFaction(t,"borg",t,i)},canEquip:c("Borg Multi-Adaptive Shields")},"borg:B022":{canEquipFaction:function(n,t,i){return a.hasFaction(t,"borg",t,i)}},"talent:E195":{canEquipFaction:function(n,a,t){return u(a.captain,"borg",a,t)}},"talent:E194":{canEquipFaction:function(n,a,t){return u(a,"borg",a,t)}},"talent:E193":{canEquip:c("Ocular Implants"),canEquipFaction:function(n,a,t){return u(a,"borg",a,t)&&u(a.captain,"borg",a,t)}},"ship:S335":{intercept:{ship:{cost:function(n,t,i,c){return a.hasFaction(n,"vulcan",t,i)&&"captain"==n.type||a.hasFaction(n,"vulcan",t,i)&&"admiral"==n.type||a.hasFaction(n,"vulcan",t,i)&&"crew"==n.type?r(n,t,i,c)-1:c}}}},"captain:Cap662":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"federation",t,i)?0:1}},"captain:Cap832":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"federation",t,i)?0:1}},"captain:Cap831":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)?0:1}},"captain:Cap830":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"federation",t,i)?0:1}},"tech:T268":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"federation",t,i)?0:1}},"tech:T269":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"federation",t,i)?0:1}},"crew:C369":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"federation",t,i)?0:1},upgradeSlots:[{type:["tech"],rules:"Free Stone of Gol Only",canEquip:function(n){return"Stone of Gol"==n.name},intercept:{ship:{cost:function(){return 0}}}}]},"crew:C368":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)?0:1}},"crew:C367":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)?0:1}},"tech:T267":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"federation",t,i)?0:1},intercept:{self:{cost:function(n,t,i,c){return t&&!a.hasFaction(t,"vulcan",t,i)?r(n,t,i,c)+5:c}}}},"talent:E198":{canEquipFaction:function(n,a,t){return u(a,"vulcan",a,t)&&u(a.captain,"vulcan",a,t)}},"talent:E207":{canEquipFaction:function(n,a,t){return u(a,"vulcan",a,t)&&u(a.captain,"vulcan",a,t)}},"weapon:W212":{canEquipFaction:function(n,a,t){return u(a,"vulcan",a,t)}},"weapon:W211":{canEquipFaction:function(n,a,t){return u(a,"vulcan",a,t)}},"tech:T264":{canEquipFaction:function(n,a,t){return u(a,"vulcan",a,t)}},"tech:T266":{canEquip:function(n,a,t){return c("Science Vessel Variant")&&("D'Kyr Class"==a.class||"Suurok Class"==a.class)},intercept:{ship:{agility:function(n,a,t,i){return n==a?r(n,a,t,i)+1:i},hull:function(n,a,t,i){return n==a?r(n,a,t,i)+1:i}}}},"tech:T265":{canEquip:function(n,a,t){return c("Combat Vessel Variant")&&("D'Kyr Class"==a.class||"Suurok Class"==a.class)},intercept:{ship:{attack:function(n,a,t,i){return n==a?r(n,a,t,i)+1:i}}}},"captain:Cap826":{canEquipFaction:function(n,a,t){return u(a,"dominion",a,t)}},"question:Q018":{canEquip:c("Kanar"),canEquipFaction:function(n,a,t){return u(a,"dominion",a,t)},isSlotCompatible:function(n){return $.inArray("tech",n)>=0||$.inArray("weapon",n)>=0||$.inArray("crew",n)>=0},upgradeSlots:[{type:function(n,a){return p(n,a)}}]},"crew:C363":{canEquipFaction:function(n,a,t){return u(a,"dominion",a,t)}},"captain:Cap827":{intercept:{self:{factionPenalty:function(n,a,t,i){return u(a,"romulan",a,t)?0:i}}}},"admiral:A036":{intercept:{self:{factionPenalty:function(n,a,t,i){return u(a,"romulan",a,t)?0:i}}}},"crew:C364":{intercept:{ship:{skill:function(n,a,t,i){return n==a.captain?r(n,a,t,i)+2:i}}}},"crew:C365":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"federation",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},"talent:E204":{canEquipFaction:function(n,a,t){return u(a,"dominion",a,t)},canEquip:c("Obsidian Order")},"weapon:W208":{canEquip:c("Multiple Dorsal Arrays"),canEquip:function(n,a,t){return"Cardassian Galor Class"==a.class}},"weapon:W209":{canEquip:c("Enhanced Resonance Field Grid")},"weapon:W210":{canEquip:function(n,a,t){return c("Phase Disruptor Array")&&("Cardassian Galor Class"==a.class||"Cardassian Keldon Class"==a.class)}},"tech:T260":{canEquip:c("Sensor Ghost")},"tech:T261":{canEquip:function(n,a,t){return c("Uridium Alloy")&&("Cardassian Galor Class"==a.class||"Cardassian Keldon Class"==a.class)}},"tech:T262":{canEquip:function(n,a,t){return c("Type-3 Galor Class")&&"Cardassian Galor Class"==a.class},intercept:{ship:{shields:function(n,a,t,i){return n==a?r(n,a,t,i)+2:i}}}},"tech:T263":{canEquipFaction:function(n,a,t){return u(a,"dominion",a,t)},upgradeSlots:s(2,{type:["crew"]})},":":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},":":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"federation",t,i)||a.hasFaction(t,"vulcan",t,i)?0:1}},":":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"bajoran",t,i)||a.hasFaction(t,"federation",t,i)?0:1}},":":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},":":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"independent",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},":":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"independent",t,i)||a.hasFaction(t,"xindi",t,i)?0:1}},":":{factionPenalty:function(n,t,i){return t&&a.hasFaction(t,"ferengi",t,i)||a.hasFaction(t,"kazon",t,i)||a.hasFaction(t,"independent",t,i)?0:1}},"resource:R042":{slotType:"ship-resource",cost:0,hideCost:!0,showShipResourceSlot:function(n,a,t){if(a.resource&&"ship-resource"==a.resource.type)return!0;var i=!0;return $.each(t.ships,(function(n,a){a.resource&&(i=!1)})),i},onRemove:function(n,a,t){$.each(t.ships,(function(n,a){a.resource&&delete a.resource}))}},"ship-resource:R042a":{canEquip:function(n,a,i){return t(a,"hull",a,i)>=4}},"resource:R040":{slotType:"ship-resource",cost:0,hideCost:!0,showShipResourceSlot:function(n,a,t){if(a.resource&&"ship-resource"==a.resource.type)return!0;var i=!0;return $.each(t.ships,(function(n,a){a.resource&&(i=!1)})),i},onRemove:function(n,a,t){$.each(t.ships,(function(n,a){a.resource&&delete a.resource}))}},"ship-resource:Rs40":{intercept:{ship:{shields:function(n,a,t,i){return n==a?r(n,a,t,i)+1:i},skill:function(n,a,t,i){return n==a.captain?r(n,a,t,i)+1:i}}}},"resource:R039":{slotType:"ship-resource",cost:0,hideCost:!0,showShipResourceSlot:function(n,a,t){if(a.resource&&"ship-resource"==a.resource.type)return!0;var i=!0;return $.each(t.ships,(function(n,a){a.resource&&(i=!1)})),i},onRemove:function(n,a,t){$.each(t.ships,(function(n,a){a.resource&&delete a.resource}))}},"resource:R033":{slotType:"ship-resource",cost:0,hideCost:!0,showShipResourceSlot:function(n,a,t){if(a.resource&&"ship-resource"==a.resource.type)return!0;var i=!0;return $.each(t.ships,(function(n,a){a.resource&&(i=!1)})),i},onRemove:function(n,a,t){$.each(t.ships,(function(n,a){a.resource&&delete a.resource}))}},"ship-resource:R033a":{upgradeSlots:[{type:["captain"],rules:"Fleet Commander"}],intercept:{ship:{skill:function(n,a,t,i){return n==a.captain?r(n,a,t,i)+1:i},shields:function(n,a,t,i){return n==a?r(n,a,t,i)+1:i}}}},"ship-resource:R033b":{upgradeSlots:[{type:["captain"],rules:"Fleet Commander"}],intercept:{ship:{skill:function(n,a,t,i){return n==a.captain?r(n,a,t,i)+1:i},hull:function(n,a,t,i){return n==a?r(n,a,t,i)+1:i},canEquip:function(n,a,t){if(n||n&&"4+"==n.hullconstraint&&a.hull>=3||n&&"5+"==n.hullconstraint&&a.hull>=4||n&&"3-"==n.hullconstraint&&a.hull<=2)return!0}}}},"resource:R010":{slotType:"fleet-captain",cost:0,hideCost:!0,showShipResourceSlot:function(n,a,t){if(a.resource&&"fleet-captain"==a.resource.type)return!0;var i=!0;return $.each(t.ships,(function(n,a){a.resource&&(i=!1)})),i},onRemove:function(n,a,t){$.each(t.ships,(function(n,a){a.resource&&delete a.resource}))}},"fleet-captain:R010a":{canEquip:function(n,t,i){return a.hasFaction(t,"federation",t,i)&&(!t.captain||t.captain.unique&&a.hasFaction(t.captain,"federation",t,i))},intercept:{ship:{canEquipCaptain:function(n,t,i){return n.unique&&a.hasFaction(n,"federation",t,i)}}}},"fleet-captain:R010b":{canEquip:function(n,t,i){return a.hasFaction(t,"dominion",t,i)&&(!t.captain||t.captain.unique&&a.hasFaction(t.captain,"dominion",t,i))},intercept:{ship:{canEquipCaptain:function(n,t,i){return n.unique&&a.hasFaction(n,"dominion",t,i)}}}},"fleet-captain:R010c":{canEquip:function(n,t,i){return a.hasFaction(t,"romulan",t,i)&&(!t.captain||t.captain.unique&&a.hasFaction(t.captain,"romulan",t,i))},intercept:{ship:{canEquipCaptain:function(n,t,i){return n.unique&&a.hasFaction(n,"romulan",t,i)}}}},"fleet-captain:R010d":{canEquip:function(n,t,i){return a.hasFaction(t,"klingon",t,i)&&(!t.captain||t.captain.unique&&a.hasFaction(t.captain,"klingon",t,i))},intercept:{ship:{canEquipCaptain:function(n,t,i){return n.unique&&a.hasFaction(n,"klingon",t,i)}}}},"fleet-captain:R010e":{canEquip:function(n,a,t){return!a.captain||a.captain.unique},intercept:{ship:{canEquipCaptain:function(n,a,t){return n.unique},factions:function(n,a,t,i){return i=i||n.factions,n==a.captain&&i.indexOf("independent")<0?i.concat(["independent"]):i}},fleet:{cost:function(n,a,t,i){return f("crew",n,a)?r(n,a,t,i)-1:i}}}},"fleet-captain:R010f":{canEquip:function(n,a,t){return!a.captain||a.captain.unique},intercept:{ship:{canEquipCaptain:function(n,a,t){return n.unique},factions:function(n,a,t,i){return i=i||n.factions,n==a.captain&&i.indexOf("independent")<0?i.concat(["independent"]):i}},fleet:{}}},"fleet-captain:R010g":{canEquip:function(n,a,t){return!a.captain||a.captain.unique},intercept:{ship:{canEquipCaptain:function(n,a,t){return n.unique},factions:function(n,a,t){var i=n.factions;return n==a.captain&&i.indexOf("independent")<0?i.concat(["independent"]):i}},fleet:{cost:function(n,a,t,i){return f("weapon",n,a)?r(n,a,t,i)-1:i}}}},"fleet-captain:R010h":{canEquip:function(n,a,t){return!a.captain||a.captain.unique},intercept:{ship:{canEquipCaptain:function(n,a,t){return n.unique},factions:function(n,a,t){var i=n.factions;return n==a.captain&&i.indexOf("independent")<0?i.concat(["independent"]):i}},fleet:{cost:function(n,a,t,i){return f("tech",n,a)?r(n,a,t,i)-1:i}}}},"resource:R015":{upgradeSlots:[{type:["faction"],source:"Select Factions for Officer Exchange Program"},{type:["faction"],source:"Select Factions for Officer Exchange Program"}],intercept:{fleet:{factionPenalty:function(n,t,i,c){var e=i.resource.upgradeSlots[0].occupant,o=i.resource.upgradeSlots[1].occupant;return e&&o?"captain"!=n.type&&"admiral"!=n.type&&"crew"!=n.type?c:a.match(n,e)&&a.match(t,o)||a.match(n,o)&&a.match(t,e)?0:c:c},cost:function(n,t,i,c){var e=i.resource.upgradeSlots[0].occupant,o=i.resource.upgradeSlots[1].occupant;return e&&o?"captain"!=n.type&&"admiral"!=n.type?c:a.match(n,e)&&a.match(t,o)||a.match(n,o)&&a.match(t,e)?r(n,t,i,c)-1:c:c}}}},"resource:R011":{hideCost:!0,intercept:{fleet:{type:function(n,a,t,i){return $.inArray("crew",i)>=0?i.concat(["officer"]):i}}}},"officer:R011a":{skill:4,talents:1,upgradeSlots:[{},{type:["talent"],source:"First Officer"}]},"officer:R011b":{upgradeSlots:[{},{type:["weapon"],source:"Tactical Officer"}]},"officer:R011c":{upgradeSlots:[{},{type:["crew"],source:"Operations Officer"}]},"officer:R011d":{upgradeSlots:[{},{type:["tech"],source:"Science Officer"}]},"resource:R003":{class:"Sideboard",factions:a.listCodified,upgradeSlots:[{type:["captain"],source:"Sideboard",rules:"Combined cost 20 SP or less",canEquip:function(n,a,i,c){var e=0;$.each(i.resource.upgradeSlots,(function(n,o){o.occupant&&o!=c&&(e+=t(o.occupant,"cost",a,i))}));var o=t(n,"cost",a,i);return e+o<=20},intercept:{ship:{canEquip:{priority:100,fn:function(){return!0}},canEquipFaction:{priority:100,fn:function(){return!0}},factionPenalty:function(){return 0}}}},{type:["talent"],source:"Sideboard",rules:"Combined cost 20 SP or less",canEquip:function(n,a,i,c){var e=0;$.each(i.resource.upgradeSlots,(function(n,o){o.occupant&&o!=c&&(e+=t(o.occupant,"cost",a,i))}));var o=t(n,"cost",a,i);return e+o<=20},intercept:{ship:{canEquip:{priority:100,fn:function(){return!0}},canEquipFaction:{priority:100,fn:function(){return!0}},factionPenalty:function(){return 0}}}},{type:["crew"],source:"Sideboard",rules:"Combined cost 20 SP or less",canEquip:function(n,a,i,c){var e=0;$.each(i.resource.upgradeSlots,(function(n,o){o.occupant&&o!=c&&(e+=t(o.occupant,"cost",a,i))}));var o=t(n,"cost",a,i);return e+o<=20},intercept:{ship:{canEquip:{priority:100,fn:function(){return!0}},canEquipFaction:{priority:100,fn:function(){return!0}},factionPenalty:function(){return 0}}}},{type:["tech"],source:"Sideboard",rules:"Combined cost 20 SP or less",canEquip:function(n,a,i,c){var e=0;$.each(i.resource.upgradeSlots,(function(n,o){o.occupant&&o!=c&&(e+=t(o.occupant,"cost",a,i))}));var o=t(n,"cost",a,i);return e+o<=20},intercept:{ship:{canEquip:{priority:100,fn:function(){return!0}},canEquipFaction:{priority:100,fn:function(){return!0}},factionPenalty:function(){return 0}}}},{type:["weapon"],source:"Sideboard",rules:"Combined cost 20 SP or less",canEquip:function(n,a,i,c){var e=0;$.each(i.resource.upgradeSlots,(function(n,o){o.occupant&&o!=c&&(e+=t(o.occupant,"cost",a,i))}));var o=t(n,"cost",a,i);return e+o<=20},intercept:{ship:{canEquip:{priority:100,fn:function(){return!0}},canEquipFaction:{priority:100,fn:function(){return!0}},factionPenalty:function(){return 0}}}}]},"resource:R004":{slotType:"flagship",cost:0,hideCost:!0,showShipResourceSlot:function(n,a,t){if(a.resource&&"flagship"==a.resource.type)return!0;var i=!0;return $.each(t.ships,(function(n,a){a.resource&&(i=!1)})),i},onRemove:function(n,a,t){$.each(t.ships,(function(n,a){a.resource&&delete a.resource}))}},"flagship:R004a":{canEquip:function(n,t,i){return a.hasFaction(t,"romulan",t,i)}},"flagship:R004b":{canEquip:function(n,t,i){return a.hasFaction(t,"klingon",t,i)},intercept:{ship:{canEquip:function(n,a,t){if(n||n&&"4+"==n.hullconstraint&&a.hull>=3||n&&"5+"==n.hullconstraint&&a.hull>=4||n&&"3-"==n.hullconstraint&&a.hull<=2)return!0}}}},"flagship:R004c":{canEquip:function(n,t,i){return a.hasFaction(t,"dominion",t,i)},intercept:{ship:{canEquip:function(n,a,t){if(n||n&&"4+"==n.hullconstraint&&a.hull>=3||n&&"5+"==n.hullconstraint&&a.hull>=4||n&&"3-"==n.hullconstraint&&a.hull<=2)return!0}}}},"flagship:R004e":{canEquip:function(n,t,i){return a.hasFaction(t,"federation",t,i)},intercept:{ship:{canEquip:function(n,a,t){if(n||n&&"4+"==n.hullconstraint&&a.hull>=3||n&&"5+"==n.hullconstraint&&a.hull>=4||n&&"3-"==n.hullconstraint&&a.hull<=2)return!0}}}},"flagship:R004f":{intercept:{ship:{factions:function(n,a,t,i){return n==a&&i.indexOf("independent")<0?i.concat(["independent"]):i}}}},"flagship:R004g":{intercept:{ship:{factions:function(n,a,t,i){return n==a&&i.indexOf("independent")<0?i.concat(["independent"]):i},canEquip:function(n,a,t){if(n||n&&"4+"==n.hullconstraint&&a.hull>=3||n&&"5+"==n.hullconstraint&&a.hull>=4||n&&"3-"==n.hullconstraint&&a.hull<=2)return!0}}}},"flagship:R004h":{intercept:{ship:{factions:function(n,a,t,i){return n==a&&i.indexOf("independent")<0?i.concat(["independent"]):i},canEquip:function(n,a,t){if(n||n&&"4+"==n.hullconstraint&&a.hull>=3||n&&"5+"==n.hullconstraint&&a.hull>=4||n&&"3-"==n.hullconstraint&&a.hull<=2)return!0}}}},"flagship:R004i":{intercept:{ship:{factions:function(n,a,t,i){return n==a&&i.indexOf("independent")<0?i.concat(["independent"]):i},canEquip:function(n,a,t){if(n||n&&"4+"==n.hullconstraint&&a.hull>=3||n&&"5+"==n.hullconstraint&&a.hull>=4||n&&"3-"==n.hullconstraint&&a.hull<=2)return!0}}}},"resource:R020":{cost:function(n,a,i){if(!i)return 0;var c=0;return $.each(i.ships||[],(function(n,a){c+=t(a,"shields",a,i)})),Math.ceil(c/2)}},"resource:R029":{},"talent:E035":{upgradeSlots:[{type:["talent"],rules:"",faceDown:!0,canEquip:function(n,i,c){return a.match(n,i)&&t(n,"cost",i,c)<=5},intercept:{ship:{free:function(){return!0}}}}],canEquip:c("Balance of Terror"),intercept:{self:{cost:{priority:1e3,fn:function(){return 3}}}}},"crew:C035":{upgradeSlots:[{type:["crew"],rules:"",faceDown:!0,canEquip:function(n,i,c){return a.match(n,i)&&t(n,"cost",i,c)<=5},intercept:{ship:{free:function(){return!0}}}}],canEquip:c("Balance of Terror"),intercept:{self:{cost:{priority:1e3,fn:function(){return 3}}}}},"tech:T044":{upgradeSlots:[{type:["tech"],rules:"",faceDown:!0,canEquip:function(n,i,c){return a.match(n,i)&&t(n,"cost",i,c)<=5},intercept:{ship:{free:function(){return!0}}}}],canEquip:c("Balance of Terror"),intercept:{self:{cost:{priority:1e3,fn:function(){return 3}}}}},"weapon:W027":{upgradeSlots:[{type:["weapon"],rules:"",faceDown:!0,canEquip:function(n,i,c){return a.match(n,i)&&t(n,"cost",i,c)<=5},intercept:{ship:{free:function(){return!0}}}}],canEquip:c("Balance of Terror"),intercept:{self:{cost:{priority:1e3,fn:function(){return 3}}}}},"resource:R036":{intercept:{fleet:{type:function(n,a,t,i){return $.inArray("crew",i)>=0?i.concat(["ship-resource"]):i}}}},"ship-resource:R036a":{upgradeSlots:[{type:["crew"]},{type:["talent"],intercept:{ship:{cost:function(n,a,t,i){return r(n,a,t,i)+1}}}}]}}}]),(module=angular.module("utopia-card-ship",[])).directive("cardShip",(function(){return{scope:{ship:"=",fleet:"=",dragStore:"=",dragSource:"="},templateUrl:"card-ship.html",controller:["$scope",function(n){}]}})),(module=angular.module("utopia-card-ship-class",[])).directive("cardShipClass",(function(){return{scope:{shipClass:"=",ship:"=",fleet:"="},templateUrl:"card-ship-class.html",controller:["$scope",function(n){n.abs=Math.abs,n.speeds=[];for(var a=n.shipClass.maneuvers,t=a.max;t>=a.min;t--)(0!=t||a[0])&&n.speeds.push(t);for(n.speeds.length<7&&a.min>-2&&n.speeds.push(9),n.speeds.length<7&&a.min>-1&&n.speeds.push(9);n.speeds.length<7;)n.speeds.unshift(9);n.getBaseTileName=function(n){return n.unique?n.name:n.class}}]}})),(module=angular.module("utopia-card-token",[])).directive("cardToken",(function(){return{scope:{token:"=",ship:"=",fleet:"=",dragStore:"=",dragSource:"="},templateUrl:"card-token.html",controller:["$scope",function(n){}]}})),(module=angular.module("utopia-card-upgrade",[])).directive("cardUpgrade",(function(){return{scope:{upgrade:"=",ship:"=",fleet:"=",dragStore:"=",dragSource:"="},templateUrl:"card-upgrade.html",controller:["$scope",function(n){n.range=function(n){return new Array(n)},n.isDefined=function(n){return void 0!==n}}]}})),(module=angular.module("utopia-valueof",[])).filter("removeDashes",["$filter",function(n){return function(n){return n?n.replace(/\-/g," "):n}}]),module.factory("globalInterceptors",(function(){return{cost:{priority:1e3,source:"Cost cannot be negative",hidden:!0,fn:function(n,a,t,i){return(i=i instanceof Function?i(n,a,t):i)<0?0:i}}}})),module.filter("upgradeSlots",(function(){return function(n){var a=[];n.resource&&n.resource.upgradeSlots&&(a=a.concat(n.resource.upgradeSlots)),n.captain&&n.captain.upgradeSlots&&(a=a.concat(n.captain.upgradeSlots)),n.admiral&&n.admiral.upgradeSlots&&(a=a.concat(n.admiral.upgradeSlots)),n.ambassador&&n.ambassador.upgradeSlots&&(a=a.concat(n.ambassador.upgradeSlots)),a=a.concat(n.upgrades).concat(n.upgradeSlots);for(var t=[];a.length>0;){var i=a.shift();i&&(t.push(i),i.occupant&&i.occupant.upgradeSlots&&!i.faceDown&&(a=i.occupant.upgradeSlots.concat(a)))}return t}})),module.filter("shipInterceptors",["$filter",function(n){var a=n("upgradeSlots");return function(n,t,i,c,e){var o=[],r=a(t);return $.each(r,(function(a,t){t.occupant&&t.occupant.intercept[i][c]&&!t.faceDown&&wrapInterceptors(t.occupant.intercept[i][c],t.occupant,o),(e&&t==e||n==t.occupant)&&t.intercept&&t.intercept[i]&&t.intercept[i][c]&&wrapInterceptors(t.intercept[i][c],t.source||"Unknown",o)})),t.resource&&t.resource.intercept[i][c]&&wrapInterceptors(t.resource.intercept[i][c],t.resource,o),t.captain&&t.captain.intercept[i][c]&&wrapInterceptors(t.captain.intercept[i][c],t.captain,o),t.admiral&&t.admiral.intercept[i][c]&&wrapInterceptors(t.admiral.intercept[i][c],t.admiral,o),t.ambassador&&t.ambassador.intercept[i][c]&&wrapInterceptors(t.ambassador.intercept[i][c],t.ambassador,o),t.intercept&&t.intercept[i][c]&&wrapInterceptors(t.intercept[i][c],t,o),o}}]),module.filter("interceptors",["$filter","globalInterceptors",function(n,a){var t=n("shipInterceptors");return function(n,i,c,e,o){var r=[];return n.intercept&&n.intercept.self&&n.intercept.self[e]&&wrapInterceptors(n.intercept.self[e],n,r),i&&(r=r.concat(t(n,i,"ship",e,o))),c&&($.each(c.ships||[],(function(a,i){r=r.concat(t(n,i,"fleet",e))})),c.resource&&(r=r.concat(t(n,c.resource,"fleet",e)))),a[e]&&(r=r.concat(a[e])),r}}]),module.filter("valueOf",["$filter",function(n){var a=n("interceptors");return function(n,t,i,c,e,o){data=n[t],data=data instanceof Function?data(n,i,c):data;var r=[{source:"Printed Value",value:data}];if(i){var u=a(n,i,c,t,e);u.sort((function(n,a){return n.priority>a.priority?1:-1})),$.each(u,(function(a,t){var e=data;data=t.fn(n,i,c,data),data==e||t.hidden||(data=data instanceof Function?data(n,i,c):data,e=e instanceof Function?e(n,i,c):e,data!=e&&r.push({source:t.source,value:data-e}))}))}return data instanceof Function&&(data=data(n,i,c)),o&&o.modifiers?r:data}}]);
